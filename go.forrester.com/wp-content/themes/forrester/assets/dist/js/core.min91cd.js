!function(e){var t={};function i(g){if(t[g])return t[g].exports;var n=t[g]={i:g,l:!1,exports:{}};return e[g].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,g){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:g})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var g=Object.create(null);if(i.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(g,n,function(t){return e[t]}.bind(null,n));return g},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=33)}([function(e,t,i){(function(e){var i,g,n,I;function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,g=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(g,arguments,n)}else i=g.apply(this,arguments);return a(this,i)}}function a(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,g=new Array(t);i<t;i++)g[i]=e[i];return g}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,g)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){d(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var i=0;i<t.length;i++){var g=t[i];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}function p(e,t,i){return t&&m(e.prototype,t),i&&m(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*! choices.js v10.1.0 | Â© 2022 Josh Johnson | https://github.com/jshjohnson/Choices#readme */window,I=function(){return function(){"use strict";var e={282:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.clearChoices=t.activateChoices=t.filterChoices=t.addChoice=void 0;var g=i(883);t.addChoice=function(e){var t=e.value,i=e.label,n=e.id,I=e.groupId,o=e.disabled,C=e.elementId,r=e.customProperties,a=e.placeholder,s=e.keyCode;return{type:g.ACTION_TYPES.ADD_CHOICE,value:t,label:i,id:n,groupId:I,disabled:o,elementId:C,customProperties:r,placeholder:a,keyCode:s}},t.filterChoices=function(e){return{type:g.ACTION_TYPES.FILTER_CHOICES,results:e}},t.activateChoices=function(e){return void 0===e&&(e=!0),{type:g.ACTION_TYPES.ACTIVATE_CHOICES,active:e}},t.clearChoices=function(){return{type:g.ACTION_TYPES.CLEAR_CHOICES}}},783:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.addGroup=void 0;var g=i(883);t.addGroup=function(e){var t=e.value,i=e.id,n=e.active,I=e.disabled;return{type:g.ACTION_TYPES.ADD_GROUP,value:t,id:i,active:n,disabled:I}}},464:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.highlightItem=t.removeItem=t.addItem=void 0;var g=i(883);t.addItem=function(e){var t=e.value,i=e.label,n=e.id,I=e.choiceId,o=e.groupId,C=e.customProperties,r=e.placeholder,a=e.keyCode;return{type:g.ACTION_TYPES.ADD_ITEM,value:t,label:i,id:n,choiceId:I,groupId:o,customProperties:C,placeholder:r,keyCode:a}},t.removeItem=function(e,t){return{type:g.ACTION_TYPES.REMOVE_ITEM,id:e,choiceId:t}},t.highlightItem=function(e,t){return{type:g.ACTION_TYPES.HIGHLIGHT_ITEM,id:e,highlighted:t}}},137:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.setIsLoading=t.resetTo=t.clearAll=void 0;var g=i(883);t.clearAll=function(){return{type:g.ACTION_TYPES.CLEAR_ALL}},t.resetTo=function(e){return{type:g.ACTION_TYPES.RESET_TO,state:e}},t.setIsLoading=function(e){return{type:g.ACTION_TYPES.SET_IS_LOADING,isLoading:e}}},373:function(e,t,i){var g=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var g,n=0,I=t.length;n<I;n++)!g&&n in t||(g||(g=Array.prototype.slice.call(t,0,n)),g[n]=t[n]);return e.concat(g||Array.prototype.slice.call(t))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var I=n(i(996)),o=n(i(221)),C=i(282),r=i(783),a=i(464),s=i(137),A=i(520),c=i(883),l=i(789),u=i(799),d=i(655),h=n(i(744)),m=n(i(686)),p="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,f={},y=function(){function e(t,i){var n=this;void 0===t&&(t="[data-choice]"),void 0===i&&(i={}),void 0===i.allowHTML&&console.warn("Deprecation warning: allowHTML will default to false in a future release. To render HTML in Choices, you will need to set it to true. Setting allowHTML will suppress this message."),this.config=I.default.all([l.DEFAULT_CONFIG,e.defaults.options,i],{arrayMerge:function(e,t){return g([],t,!0)}});var o=(0,u.diff)(this.config,l.DEFAULT_CONFIG);o.length&&console.warn("Unknown config option(s) passed",o.join(", "));var C="string"==typeof t?document.querySelector(t):t;if(!(C instanceof HTMLInputElement||C instanceof HTMLSelectElement))throw TypeError("Expected one of the following types text|select-one|select-multiple");if(this._isTextElement=C.type===c.TEXT_TYPE,this._isSelectOneElement=C.type===c.SELECT_ONE_TYPE,this._isSelectMultipleElement=C.type===c.SELECT_MULTIPLE_TYPE,this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement,this.config.searchEnabled=this._isSelectMultipleElement||this.config.searchEnabled,["auto","always"].includes("".concat(this.config.renderSelectedChoices))||(this.config.renderSelectedChoices="auto"),i.addItemFilter&&"function"!=typeof i.addItemFilter){var r=i.addItemFilter instanceof RegExp?i.addItemFilter:new RegExp(i.addItemFilter);this.config.addItemFilter=r.test.bind(r)}if(this._isTextElement?this.passedElement=new A.WrappedInput({element:C,classNames:this.config.classNames,delimiter:this.config.delimiter}):this.passedElement=new A.WrappedSelect({element:C,classNames:this.config.classNames,template:function(e){return n._templates.option(e)}}),this.initialised=!1,this._store=new h.default,this._initialState=d.defaultState,this._currentState=d.defaultState,this._prevState=d.defaultState,this._currentValue="",this._canSearch=!!this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=(0,u.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.dir,!this._direction){var a=window.getComputedStyle(this.passedElement.element).direction;a!==window.getComputedStyle(document.documentElement).direction&&(this._direction=a)}if(this._idNames={itemChoice:"item-choice"},this._isSelectElement&&(this._presetGroups=this.passedElement.optionGroups,this._presetOptions=this.passedElement.options),this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&this._isTextElement){var s=this.passedElement.value.split(this.config.delimiter);this._presetItems=this._presetItems.concat(s)}if(this.passedElement.options&&this.passedElement.options.forEach((function(e){n._presetChoices.push({value:e.value,label:e.innerHTML,selected:!!e.selected,disabled:e.disabled||e.parentNode.disabled,placeholder:""===e.value||e.hasAttribute("placeholder"),customProperties:e.dataset["custom-properties"]})})),this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive)return this.config.silent||console.warn("Trying to initialise Choices on element already initialised",{element:t}),void(this.initialised=!0);this.init()}return Object.defineProperty(e,"defaults",{get:function(){return Object.preventExtensions({get options(){return f},get templates(){return m.default}})},enumerable:!1,configurable:!0}),e.prototype.init=function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._store.subscribe(this._render),this._render(),this._addEventListeners(),(!this.config.addItems||this.passedElement.element.hasAttribute("disabled"))&&this.disable(),this.initialised=!0;var e=this.config.callbackOnInit;e&&"function"==typeof e&&e.call(this)}},e.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.clearStore(),this._isSelectElement&&(this.passedElement.options=this._presetOptions),this._templates=m.default,this.initialised=!1)},e.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},e.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},e.prototype.highlightItem=function(e,t){if(void 0===t&&(t=!0),!e||!e.id)return this;var i=e.id,g=e.groupId,n=void 0===g?-1:g,I=e.value,o=void 0===I?"":I,C=e.label,r=void 0===C?"":C,s=n>=0?this._store.getGroupById(n):null;return this._store.dispatch((0,a.highlightItem)(i,!0)),t&&this.passedElement.triggerEvent(c.EVENTS.highlightItem,{id:i,value:o,label:r,groupValue:s&&s.value?s.value:null}),this},e.prototype.unhighlightItem=function(e){if(!e||!e.id)return this;var t=e.id,i=e.groupId,g=void 0===i?-1:i,n=e.value,I=void 0===n?"":n,o=e.label,C=void 0===o?"":o,r=g>=0?this._store.getGroupById(g):null;return this._store.dispatch((0,a.highlightItem)(t,!1)),this.passedElement.triggerEvent(c.EVENTS.highlightItem,{id:t,value:I,label:C,groupValue:r&&r.value?r.value:null}),this},e.prototype.highlightAll=function(){var e=this;return this._store.items.forEach((function(t){return e.highlightItem(t)})),this},e.prototype.unhighlightAll=function(){var e=this;return this._store.items.forEach((function(t){return e.unhighlightItem(t)})),this},e.prototype.removeActiveItemsByValue=function(e){var t=this;return this._store.activeItems.filter((function(t){return t.value===e})).forEach((function(e){return t._removeItem(e)})),this},e.prototype.removeActiveItems=function(e){var t=this;return this._store.activeItems.filter((function(t){return t.id!==e})).forEach((function(e){return t._removeItem(e)})),this},e.prototype.removeHighlightedItems=function(e){var t=this;return void 0===e&&(e=!1),this._store.highlightedActiveItems.forEach((function(i){t._removeItem(i),e&&t._triggerChange(i.value)})),this},e.prototype.showDropdown=function(e){var t=this;return this.dropdown.isActive||requestAnimationFrame((function(){t.dropdown.show(),t.containerOuter.open(t.dropdown.distanceFromTopWindow),!e&&t._canSearch&&t.input.focus(),t.passedElement.triggerEvent(c.EVENTS.showDropdown,{})})),this},e.prototype.hideDropdown=function(e){var t=this;return this.dropdown.isActive?(requestAnimationFrame((function(){t.dropdown.hide(),t.containerOuter.close(),!e&&t._canSearch&&(t.input.removeActiveDescendant(),t.input.blur()),t.passedElement.triggerEvent(c.EVENTS.hideDropdown,{})})),this):this},e.prototype.getValue=function(e){void 0===e&&(e=!1);var t=this._store.activeItems.reduce((function(t,i){var g=e?i.value:i;return t.push(g),t}),[]);return this._isSelectOneElement?t[0]:t},e.prototype.setValue=function(e){var t=this;return this.initialised?(e.forEach((function(e){return t._setChoiceOrItem(e)})),this):this},e.prototype.setChoiceByValue=function(e){var t=this;return!this.initialised||this._isTextElement||(Array.isArray(e)?e:[e]).forEach((function(e){return t._findAndSelectChoiceByValue(e)})),this},e.prototype.setChoices=function(e,t,i,g){var n=this;if(void 0===e&&(e=[]),void 0===t&&(t="value"),void 0===i&&(i="label"),void 0===g&&(g=!1),!this.initialised)throw new ReferenceError("setChoices was called on a non-initialized instance of Choices");if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if("string"!=typeof t||!t)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(g&&this.clearChoices(),"function"==typeof e){var I=e(this);if("function"==typeof Promise&&I instanceof Promise)return new Promise((function(e){return requestAnimationFrame(e)})).then((function(){return n._handleLoadingState(!0)})).then((function(){return I})).then((function(e){return n.setChoices(e,t,i,g)})).catch((function(e){n.config.silent||console.error(e)})).then((function(){return n._handleLoadingState(!1)})).then((function(){return n}));if(!Array.isArray(I))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(b(I)));return this.setChoices(I,t,i,!1)}if(!Array.isArray(e))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._startLoading(),e.forEach((function(e){if(e.choices)n._addGroup({id:e.id?parseInt("".concat(e.id),10):null,group:e,valueKey:t,labelKey:i});else{var g=e;n._addChoice({value:g[t],label:g[i],isSelected:!!g.selected,isDisabled:!!g.disabled,placeholder:!!g.placeholder,customProperties:g.customProperties})}})),this._stopLoading(),this},e.prototype.clearChoices=function(){return this._store.dispatch((0,C.clearChoices)()),this},e.prototype.clearStore=function(){return this._store.dispatch((0,s.clearAll)()),this},e.prototype.clearInput=function(){var e=!this._isSelectOneElement;return this.input.clear(e),!this._isTextElement&&this._canSearch&&(this._isSearching=!1,this._store.dispatch((0,C.activateChoices)(!0))),this},e.prototype._render=function(){if(!this._store.isLoading()){this._currentState=this._store.state;var e=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,t=this._isSelectElement,i=this._currentState.items!==this._prevState.items;e&&(t&&this._renderChoices(),i&&this._renderItems(),this._prevState=this._currentState)}},e.prototype._renderChoices=function(){var e=this,t=this._store,i=t.activeGroups,g=t.activeChoices,n=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame((function(){return e.choiceList.scrollToTop()})),i.length>=1&&!this._isSearching){var I=g.filter((function(e){return!0===e.placeholder&&-1===e.groupId}));I.length>=1&&(n=this._createChoicesFragment(I,n)),n=this._createGroupsFragment(i,g,n)}else g.length>=1&&(n=this._createChoicesFragment(g,n));if(n.childNodes&&n.childNodes.length>0){var o=this._store.activeItems,C=this._canAddItem(o,this.input.value);if(C.response)this.choiceList.append(n),this._highlightChoice();else{var r=this._getTemplate("notice",C.notice);this.choiceList.append(r)}}else{var a=void 0;r=void 0,this._isSearching?(r="function"==typeof this.config.noResultsText?this.config.noResultsText():this.config.noResultsText,a=this._getTemplate("notice",r,"no-results")):(r="function"==typeof this.config.noChoicesText?this.config.noChoicesText():this.config.noChoicesText,a=this._getTemplate("notice",r,"no-choices")),this.choiceList.append(a)}},e.prototype._renderItems=function(){var e=this._store.activeItems||[];this.itemList.clear();var t=this._createItemsFragment(e);t.childNodes&&this.itemList.append(t)},e.prototype._createGroupsFragment=function(e,t,i){var g=this;return void 0===i&&(i=document.createDocumentFragment()),this.config.shouldSort&&e.sort(this.config.sorter),e.forEach((function(e){var n=function(e){return t.filter((function(t){return g._isSelectOneElement?t.groupId===e.id:t.groupId===e.id&&("always"===g.config.renderSelectedChoices||!t.selected)}))}(e);if(n.length>=1){var I=g._getTemplate("choiceGroup",e);i.appendChild(I),g._createChoicesFragment(n,i,!0)}})),i},e.prototype._createChoicesFragment=function(e,t,i){var n=this;void 0===t&&(t=document.createDocumentFragment()),void 0===i&&(i=!1);var I=this.config,o=I.renderSelectedChoices,C=I.searchResultLimit,r=I.renderChoiceLimit,a=this._isSearching?u.sortByScore:this.config.sorter,s=function(e){if("auto"!==o||n._isSelectOneElement||!e.selected){var i=n._getTemplate("choice",e,n.config.itemSelectText);t.appendChild(i)}},A=e;"auto"!==o||this._isSelectOneElement||(A=e.filter((function(e){return!e.selected})));var c=A.reduce((function(e,t){return t.placeholder?e.placeholderChoices.push(t):e.normalChoices.push(t),e}),{placeholderChoices:[],normalChoices:[]}),l=c.placeholderChoices,d=c.normalChoices;(this.config.shouldSort||this._isSearching)&&d.sort(a);var h=A.length,m=this._isSelectOneElement?g(g([],l,!0),d,!0):d;this._isSearching?h=C:r&&r>0&&!i&&(h=r);for(var p=0;p<h;p+=1)m[p]&&s(m[p]);return t},e.prototype._createItemsFragment=function(e,t){var i=this;void 0===t&&(t=document.createDocumentFragment());var g=this.config,n=g.shouldSortItems,I=g.sorter,o=g.removeItemButton;return n&&!this._isSelectOneElement&&e.sort(I),this._isTextElement?this.passedElement.value=e.map((function(e){return e.value})).join(this.config.delimiter):this.passedElement.options=e,e.forEach((function(e){var g=i._getTemplate("item",e,o);t.appendChild(g)})),t},e.prototype._triggerChange=function(e){null!=e&&this.passedElement.triggerEvent(c.EVENTS.change,{value:e})},e.prototype._selectPlaceholderChoice=function(e){this._addItem({value:e.value,label:e.label,choiceId:e.id,groupId:e.groupId,placeholder:e.placeholder}),this._triggerChange(e.value)},e.prototype._handleButtonAction=function(e,t){if(e&&t&&this.config.removeItems&&this.config.removeItemButton){var i=t.parentNode&&t.parentNode.dataset.id,g=i&&e.find((function(e){return e.id===parseInt(i,10)}));g&&(this._removeItem(g),this._triggerChange(g.value),this._isSelectOneElement&&this._store.placeholderChoice&&this._selectPlaceholderChoice(this._store.placeholderChoice))}},e.prototype._handleItemAction=function(e,t,i){var g=this;if(void 0===i&&(i=!1),e&&t&&this.config.removeItems&&!this._isSelectOneElement){var n=t.dataset.id;e.forEach((function(e){e.id!==parseInt("".concat(n),10)||e.highlighted?!i&&e.highlighted&&g.unhighlightItem(e):g.highlightItem(e)})),this.input.focus()}},e.prototype._handleChoiceAction=function(e,t){if(e&&t){var i=t.dataset.id,g=i&&this._store.getChoiceById(i);if(g){var n=e[0]&&e[0].keyCode?e[0].keyCode:void 0,I=this.dropdown.isActive;g.keyCode=n,this.passedElement.triggerEvent(c.EVENTS.choice,{choice:g}),g.selected||g.disabled||this._canAddItem(e,g.value).response&&(this._addItem({value:g.value,label:g.label,choiceId:g.id,groupId:g.groupId,customProperties:g.customProperties,placeholder:g.placeholder,keyCode:g.keyCode}),this._triggerChange(g.value)),this.clearInput(),I&&this._isSelectOneElement&&(this.hideDropdown(!0),this.containerOuter.focus())}}},e.prototype._handleBackspace=function(e){if(this.config.removeItems&&e){var t=e[e.length-1],i=e.some((function(e){return e.highlighted}));this.config.editItems&&!i&&t?(this.input.value=t.value,this.input.setWidth(),this._removeItem(t),this._triggerChange(t.value)):(i||this.highlightItem(t,!1),this.removeHighlightedItems(!0))}},e.prototype._startLoading=function(){this._store.dispatch((0,s.setIsLoading)(!0))},e.prototype._stopLoading=function(){this._store.dispatch((0,s.setIsLoading)(!1))},e.prototype._handleLoadingState=function(e){void 0===e&&(e=!0);var t=this.itemList.getChild(".".concat(this.config.classNames.placeholder));e?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?t?t.innerHTML=this.config.loadingText:(t=this._getTemplate("placeholder",this.config.loadingText))&&this.itemList.append(t):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?t&&(t.innerHTML=this._placeholderValue||""):this.input.placeholder=this._placeholderValue||"")},e.prototype._handleSearch=function(e){if(this.input.isFocussed){var t=this._store.choices,i=this.config,g=i.searchFloor,n=i.searchChoices,I=t.some((function(e){return!e.active}));if(null!=e&&e.length>=g){var o=n?this._searchChoices(e):0;this.passedElement.triggerEvent(c.EVENTS.search,{value:e,resultCount:o})}else I&&(this._isSearching=!1,this._store.dispatch((0,C.activateChoices)(!0)))}},e.prototype._canAddItem=function(e,t){var i=!0,g="function"==typeof this.config.addItemText?this.config.addItemText(t):this.config.addItemText;if(!this._isSelectOneElement){var n=(0,u.existsInArray)(e,t);this.config.maxItemCount>0&&this.config.maxItemCount<=e.length&&(i=!1,g="function"==typeof this.config.maxItemText?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),!this.config.duplicateItemsAllowed&&n&&i&&(i=!1,g="function"==typeof this.config.uniqueItemText?this.config.uniqueItemText(t):this.config.uniqueItemText),this._isTextElement&&this.config.addItems&&i&&"function"==typeof this.config.addItemFilter&&!this.config.addItemFilter(t)&&(i=!1,g="function"==typeof this.config.customAddItemText?this.config.customAddItemText(t):this.config.customAddItemText)}return{response:i,notice:g}},e.prototype._searchChoices=function(e){var t="string"==typeof e?e.trim():e,i="string"==typeof this._currentValue?this._currentValue.trim():this._currentValue;if(t.length<1&&t==="".concat(i," "))return 0;var n=this._store.searchableChoices,I=t,r=Object.assign(this.config.fuseOptions,{keys:g([],this.config.searchFields,!0),includeMatches:!0}),a=new o.default(n,r).search(I);return this._currentValue=t,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((0,C.filterChoices)(a)),a.length},e.prototype._addEventListeners=function(){var e=document.documentElement;e.addEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.addEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("click",this._onClick,{passive:!0}),e.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(this.containerOuter.element.addEventListener("focus",this._onFocus,{passive:!0}),this.containerOuter.element.addEventListener("blur",this._onBlur,{passive:!0})),this.input.element.addEventListener("keyup",this._onKeyUp,{passive:!0}),this.input.element.addEventListener("focus",this._onFocus,{passive:!0}),this.input.element.addEventListener("blur",this._onBlur,{passive:!0}),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},e.prototype._removeEventListeners=function(){var e=document.documentElement;e.removeEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.removeEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("click",this._onClick),e.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(this.containerOuter.element.removeEventListener("focus",this._onFocus),this.containerOuter.element.removeEventListener("blur",this._onBlur)),this.input.element.removeEventListener("keyup",this._onKeyUp),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},e.prototype._onKeyDown=function(e){var t=e.keyCode,i=this._store.activeItems,g=this.input.isFocussed,n=this.dropdown.isActive,I=this.itemList.hasChildren(),o=String.fromCharCode(t),C=/[a-zA-Z0-9-_ ]/.test(o),r=c.KEY_CODES.BACK_KEY,a=c.KEY_CODES.DELETE_KEY,s=c.KEY_CODES.ENTER_KEY,A=c.KEY_CODES.A_KEY,l=c.KEY_CODES.ESC_KEY,u=c.KEY_CODES.UP_KEY,d=c.KEY_CODES.DOWN_KEY,h=c.KEY_CODES.PAGE_UP_KEY,m=c.KEY_CODES.PAGE_DOWN_KEY;switch(this._isTextElement||n||!C||(this.showDropdown(),this.input.isFocussed||(this.input.value+=o.toLowerCase())),t){case A:return this._onSelectKey(e,I);case s:return this._onEnterKey(e,i,n);case l:return this._onEscapeKey(n);case u:case h:case d:case m:return this._onDirectionKey(e,n);case a:case r:return this._onDeleteKey(e,i,g)}},e.prototype._onKeyUp=function(e){var t=e.target,i=e.keyCode,g=this.input.value,n=this._store.activeItems,I=this._canAddItem(n,g),o=c.KEY_CODES.BACK_KEY,r=c.KEY_CODES.DELETE_KEY;if(this._isTextElement)if(I.notice&&g){var a=this._getTemplate("notice",I.notice);this.dropdown.element.innerHTML=a.outerHTML,this.showDropdown(!0)}else this.hideDropdown(!0);else{var s=(i===o||i===r)&&t&&!t.value,A=!this._isTextElement&&this._isSearching,l=this._canSearch&&I.response;s&&A?(this._isSearching=!1,this._store.dispatch((0,C.activateChoices)(!0))):l&&this._handleSearch(this.input.rawValue)}this._canSearch=this.config.searchEnabled},e.prototype._onSelectKey=function(e,t){var i=e.ctrlKey,g=e.metaKey;(i||g)&&t&&(this._canSearch=!1,this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement&&this.highlightAll())},e.prototype._onEnterKey=function(e,t,i){var g=e.target,n=c.KEY_CODES.ENTER_KEY,I=g&&g.hasAttribute("data-button");if(this._isTextElement&&g&&g.value){var o=this.input.value;this._canAddItem(t,o).response&&(this.hideDropdown(!0),this._addItem({value:o}),this._triggerChange(o),this.clearInput())}if(I&&(this._handleButtonAction(t,g),e.preventDefault()),i){var C=this.dropdown.getChild(".".concat(this.config.classNames.highlightedState));C&&(t[0]&&(t[0].keyCode=n),this._handleChoiceAction(t,C)),e.preventDefault()}else this._isSelectOneElement&&(this.showDropdown(),e.preventDefault())},e.prototype._onEscapeKey=function(e){e&&(this.hideDropdown(!0),this.containerOuter.focus())},e.prototype._onDirectionKey=function(e,t){var i=e.keyCode,g=e.metaKey,n=c.KEY_CODES.DOWN_KEY,I=c.KEY_CODES.PAGE_UP_KEY,o=c.KEY_CODES.PAGE_DOWN_KEY;if(t||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var C=i===n||i===o?1:-1,r=void 0;if(g||i===o||i===I)r=C>0?this.dropdown.element.querySelector("".concat("[data-choice-selectable]",":last-of-type")):this.dropdown.element.querySelector("[data-choice-selectable]");else{var a=this.dropdown.element.querySelector(".".concat(this.config.classNames.highlightedState));r=a?(0,u.getAdjacentEl)(a,"[data-choice-selectable]",C):this.dropdown.element.querySelector("[data-choice-selectable]")}r&&((0,u.isScrolledIntoView)(r,this.choiceList.element,C)||this.choiceList.scrollToChildElement(r,C),this._highlightChoice(r)),e.preventDefault()}},e.prototype._onDeleteKey=function(e,t,i){var g=e.target;this._isSelectOneElement||g.value||!i||(this._handleBackspace(t),e.preventDefault())},e.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},e.prototype._onTouchEnd=function(e){var t=(e||e.touches[0]).target;this._wasTap&&this.containerOuter.element.contains(t)&&((t===this.containerOuter.element||t===this.containerInner.element)&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),e.stopPropagation()),this._wasTap=!0},e.prototype._onMouseDown=function(e){var t=e.target;if(t instanceof HTMLElement){if(p&&this.choiceList.element.contains(t)){var i=this.choiceList.element.firstElementChild,g="ltr"===this._direction?e.offsetX>=i.offsetWidth:e.offsetX<i.offsetLeft;this._isScrollingOnIe=g}if(t!==this.input.element){var n=t.closest("[data-button],[data-item],[data-choice]");if(n instanceof HTMLElement){var I=e.shiftKey,o=this._store.activeItems,C=n.dataset;"button"in C?this._handleButtonAction(o,n):"item"in C?this._handleItemAction(o,n,I):"choice"in C&&this._handleChoiceAction(o,n)}e.preventDefault()}}},e.prototype._onMouseOver=function(e){var t=e.target;t instanceof HTMLElement&&"choice"in t.dataset&&this._highlightChoice(t)},e.prototype._onClick=function(e){var t=e.target;this.containerOuter.element.contains(t)?this.dropdown.isActive||this.containerOuter.isDisabled?this._isSelectOneElement&&t!==this.input.element&&!this.dropdown.element.contains(t)&&this.hideDropdown():this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),this.containerOuter.focus()):(this._store.highlightedActiveItems.length>0&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0))},e.prototype._onFocus=function(e){var t,i=this,g=e.target;g&&this.containerOuter.element.contains(g)&&((t={})[c.TEXT_TYPE]=function(){g===i.input.element&&i.containerOuter.addFocusState()},t[c.SELECT_ONE_TYPE]=function(){i.containerOuter.addFocusState(),g===i.input.element&&i.showDropdown(!0)},t[c.SELECT_MULTIPLE_TYPE]=function(){g===i.input.element&&(i.showDropdown(!0),i.containerOuter.addFocusState())},t)[this.passedElement.element.type]()},e.prototype._onBlur=function(e){var t,i=this,g=e.target;if(g&&this.containerOuter.element.contains(g)&&!this._isScrollingOnIe){var n=this._store.activeItems.some((function(e){return e.highlighted}));((t={})[c.TEXT_TYPE]=function(){g===i.input.element&&(i.containerOuter.removeFocusState(),n&&i.unhighlightAll(),i.hideDropdown(!0))},t[c.SELECT_ONE_TYPE]=function(){i.containerOuter.removeFocusState(),(g===i.input.element||g===i.containerOuter.element&&!i._canSearch)&&i.hideDropdown(!0)},t[c.SELECT_MULTIPLE_TYPE]=function(){g===i.input.element&&(i.containerOuter.removeFocusState(),i.hideDropdown(!0),n&&i.unhighlightAll())},t)[this.passedElement.element.type]()}else this._isScrollingOnIe=!1,this.input.element.focus()},e.prototype._onFormReset=function(){this._store.dispatch((0,s.resetTo)(this._initialState))},e.prototype._highlightChoice=function(e){var t=this;void 0===e&&(e=null);var i=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(i.length){var g=e;Array.from(this.dropdown.element.querySelectorAll(".".concat(this.config.classNames.highlightedState))).forEach((function(e){e.classList.remove(t.config.classNames.highlightedState),e.setAttribute("aria-selected","false")})),g?this._highlightPosition=i.indexOf(g):(g=i.length>this._highlightPosition?i[this._highlightPosition]:i[i.length-1])||(g=i[0]),g.classList.add(this.config.classNames.highlightedState),g.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(c.EVENTS.highlightChoice,{el:g}),this.dropdown.isActive&&(this.input.setActiveDescendant(g.id),this.containerOuter.setActiveDescendant(g.id))}},e.prototype._addItem=function(e){var t=e.value,i=e.label,g=void 0===i?null:i,n=e.choiceId,I=void 0===n?-1:n,o=e.groupId,C=void 0===o?-1:o,r=e.customProperties,s=void 0===r?{}:r,A=e.placeholder,l=void 0!==A&&A,u=e.keyCode,d=void 0===u?-1:u,h="string"==typeof t?t.trim():t,m=this._store.items,p=g||h,b=I||-1,f=C>=0?this._store.getGroupById(C):null,y=m?m.length+1:1;this.config.prependValue&&(h=this.config.prependValue+h.toString()),this.config.appendValue&&(h+=this.config.appendValue.toString()),this._store.dispatch((0,a.addItem)({value:h,label:p,id:y,choiceId:b,groupId:C,customProperties:s,placeholder:l,keyCode:d})),this._isSelectOneElement&&this.removeActiveItems(y),this.passedElement.triggerEvent(c.EVENTS.addItem,{id:y,value:h,label:p,customProperties:s,groupValue:f&&f.value?f.value:null,keyCode:d})},e.prototype._removeItem=function(e){var t=e.id,i=e.value,g=e.label,n=e.customProperties,I=e.choiceId,o=e.groupId,C=o&&o>=0?this._store.getGroupById(o):null;t&&I&&(this._store.dispatch((0,a.removeItem)(t,I)),this.passedElement.triggerEvent(c.EVENTS.removeItem,{id:t,value:i,label:g,customProperties:n,groupValue:C&&C.value?C.value:null}))},e.prototype._addChoice=function(e){var t=e.value,i=e.label,g=void 0===i?null:i,n=e.isSelected,I=void 0!==n&&n,o=e.isDisabled,r=void 0!==o&&o,a=e.groupId,s=void 0===a?-1:a,A=e.customProperties,c=void 0===A?{}:A,l=e.placeholder,u=void 0!==l&&l,d=e.keyCode,h=void 0===d?-1:d;if(null!=t){var m=this._store.choices,p=g||t,b=m?m.length+1:1,f="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(b);this._store.dispatch((0,C.addChoice)({id:b,groupId:s,elementId:f,value:t,label:p,disabled:r,customProperties:c,placeholder:u,keyCode:h})),I&&this._addItem({value:t,label:p,choiceId:b,customProperties:c,placeholder:u,keyCode:h})}},e.prototype._addGroup=function(e){var t=this,i=e.group,g=e.id,n=e.valueKey,I=void 0===n?"value":n,o=e.labelKey,C=void 0===o?"label":o,a=(0,u.isType)("Object",i)?i.choices:Array.from(i.getElementsByTagName("OPTION")),s=g||Math.floor((new Date).valueOf()*Math.random()),A=!!i.disabled&&i.disabled;a?(this._store.dispatch((0,r.addGroup)({value:i.label,id:s,active:!0,disabled:A})),a.forEach((function(e){var i=e.disabled||e.parentNode&&e.parentNode.disabled;t._addChoice({value:e[I],label:(0,u.isType)("Object",e)?e[C]:e.innerHTML,isSelected:e.selected,isDisabled:i,groupId:s,customProperties:e.customProperties,placeholder:e.placeholder})}))):this._store.dispatch((0,r.addGroup)({value:i.label,id:i.id,active:!1,disabled:i.disabled}))},e.prototype._getTemplate=function(e){for(var t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return(t=this._templates[e]).call.apply(t,g([this,this.config],i,!1))},e.prototype._createTemplates=function(){var e=this.config.callbackOnCreateTemplates,t={};e&&"function"==typeof e&&(t=e.call(this,u.strToEl)),this._templates=(0,I.default)(m.default,t)},e.prototype._createElements=function(){this.containerOuter=new A.Container({element:this._getTemplate("containerOuter",this._direction,this._isSelectElement,this._isSelectOneElement,this.config.searchEnabled,this.passedElement.element.type,this.config.labelId),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.containerInner=new A.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.input=new A.Input({element:this._getTemplate("input",this._placeholderValue),classNames:this.config.classNames,type:this.passedElement.element.type,preventPaste:!this.config.paste}),this.choiceList=new A.List({element:this._getTemplate("choiceList",this._isSelectOneElement)}),this.itemList=new A.List({element:this._getTemplate("itemList",this._isSelectOneElement)}),this.dropdown=new A.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:this.passedElement.element.type})},e.prototype._createStructure=function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth()),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this._isTextElement||this.dropdown.element.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&this.dropdown.element.insertBefore(this.input.element,this.dropdown.element.firstChild):this.containerInner.element.appendChild(this.input.element),this._isSelectElement&&(this._highlightPosition=0,this._isSearching=!1,this._startLoading(),this._presetGroups.length?this._addPredefinedGroups(this._presetGroups):this._addPredefinedChoices(this._presetChoices),this._stopLoading()),this._isTextElement&&this._addPredefinedItems(this._presetItems)},e.prototype._addPredefinedGroups=function(e){var t=this,i=this.passedElement.placeholderOption;i&&i.parentNode&&"SELECT"===i.parentNode.tagName&&this._addChoice({value:i.value,label:i.innerHTML,isSelected:i.selected,isDisabled:i.disabled,placeholder:!0}),e.forEach((function(e){return t._addGroup({group:e,id:e.id||null})}))},e.prototype._addPredefinedChoices=function(e){var t=this;this.config.shouldSort&&e.sort(this.config.sorter);var i=e.some((function(e){return e.selected})),g=e.findIndex((function(e){return void 0===e.disabled||!e.disabled}));e.forEach((function(e,n){var I=e.value,o=void 0===I?"":I,C=e.label,r=e.customProperties,a=e.placeholder;if(t._isSelectElement)if(e.choices)t._addGroup({group:e,id:e.id||null});else{var s=!(!t._isSelectOneElement||i||n!==g)||e.selected,A=e.disabled;t._addChoice({value:o,label:C,isSelected:!!s,isDisabled:!!A,placeholder:!!a,customProperties:r})}else t._addChoice({value:o,label:C,isSelected:!!e.selected,isDisabled:!!e.disabled,placeholder:!!e.placeholder,customProperties:r})}))},e.prototype._addPredefinedItems=function(e){var t=this;e.forEach((function(e){"object"===b(e)&&e.value&&t._addItem({value:e.value,label:e.label,choiceId:e.id,customProperties:e.customProperties,placeholder:e.placeholder}),"string"==typeof e&&t._addItem({value:e})}))},e.prototype._setChoiceOrItem=function(e){var t=this;({object:function(){e.value&&(t._isTextElement?t._addItem({value:e.value,label:e.label,choiceId:e.id,customProperties:e.customProperties,placeholder:e.placeholder}):t._addChoice({value:e.value,label:e.label,isSelected:!0,isDisabled:!1,customProperties:e.customProperties,placeholder:e.placeholder}))},string:function(){t._isTextElement?t._addItem({value:e}):t._addChoice({value:e,label:e,isSelected:!0,isDisabled:!1})}})[(0,u.getType)(e).toLowerCase()]()},e.prototype._findAndSelectChoiceByValue=function(e){var t=this,i=this._store.choices.find((function(i){return t.config.valueComparer(i.value,e)}));i&&!i.selected&&this._addItem({value:i.value,label:i.label,choiceId:i.id,groupId:i.groupId,customProperties:i.customProperties,placeholder:i.placeholder,keyCode:i.keyCode})},e.prototype._generatePlaceholderValue=function(){if(this._isSelectElement&&this.passedElement.placeholderOption){var e=this.passedElement.placeholderOption;return e?e.text:null}var t=this.config,i=t.placeholder,g=t.placeholderValue,n=this.passedElement.element.dataset;if(i){if(g)return g;if(n.placeholder)return n.placeholder}return null},e}();t.default=y},613:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var g=i(799),n=i(883),I=function(){function e(e){var t=e.element,i=e.type,g=e.classNames,n=e.position;this.element=t,this.classNames=g,this.type=i,this.position=n,this.isOpen=!1,this.isFlipped=!1,this.isFocussed=!1,this.isDisabled=!1,this.isLoading=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return e.prototype.addEventListeners=function(){this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur)},e.prototype.removeEventListeners=function(){this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},e.prototype.shouldFlip=function(e){if("number"!=typeof e)return!1;var t=!1;return"auto"===this.position?t=!window.matchMedia("(min-height: ".concat(e+1,"px)")).matches:"top"===this.position&&(t=!0),t},e.prototype.setActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},e.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},e.prototype.open=function(e){this.element.classList.add(this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(e)&&(this.element.classList.add(this.classNames.flippedState),this.isFlipped=!0)},e.prototype.close=function(){this.element.classList.remove(this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(this.element.classList.remove(this.classNames.flippedState),this.isFlipped=!1)},e.prototype.focus=function(){this.isFocussed||this.element.focus()},e.prototype.addFocusState=function(){this.element.classList.add(this.classNames.focusState)},e.prototype.removeFocusState=function(){this.element.classList.remove(this.classNames.focusState)},e.prototype.enable=function(){this.element.classList.remove(this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===n.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},e.prototype.disable=function(){this.element.classList.add(this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===n.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},e.prototype.wrap=function(e){(0,g.wrap)(e,this.element)},e.prototype.unwrap=function(e){this.element.parentNode&&(this.element.parentNode.insertBefore(e,this.element),this.element.parentNode.removeChild(this.element))},e.prototype.addLoadingState=function(){this.element.classList.add(this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},e.prototype.removeLoadingState=function(){this.element.classList.remove(this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},e.prototype._onFocus=function(){this.isFocussed=!0},e.prototype._onBlur=function(){this.isFocussed=!1},e}();t.default=I},217:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=e.element,i=e.type,g=e.classNames;this.element=t,this.classNames=g,this.type=i,this.isActive=!1}return Object.defineProperty(e.prototype,"distanceFromTopWindow",{get:function(){return this.element.getBoundingClientRect().bottom},enumerable:!1,configurable:!0}),e.prototype.getChild=function(e){return this.element.querySelector(e)},e.prototype.show=function(){return this.element.classList.add(this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},e.prototype.hide=function(){return this.element.classList.remove(this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},e}();t.default=i},520:function(e,t,i){var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedSelect=t.WrappedInput=t.List=t.Input=t.Container=t.Dropdown=void 0;var n=g(i(217));t.Dropdown=n.default;var I=g(i(613));t.Container=I.default;var o=g(i(11));t.Input=o.default;var C=g(i(624));t.List=C.default;var r=g(i(541));t.WrappedInput=r.default;var a=g(i(982));t.WrappedSelect=a.default},11:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var g=i(799),n=i(883),I=function(){function e(e){var t=e.element,i=e.type,g=e.classNames,n=e.preventPaste;this.element=t,this.type=i,this.classNames=g,this.preventPaste=n,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=t.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(e.prototype,"placeholder",{set:function(e){this.element.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return(0,g.sanitise)(this.element.value)},set:function(e){this.element.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawValue",{get:function(){return this.element.value},enumerable:!1,configurable:!0}),e.prototype.addEventListeners=function(){this.element.addEventListener("paste",this._onPaste),this.element.addEventListener("input",this._onInput,{passive:!0}),this.element.addEventListener("focus",this._onFocus,{passive:!0}),this.element.addEventListener("blur",this._onBlur,{passive:!0})},e.prototype.removeEventListeners=function(){this.element.removeEventListener("input",this._onInput),this.element.removeEventListener("paste",this._onPaste),this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},e.prototype.enable=function(){this.element.removeAttribute("disabled"),this.isDisabled=!1},e.prototype.disable=function(){this.element.setAttribute("disabled",""),this.isDisabled=!0},e.prototype.focus=function(){this.isFocussed||this.element.focus()},e.prototype.blur=function(){this.isFocussed&&this.element.blur()},e.prototype.clear=function(e){return void 0===e&&(e=!0),this.element.value&&(this.element.value=""),e&&this.setWidth(),this},e.prototype.setWidth=function(){var e=this.element,t=e.style,i=e.value,g=e.placeholder;t.minWidth="".concat(g.length+1,"ch"),t.width="".concat(i.length+1,"ch")},e.prototype.setActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},e.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},e.prototype._onInput=function(){this.type!==n.SELECT_ONE_TYPE&&this.setWidth()},e.prototype._onPaste=function(e){this.preventPaste&&e.preventDefault()},e.prototype._onFocus=function(){this.isFocussed=!0},e.prototype._onBlur=function(){this.isFocussed=!1},e}();t.default=I},624:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var g=i(883),n=function(){function e(e){var t=e.element;this.element=t,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return e.prototype.clear=function(){this.element.innerHTML=""},e.prototype.append=function(e){this.element.appendChild(e)},e.prototype.getChild=function(e){return this.element.querySelector(e)},e.prototype.hasChildren=function(){return this.element.hasChildNodes()},e.prototype.scrollToTop=function(){this.element.scrollTop=0},e.prototype.scrollToChildElement=function(e,t){var i=this;if(e){var g=this.element.offsetHeight,n=this.element.scrollTop+g,I=e.offsetHeight,o=e.offsetTop+I,C=t>0?this.element.scrollTop+o-n:e.offsetTop;requestAnimationFrame((function(){i._animateScroll(C,t)}))}},e.prototype._scrollDown=function(e,t,i){var g=(i-e)/t,n=g>1?g:1;this.element.scrollTop=e+n},e.prototype._scrollUp=function(e,t,i){var g=(e-i)/t,n=g>1?g:1;this.element.scrollTop=e-n},e.prototype._animateScroll=function(e,t){var i=this,n=g.SCROLLING_SPEED,I=this.element.scrollTop,o=!1;t>0?(this._scrollDown(I,n,e),I<e&&(o=!0)):(this._scrollUp(I,n,e),I>e&&(o=!0)),o&&requestAnimationFrame((function(){i._animateScroll(e,t)}))},e}();t.default=n},730:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var g=i(799),n=function(){function e(e){var t=e.element,i=e.classNames;if(this.element=t,this.classNames=i,!(t instanceof HTMLInputElement||t instanceof HTMLSelectElement))throw new TypeError("Invalid element passed");this.isDisabled=!1}return Object.defineProperty(e.prototype,"isActive",{get:function(){return"active"===this.element.dataset.choice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.element.value},set:function(e){this.element.value=e},enumerable:!1,configurable:!0}),e.prototype.conceal=function(){this.element.classList.add(this.classNames.input),this.element.hidden=!0,this.element.tabIndex=-1;var e=this.element.getAttribute("style");e&&this.element.setAttribute("data-choice-orig-style",e),this.element.setAttribute("data-choice","active")},e.prototype.reveal=function(){this.element.classList.remove(this.classNames.input),this.element.hidden=!1,this.element.removeAttribute("tabindex");var e=this.element.getAttribute("data-choice-orig-style");e?(this.element.removeAttribute("data-choice-orig-style"),this.element.setAttribute("style",e)):this.element.removeAttribute("style"),this.element.removeAttribute("data-choice"),this.element.value=this.element.value},e.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},e.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},e.prototype.triggerEvent=function(e,t){(0,g.dispatchEvent)(this.element,e,t)},e}();t.default=n},541:function(e,t,i){var g,n=this&&this.__extends||(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),I=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var i=t.element,g=t.classNames,n=t.delimiter,I=e.call(this,{element:i,classNames:g})||this;return I.delimiter=n,I}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.element.value},set:function(e){this.element.setAttribute("value",e),this.element.value=e},enumerable:!1,configurable:!0}),t}(I(i(730)).default);t.default=o},982:function(e,t,i){var g,n=this&&this.__extends||(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),I=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var i=t.element,g=t.classNames,n=t.template,I=e.call(this,{element:i,classNames:g})||this;return I.template=n,I}return n(t,e),Object.defineProperty(t.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionGroups",{get:function(){return Array.from(this.element.getElementsByTagName("OPTGROUP"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return Array.from(this.element.options)},set:function(e){var t=this,i=document.createDocumentFragment();e.forEach((function(e){return g=e,n=t.template(g),void i.appendChild(n);var g,n})),this.appendDocFragment(i)},enumerable:!1,configurable:!0}),t.prototype.appendDocFragment=function(e){this.element.innerHTML="",this.element.appendChild(e)},t}(I(i(730)).default);t.default=o},883:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SCROLLING_SPEED=t.SELECT_MULTIPLE_TYPE=t.SELECT_ONE_TYPE=t.TEXT_TYPE=t.KEY_CODES=t.ACTION_TYPES=t.EVENTS=void 0,t.EVENTS={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"},t.ACTION_TYPES={ADD_CHOICE:"ADD_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM",CLEAR_ALL:"CLEAR_ALL",RESET_TO:"RESET_TO",SET_IS_LOADING:"SET_IS_LOADING"},t.KEY_CODES={BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},t.TEXT_TYPE="text",t.SELECT_ONE_TYPE="select-one",t.SELECT_MULTIPLE_TYPE="select-multiple",t.SCROLLING_SPEED=4},789:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=t.DEFAULT_CLASSNAMES=void 0;var g=i(799);t.DEFAULT_CLASSNAMES={containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",selectedState:"is-selected",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},t.DEFAULT_CONFIG={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,addItemFilter:null,removeItems:!0,removeItemButton:!1,editItems:!1,allowHTML:!0,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:g.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(e){return'Press Enter to add <b>"'.concat((0,g.sanitise)(e),'"</b>')},maxItemText:function(e){return"Only ".concat(e," values can be added")},valueComparer:function(e,t){return e===t},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:t.DEFAULT_CLASSNAMES}},18:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},978:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},948:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},359:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},285:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},533:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},187:function(e,t,i){var g=this&&this.__createBinding||(Object.create?function(e,t,i,g){void 0===g&&(g=i),Object.defineProperty(e,g,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,g){void 0===g&&(g=i),e[g]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||g(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(18),t),n(i(978),t),n(i(948),t),n(i(359),t),n(i(285),t),n(i(533),t),n(i(287),t),n(i(132),t),n(i(837),t),n(i(598),t),n(i(369),t),n(i(37),t),n(i(47),t),n(i(923),t),n(i(876),t)},287:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},132:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},837:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},598:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},37:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},369:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},47:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},923:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},876:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},799:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.diff=t.cloneObject=t.existsInArray=t.dispatchEvent=t.sortByScore=t.sortByAlpha=t.strToEl=t.sanitise=t.isScrolledIntoView=t.getAdjacentEl=t.wrap=t.isType=t.getType=t.generateId=t.generateChars=t.getRandomNumber=void 0,t.getRandomNumber=function(e,t){return Math.floor(Math.random()*(t-e)+e)},t.generateChars=function(e){return Array.from({length:e},(function(){return(0,t.getRandomNumber)(0,36).toString(36)})).join("")},t.generateId=function(e,i){var g=e.id||e.name&&"".concat(e.name,"-").concat((0,t.generateChars)(2))||(0,t.generateChars)(4);return g=g.replace(/(:|\.|\[|\]|,)/g,""),g="".concat(i,"-").concat(g)},t.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1)},t.isType=function(e,i){return null!=i&&(0,t.getType)(i)===e},t.wrap=function(e,t){return void 0===t&&(t=document.createElement("div")),e.parentNode&&(e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)),t.appendChild(e)},t.getAdjacentEl=function(e,t,i){void 0===i&&(i=1);for(var g="".concat(i>0?"next":"previous","ElementSibling"),n=e[g];n;){if(n.matches(t))return n;n=n[g]}return n},t.isScrolledIntoView=function(e,t,i){return void 0===i&&(i=1),!!e&&(i>0?t.scrollTop+t.offsetHeight>=e.offsetTop+e.offsetHeight:e.offsetTop>=t.scrollTop)},t.sanitise=function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},t.strToEl=(i=document.createElement("div"),function(e){var t=e.trim();i.innerHTML=t;for(var g=i.children[0];i.firstChild;)i.removeChild(i.firstChild);return g}),t.sortByAlpha=function(e,t){var i=e.value,g=e.label,n=void 0===g?i:g,I=t.value,o=t.label,C=void 0===o?I:o;return n.localeCompare(C,[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},t.sortByScore=function(e,t){var i=e.score,g=void 0===i?0:i,n=t.score;return g-(void 0===n?0:n)},t.dispatchEvent=function(e,t,i){void 0===i&&(i=null);var g=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0});return e.dispatchEvent(g)},t.existsInArray=function(e,t,i){return void 0===i&&(i="value"),e.some((function(e){return"string"==typeof t?e[i]===t.trim():e[i]===t}))},t.cloneObject=function(e){return JSON.parse(JSON.stringify(e))},t.diff=function(e,t){var i=Object.keys(e).sort(),g=Object.keys(t).sort();return i.filter((function(e){return g.indexOf(e)<0}))}},273:function(e,t){var i=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var g,n=0,I=t.length;n<I;n++)!g&&n in t||(g||(g=Array.prototype.slice.call(t,0,n)),g[n]=t[n]);return e.concat(g||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState=void 0,t.defaultState=[],t.default=function(e,g){switch(void 0===e&&(e=t.defaultState),void 0===g&&(g={}),g.type){case"ADD_CHOICE":var n=g,I={id:n.id,elementId:n.elementId,groupId:n.groupId,value:n.value,label:n.label||n.value,disabled:n.disabled||!1,selected:!1,active:!0,score:9999,customProperties:n.customProperties,placeholder:n.placeholder||!1};return i(i([],e,!0),[I],!1);case"ADD_ITEM":var o=g;return o.choiceId>-1?e.map((function(e){var t=e;return t.id===parseInt("".concat(o.choiceId),10)&&(t.selected=!0),t})):e;case"REMOVE_ITEM":var C=g;return C.choiceId&&C.choiceId>-1?e.map((function(e){var t=e;return t.id===parseInt("".concat(C.choiceId),10)&&(t.selected=!1),t})):e;case"FILTER_CHOICES":var r=g;return e.map((function(e){var t=e;return t.active=r.results.some((function(e){var i=e.item,g=e.score;return i.id===t.id&&(t.score=g,!0)})),t}));case"ACTIVATE_CHOICES":var a=g;return e.map((function(e){var t=e;return t.active=a.active,t}));case"CLEAR_CHOICES":return t.defaultState;default:return e}}},871:function(e,t){var i=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var g,n=0,I=t.length;n<I;n++)!g&&n in t||(g||(g=Array.prototype.slice.call(t,0,n)),g[n]=t[n]);return e.concat(g||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState=void 0,t.defaultState=[],t.default=function(e,g){switch(void 0===e&&(e=t.defaultState),void 0===g&&(g={}),g.type){case"ADD_GROUP":var n=g;return i(i([],e,!0),[{id:n.id,value:n.value,active:n.active,disabled:n.disabled}],!1);case"CLEAR_CHOICES":return[];default:return e}}},655:function(e,t,i){var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState=void 0;var n=i(857),I=g(i(52)),o=g(i(871)),C=g(i(273)),r=g(i(502)),a=i(799);t.defaultState={groups:[],items:[],choices:[],loading:!1};var s=(0,n.combineReducers)({items:I.default,groups:o.default,choices:C.default,loading:r.default});t.default=function(e,i){var g=e;if("CLEAR_ALL"===i.type)g=t.defaultState;else if("RESET_TO"===i.type)return(0,a.cloneObject)(i.state);return s(g,i)}},52:function(e,t){var i=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var g,n=0,I=t.length;n<I;n++)!g&&n in t||(g||(g=Array.prototype.slice.call(t,0,n)),g[n]=t[n]);return e.concat(g||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState=void 0,t.defaultState=[],t.default=function(e,g){switch(void 0===e&&(e=t.defaultState),void 0===g&&(g={}),g.type){case"ADD_ITEM":var n=g;return i(i([],e,!0),[{id:n.id,choiceId:n.choiceId,groupId:n.groupId,value:n.value,label:n.label,active:!0,highlighted:!1,customProperties:n.customProperties,placeholder:n.placeholder||!1,keyCode:null}],!1).map((function(e){var t=e;return t.highlighted=!1,t}));case"REMOVE_ITEM":return e.map((function(e){var t=e;return t.id===g.id&&(t.active=!1),t}));case"HIGHLIGHT_ITEM":var I=g;return e.map((function(e){var t=e;return t.id===I.id&&(t.highlighted=I.highlighted),t}));default:return e}}},502:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState=void 0,t.defaultState=!1,t.default=function(e,i){switch(void 0===e&&(e=t.defaultState),void 0===i&&(i={}),i.type){case"SET_IS_LOADING":return i.isLoading;default:return e}}},744:function(e,t,i){var g=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var g,n=0,I=t.length;n<I;n++)!g&&n in t||(g||(g=Array.prototype.slice.call(t,0,n)),g[n]=t[n]);return e.concat(g||Array.prototype.slice.call(t))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var I=i(857),o=n(i(655)),C=function(){function e(){this._store=(0,I.createStore)(o.default,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}return e.prototype.subscribe=function(e){this._store.subscribe(e)},e.prototype.dispatch=function(e){this._store.dispatch(e)},Object.defineProperty(e.prototype,"state",{get:function(){return this._store.getState()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeItems",{get:function(){return this.items.filter((function(e){return!0===e.active}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlightedActiveItems",{get:function(){return this.items.filter((function(e){return e.active&&e.highlighted}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeChoices",{get:function(){return this.choices.filter((function(e){return!0===e.active}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectableChoices",{get:function(){return this.choices.filter((function(e){return!0!==e.disabled}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchableChoices",{get:function(){return this.selectableChoices.filter((function(e){return!0!==e.placeholder}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"placeholderChoice",{get:function(){return g([],this.choices,!0).reverse().find((function(e){return!0===e.placeholder}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeGroups",{get:function(){var e=this.groups,t=this.choices;return e.filter((function(e){var i=!0===e.active&&!1===e.disabled,g=t.some((function(e){return!0===e.active&&!1===e.disabled}));return i&&g}),[])},enumerable:!1,configurable:!0}),e.prototype.isLoading=function(){return this.state.loading},e.prototype.getChoiceById=function(e){return this.activeChoices.find((function(t){return t.id===parseInt(e,10)}))},e.prototype.getGroupById=function(e){return this.groups.find((function(t){return t.id===e}))},e}();t.default=C},686:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i={containerOuter:function(e,t,i,g,n,I,o){var C=e.classNames.containerOuter,r=Object.assign(document.createElement("div"),{className:C});return r.dataset.type=I,t&&(r.dir=t),g&&(r.tabIndex=0),i&&(r.setAttribute("role",n?"combobox":"listbox"),n&&r.setAttribute("aria-autocomplete","list")),r.setAttribute("aria-haspopup","true"),r.setAttribute("aria-expanded","false"),o&&r.setAttribute("aria-labeledby",o),r},containerInner:function(e){var t=e.classNames.containerInner;return Object.assign(document.createElement("div"),{className:t})},itemList:function(e,t){var i=e.classNames,g=i.list,n=i.listSingle,I=i.listItems;return Object.assign(document.createElement("div"),{className:"".concat(g," ").concat(t?n:I)})},placeholder:function(e,t){var i,g=e.allowHTML,n=e.classNames.placeholder;return Object.assign(document.createElement("div"),((i={className:n})[g?"innerHTML":"innerText"]=t,i))},item:function(e,t,i){var g,n,I=e.allowHTML,o=e.classNames,C=o.item,r=o.button,a=o.highlightedState,s=o.itemSelectable,A=o.placeholder,c=t.id,l=t.value,u=t.label,d=t.customProperties,h=t.active,m=t.disabled,p=t.highlighted,b=t.placeholder,f=Object.assign(document.createElement("div"),((g={className:C})[I?"innerHTML":"innerText"]=u,g));if(Object.assign(f.dataset,{item:"",id:c,value:l,customProperties:d}),h&&f.setAttribute("aria-selected","true"),m&&f.setAttribute("aria-disabled","true"),b&&f.classList.add(A),f.classList.add(p?a:s),i){m&&f.classList.remove(s),f.dataset.deletable="";var y=Object.assign(document.createElement("button"),((n={type:"button",className:r})[I?"innerHTML":"innerText"]="Remove item",n));y.setAttribute("aria-label","".concat("Remove item",": '").concat(l,"'")),y.dataset.button="",f.appendChild(y)}return f},choiceList:function(e,t){var i=e.classNames.list,g=Object.assign(document.createElement("div"),{className:i});return t||g.setAttribute("aria-multiselectable","true"),g.setAttribute("role","listbox"),g},choiceGroup:function(e,t){var i,g=e.allowHTML,n=e.classNames,I=n.group,o=n.groupHeading,C=n.itemDisabled,r=t.id,a=t.value,s=t.disabled,A=Object.assign(document.createElement("div"),{className:"".concat(I," ").concat(s?C:"")});return A.setAttribute("role","group"),Object.assign(A.dataset,{group:"",id:r,value:a}),s&&A.setAttribute("aria-disabled","true"),A.appendChild(Object.assign(document.createElement("div"),((i={className:o})[g?"innerHTML":"innerText"]=a,i))),A},choice:function(e,t,i){var g,n=e.allowHTML,I=e.classNames,o=I.item,C=I.itemChoice,r=I.itemSelectable,a=I.selectedState,s=I.itemDisabled,A=I.placeholder,c=t.id,l=t.value,u=t.label,d=t.groupId,h=t.elementId,m=t.disabled,p=t.selected,b=t.placeholder,f=Object.assign(document.createElement("div"),((g={id:h})[n?"innerHTML":"innerText"]=u,g.className="".concat(o," ").concat(C),g));return p&&f.classList.add(a),b&&f.classList.add(A),f.setAttribute("role",d&&d>0?"treeitem":"option"),Object.assign(f.dataset,{choice:"",id:c,value:l,selectText:i}),m?(f.classList.add(s),f.dataset.choiceDisabled="",f.setAttribute("aria-disabled","true")):(f.classList.add(r),f.dataset.choiceSelectable=""),f},input:function(e,t){var i=e.classNames,g=i.input,n=i.inputCloned,I=Object.assign(document.createElement("input"),{type:"search",name:"search_terms",className:"".concat(g," ").concat(n),autocomplete:"off",autocapitalize:"off",spellcheck:!1});return I.setAttribute("role","textbox"),I.setAttribute("aria-autocomplete","list"),I.setAttribute("aria-label",t),I},dropdown:function(e){var t=e.classNames,i=t.list,g=t.listDropdown,n=document.createElement("div");return n.classList.add(i,g),n.setAttribute("aria-expanded","false"),n},notice:function(e,t,i){var g,n=e.allowHTML,I=e.classNames,o=I.item,C=I.itemChoice,r=I.noResults,a=I.noChoices;void 0===i&&(i="");var s=[o,C];return"no-choices"===i?s.push(a):"no-results"===i&&s.push(r),Object.assign(document.createElement("div"),((g={})[n?"innerHTML":"innerText"]=t,g.className=s.join(" "),g))},option:function(e){var t=e.label,i=e.value,g=e.customProperties,n=e.active,I=e.disabled,o=new Option(t,i,!1,n);return g&&(o.dataset.customProperties="".concat(g)),o.disabled=!!I,o}};t.default=i},996:function(e){var t=function(e){return function(e){return!!e&&"object"===b(e)}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function g(e,t){return!1!==t.clone&&t.isMergeableObject(e)?r((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function n(e,t,i){return e.concat(t).map((function(e){return g(e,i)}))}function I(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function C(e,t,i){var n={};return i.isMergeableObject(e)&&I(e).forEach((function(t){n[t]=g(e[t],i)})),I(t).forEach((function(I){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,I)||(o(e,I)&&i.isMergeableObject(t[I])?n[I]=function(e,t){if(!t.customMerge)return r;var i=t.customMerge(e);return"function"==typeof i?i:r}(I,i)(e[I],t[I],i):n[I]=g(t[I],i))})),n}function r(e,i,I){(I=I||{}).arrayMerge=I.arrayMerge||n,I.isMergeableObject=I.isMergeableObject||t,I.cloneUnlessOtherwiseSpecified=g;var o=Array.isArray(i);return o===Array.isArray(e)?o?I.arrayMerge(e,i,I):C(e,i,I):g(i,I)}r.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return r(e,i,t)}),{})};var a=r;e.exports=a},221:function(e,t,i){function g(e){return Array.isArray?Array.isArray(e):"[object Array]"===l(e)}function n(e){return"string"==typeof e}function I(e){return"number"==typeof e}function C(e){return!0===e||!1===e||function(e){return a(e)&&null!==e}(e)&&"[object Boolean]"==l(e)}function a(e){return"object"===b(e)}function s(e){return null!=e}function c(e){return!e.trim().length}function l(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}i.r(t),i.d(t,{default:function(){return le}});var m=function(e){return"Invalid value for key ".concat(e)},f=function(e){return"Pattern length exceeds max of ".concat(e,".")},y=Object.prototype.hasOwnProperty,v=function(){function e(t){var i=this;h(this,e),this._keys=[],this._keyMap={};var g=0;t.forEach((function(e){var t=G(e);g+=t.weight,i._keys.push(t),i._keyMap[t.id]=t,g+=t.weight})),this._keys.forEach((function(e){e.weight/=g}))}return p(e,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),e}();function G(e){var t=null,i=null,I=null,o=1;if(n(e)||g(e))I=e,t=Z(e),i=B(e);else{if(!y.call(e,"name"))throw new Error(function(e){return"Missing ".concat(e," property in key")}("name"));var C=e.name;if(I=C,y.call(e,"weight")&&(o=e.weight)<=0)throw new Error(function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")}(C));t=Z(C),i=B(C)}return{path:t,id:i,weight:o,src:I}}function Z(e){return g(e)?e:e.split(".")}function B(e){return g(e)?e.join("."):e}var S={useExtendedSearch:!1,getFn:function(e,t){var i=[],o=!1;return function e(t,r,a){if(s(t))if(r[a]){var A=t[r[a]];if(!s(A))return;if(a===r.length-1&&(n(A)||I(A)||C(A)))i.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(A));else if(g(A)){o=!0;for(var c=0,l=A.length;c<l;c+=1)e(A[c],r,a+1)}else r.length&&e(A,r,a+1)}else i.push(t)}(e,n(t)?t.split("."):t,0),o?i:i[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},w=u(u(u(u({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),S),W=/[^ ]+/g;function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=new Map,g=Math.pow(10,t);return{get:function(t){var n=t.match(W).length;if(i.has(n))return i.get(n);var I=1/Math.pow(n,.5*e),o=parseFloat(Math.round(I*g)/g);return i.set(n,o),o},clear:function(){i.clear()}}}var Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.getFn,g=void 0===i?w.getFn:i,n=t.fieldNormWeight,I=void 0===n?w.fieldNormWeight:n;h(this,e),this.norm=K(I,3),this.getFn=g,this.isCreated=!1,this.setIndexRecords()}return p(e,[{key:"setSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}},{key:"setIndexRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}},{key:"setKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=t,this._keysMap={},t.forEach((function(t,i){e._keysMap[t.id]=i}))}},{key:"create",value:function(){var e=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,n(this.docs[0])?this.docs.forEach((function(t,i){e._addString(t,i)})):this.docs.forEach((function(t,i){e._addObject(t,i)})),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();n(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,i=this.size();t<i;t+=1)this.records[t].i-=1}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){if(s(e)&&!c(e)){var i={v:e,i:t,n:this.norm.get(e)};this.records.push(i)}}},{key:"_addObject",value:function(e,t){var i=this,I={i:t,$:{}};this.keys.forEach((function(t,o){var C=i.getFn(e,t.path);if(s(C))if(g(C))!function(){for(var e=[],t=[{nestedArrIndex:-1,value:C}];t.length;){var r=t.pop(),a=r.nestedArrIndex,A=r.value;if(s(A))if(n(A)&&!c(A)){var l={v:A,i:a,n:i.norm.get(A)};e.push(l)}else g(A)&&A.forEach((function(e,i){t.push({nestedArrIndex:i,value:e})}))}I.$[o]=e}();else if(!c(C)){var r={v:C,n:i.norm.get(C)};I.$[o]=r}})),this.records.push(I)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),e}();function V(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=i.getFn,n=void 0===g?w.getFn:g,I=i.fieldNormWeight,o=void 0===I?w.fieldNormWeight:I,C=new Y({getFn:n,fieldNormWeight:o});return C.setKeys(e.map(G)),C.setSources(t),C.create(),C}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.errors,g=void 0===i?0:i,n=t.currentLocation,I=void 0===n?0:n,o=t.expectedLocation,C=void 0===o?0:o,r=t.distance,a=void 0===r?w.distance:r,s=t.ignoreLocation,A=void 0===s?w.ignoreLocation:s,c=g/e.length;if(A)return c;var l=Math.abs(C-I);return a?c+l/a:l?1:c}function k(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.minMatchCharLength,i=[],g=-1,n=-1,I=0,o=e.length;I<o;I+=1){var C=e[I];C&&-1===g?g=I:C||-1===g||((n=I-1)-g+1>=t&&i.push([g,n]),g=-1)}return e[I-1]&&I-g>=t&&i.push([g,I-1]),i}function X(e){for(var t={},i=0,g=e.length;i<g;i+=1){var n=e.charAt(i);t[n]=(t[n]||0)|1<<g-i-1}return t}var H=function(){function e(t){var i=this,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g.location,I=void 0===n?w.location:n,o=g.threshold,C=void 0===o?w.threshold:o,r=g.distance,a=void 0===r?w.distance:r,s=g.includeMatches,A=void 0===s?w.includeMatches:s,c=g.findAllMatches,l=void 0===c?w.findAllMatches:c,u=g.minMatchCharLength,d=void 0===u?w.minMatchCharLength:u,m=g.isCaseSensitive,p=void 0===m?w.isCaseSensitive:m,b=g.ignoreLocation,f=void 0===b?w.ignoreLocation:b;if(h(this,e),this.options={location:I,threshold:C,distance:a,includeMatches:A,findAllMatches:l,minMatchCharLength:d,isCaseSensitive:p,ignoreLocation:f},this.pattern=p?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var y=function(e,t){i.chunks.push({pattern:e,alphabet:X(e),startIndex:t})},v=this.pattern.length;if(v>32){for(var G=0,Z=v%32,B=v-Z;G<B;)y(this.pattern.substr(G,32),G),G+=32;if(Z){var S=v-32;y(this.pattern.substr(S),S)}}else y(this.pattern,0)}}return p(e,[{key:"searchIn",value:function(e){var t=this.options,i=t.isCaseSensitive,g=t.includeMatches;if(i||(e=e.toLowerCase()),this.pattern===e){var n={isMatch:!0,score:0};return g&&(n.indices=[[0,e.length-1]]),n}var I=this.options,o=I.location,C=I.distance,r=I.threshold,a=I.findAllMatches,s=I.minMatchCharLength,c=I.ignoreLocation,l=[],u=0,d=!1;this.chunks.forEach((function(t){var i=t.pattern,n=t.alphabet,I=t.startIndex,h=function(e,t,i){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=g.location,I=void 0===n?w.location:n,o=g.distance,C=void 0===o?w.distance:o,r=g.threshold,a=void 0===r?w.threshold:r,s=g.findAllMatches,A=void 0===s?w.findAllMatches:s,c=g.minMatchCharLength,l=void 0===c?w.minMatchCharLength:c,u=g.includeMatches,d=void 0===u?w.includeMatches:u,h=g.ignoreLocation,m=void 0===h?w.ignoreLocation:h;if(t.length>32)throw new Error(f(32));for(var p,b=t.length,y=e.length,v=Math.max(0,Math.min(I,y)),G=a,Z=v,B=l>1||d,S=B?Array(y):[];(p=e.indexOf(t,Z))>-1;){var W=R(t,{currentLocation:p,expectedLocation:v,distance:C,ignoreLocation:m});if(G=Math.min(W,G),Z=p+b,B)for(var K=0;K<b;)S[p+K]=1,K+=1}Z=-1;for(var Y=[],V=1,X=b+y,H=1<<b-1,L=0;L<b;L+=1){for(var E=0,N=X;E<N;){var F=R(t,{errors:L,currentLocation:v+N,expectedLocation:v,distance:C,ignoreLocation:m});F<=G?E=N:X=N,N=Math.floor((X-E)/2+E)}X=N;var _=Math.max(1,v-N+1),T=A?y:Math.min(v+N,y)+b,D=Array(T+2);D[T+1]=(1<<L)-1;for(var M=T;M>=_;M-=1){var O=M-1,P=i[e.charAt(O)];if(B&&(S[O]=+!!P),D[M]=(D[M+1]<<1|1)&P,L&&(D[M]|=(Y[M+1]|Y[M])<<1|1|Y[M+1]),D[M]&H&&(V=R(t,{errors:L,currentLocation:O,expectedLocation:v,distance:C,ignoreLocation:m}))<=G){if(G=V,(Z=O)<=v)break;_=Math.max(1,2*v-Z)}}var J=R(t,{errors:L+1,currentLocation:v,expectedLocation:v,distance:C,ignoreLocation:m});if(J>G)break;Y=D}var j={isMatch:Z>=0,score:Math.max(.001,V)};if(B){var x=k(S,l);x.length?d&&(j.indices=x):j.isMatch=!1}return j}(e,i,n,{location:o+I,distance:C,threshold:r,findAllMatches:a,minMatchCharLength:s,includeMatches:g,ignoreLocation:c}),m=h.isMatch,p=h.score,b=h.indices;m&&(d=!0),u+=p,m&&b&&(l=[].concat(A(l),A(b)))}));var h={isMatch:d,score:d?u/this.chunks.length:1};return d&&g&&(h.indices=l),h}}]),e}(),L=function(){function e(t){h(this,e),this.pattern=t}return p(e,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(e){return E(e,this.multiRegex)}},{key:"isSingleMatch",value:function(e){return E(e,this.singleRegex)}}]),e}();function E(e,t){var i=e.match(t);return i?i[1]:null}var N=function(e){o(i,e);var t=r(i);function i(e){return h(this,i),t.call(this,e)}return p(i,[{key:"search",value:function(e){var t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),i}(L),F=function(e){o(i,e);var t=r(i);function i(e){return h(this,i),t.call(this,e)}return p(i,[{key:"search",value:function(e){var t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),i}(L),_=function(e){o(i,e);var t=r(i);function i(e){return h(this,i),t.call(this,e)}return p(i,[{key:"search",value:function(e){var t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),i}(L),T=function(e){o(i,e);var t=r(i);function i(e){return h(this,i),t.call(this,e)}return p(i,[{key:"search",value:function(e){var t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),i}(L),D=function(e){o(i,e);var t=r(i);function i(e){return h(this,i),t.call(this,e)}return p(i,[{key:"search",value:function(e){var t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),i}(L),M=function(e){o(i,e);var t=r(i);function i(e){return h(this,i),t.call(this,e)}return p(i,[{key:"search",value:function(e){var t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),i}(L),O=function(e){o(i,e);var t=r(i);function i(e){var g,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=n.location,o=void 0===I?w.location:I,C=n.threshold,r=void 0===C?w.threshold:C,a=n.distance,s=void 0===a?w.distance:a,A=n.includeMatches,c=void 0===A?w.includeMatches:A,l=n.findAllMatches,u=void 0===l?w.findAllMatches:l,d=n.minMatchCharLength,m=void 0===d?w.minMatchCharLength:d,p=n.isCaseSensitive,b=void 0===p?w.isCaseSensitive:p,f=n.ignoreLocation,y=void 0===f?w.ignoreLocation:f;return h(this,i),(g=t.call(this,e))._bitapSearch=new H(e,{location:o,threshold:r,distance:s,includeMatches:c,findAllMatches:u,minMatchCharLength:m,isCaseSensitive:b,ignoreLocation:y}),g}return p(i,[{key:"search",value:function(e){return this._bitapSearch.searchIn(e)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),i}(L),P=function(e){o(i,e);var t=r(i);function i(e){return h(this,i),t.call(this,e)}return p(i,[{key:"search",value:function(e){for(var t,i=0,g=[],n=this.pattern.length;(t=e.indexOf(this.pattern,i))>-1;)i=t+n,g.push([t,i-1]);var I=!!g.length;return{isMatch:I,score:I?0:1,indices:g}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),i}(L),J=[N,P,_,T,M,D,F,O],j=J.length,x=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((function(e){for(var i=e.trim().split(x).filter((function(e){return e&&!!e.trim()})),g=[],n=0,I=i.length;n<I;n+=1){for(var o=i[n],C=!1,r=-1;!C&&++r<j;){var a=J[r],s=a.isMultiMatch(o);s&&(g.push(new a(s,t)),C=!0)}if(!C)for(r=-1;++r<j;){var A=J[r],c=A.isSingleMatch(o);if(c){g.push(new A(c,t));break}}}return g}))}var z=new Set([O.type,P.type]),Q=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=i.isCaseSensitive,n=void 0===g?w.isCaseSensitive:g,I=i.includeMatches,o=void 0===I?w.includeMatches:I,C=i.minMatchCharLength,r=void 0===C?w.minMatchCharLength:C,a=i.ignoreLocation,s=void 0===a?w.ignoreLocation:a,A=i.findAllMatches,c=void 0===A?w.findAllMatches:A,l=i.location,u=void 0===l?w.location:l,d=i.threshold,m=void 0===d?w.threshold:d,p=i.distance,b=void 0===p?w.distance:p;h(this,e),this.query=null,this.options={isCaseSensitive:n,includeMatches:o,minMatchCharLength:r,findAllMatches:c,ignoreLocation:s,location:u,threshold:m,distance:b},this.pattern=n?t:t.toLowerCase(),this.query=U(this.pattern,this.options)}return p(e,[{key:"searchIn",value:function(e){var t=this.query;if(!t)return{isMatch:!1,score:1};var i=this.options,g=i.includeMatches;e=i.isCaseSensitive?e:e.toLowerCase();for(var n=0,I=[],o=0,C=0,r=t.length;C<r;C+=1){var a=t[C];I.length=0,n=0;for(var s=0,c=a.length;s<c;s+=1){var l=a[s],u=l.search(e),d=u.isMatch,h=u.indices,m=u.score;if(!d){o=0,n=0,I.length=0;break}if(n+=1,o+=m,g){var p=l.constructor.type;z.has(p)?I=[].concat(A(I),A(h)):I.push(h)}}if(n){var b={isMatch:!0,score:o/n};return g&&(b.indices=I),b}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(e,t){return t.useExtendedSearch}}]),e}(),q=[];function $(e,t){for(var i=0,g=q.length;i<g;i+=1){var n=q[i];if(n.condition(e,t))return new n(e,t)}return new H(e,t)}var ee="$and",te="$or",ie="$path",ge="$val",ne=function(e){return!(!e[ee]&&!e[te])},Ie=function(e){return!!e[ie]},oe=function(e){return!g(e)&&a(e)&&!ne(e)},Ce=function(e){return d({},ee,Object.keys(e).map((function(t){return d({},t,e[t])})))};function re(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=i.auto,o=void 0===I||I,C=function e(i){var I=Object.keys(i),C=Ie(i);if(!C&&I.length>1&&!ne(i))return e(Ce(i));if(oe(i)){var r=C?i[ie]:I[0],a=C?i[ge]:i[r];if(!n(a))throw new Error(m(r));var s={keyId:B(r),pattern:a};return o&&(s.searcher=$(a,t)),s}var A={children:[],operator:I[0]};return I.forEach((function(t){var n=i[t];g(n)&&n.forEach((function(t){A.children.push(e(t))}))})),A};return ne(e)||(e=Ce(e)),C(e)}function ae(e,t){var i=t.ignoreFieldNorm,g=void 0===i?w.ignoreFieldNorm:i;e.forEach((function(e){var t=1;e.matches.forEach((function(e){var i=e.key,n=e.norm,I=e.score,o=i?i.weight:null;t*=Math.pow(0===I&&o?Number.EPSILON:I,(o||1)*(g?1:n))})),e.score=t}))}function se(e,t){var i=e.matches;t.matches=[],s(i)&&i.forEach((function(e){if(s(e.indices)&&e.indices.length){var i={indices:e.indices,value:e.value};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}}))}function Ae(e,t){t.score=e.score}function ce(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=i.includeMatches,n=void 0===g?w.includeMatches:g,I=i.includeScore,o=void 0===I?w.includeScore:I,C=[];return n&&C.push(se),o&&C.push(Ae),e.map((function(e){var i=e.idx,g={item:t[i],refIndex:i};return C.length&&C.forEach((function(t){t(e,g)})),g}))}var le=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0;h(this,e),this.options=u(u({},w),i),this.options.useExtendedSearch,this._keyStore=new v(this.options.keys),this.setCollection(t,g)}return p(e,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof Y))throw new Error("Incorrect 'index' type");this._myIndex=t||V(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(e){s(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},t=[],i=0,g=this._docs.length;i<g;i+=1){var n=this._docs[i];e(n,i)&&(this.removeAt(i),i-=1,g-=1,t.push(n))}return t}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.limit,g=void 0===i?-1:i,o=this.options,C=o.includeMatches,r=o.includeScore,a=o.shouldSort,s=o.sortFn,A=o.ignoreFieldNorm,c=n(e)?n(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ae(c,{ignoreFieldNorm:A}),a&&c.sort(s),I(g)&&g>-1&&(c=c.slice(0,g)),ce(c,this._docs,{includeMatches:C,includeScore:r})}},{key:"_searchStringList",value:function(e){var t=$(e,this.options),i=this._myIndex.records,g=[];return i.forEach((function(e){var i=e.v,n=e.i,I=e.n;if(s(i)){var o=t.searchIn(i),C=o.isMatch,r=o.score,a=o.indices;C&&g.push({item:i,idx:n,matches:[{score:r,value:i,norm:I,indices:a}]})}})),g}},{key:"_searchLogical",value:function(e){var t=this,i=re(e,this.options),g=this._myIndex.records,n={},I=[];return g.forEach((function(e){var g=e.$,o=e.i;if(s(g)){var C=function e(i,g,n){if(!i.children){var I=i.keyId,o=i.searcher,C=t._findMatches({key:t._keyStore.get(I),value:t._myIndex.getValueForItemAtKeyId(g,I),searcher:o});return C&&C.length?[{idx:n,item:g,matches:C}]:[]}for(var r=[],a=0,s=i.children.length;a<s;a+=1){var c=e(i.children[a],g,n);if(c.length)r.push.apply(r,A(c));else if(i.operator===ee)return[]}return r}(i,g,o);C.length&&(n[o]||(n[o]={idx:o,item:g,matches:[]},I.push(n[o])),C.forEach((function(e){var t,i=e.matches;(t=n[o].matches).push.apply(t,A(i))})))}})),I}},{key:"_searchObjectList",value:function(e){var t=this,i=$(e,this.options),g=this._myIndex,n=g.keys,I=g.records,o=[];return I.forEach((function(e){var g=e.$,I=e.i;if(s(g)){var C=[];n.forEach((function(e,n){C.push.apply(C,A(t._findMatches({key:e,value:g[n],searcher:i})))})),C.length&&o.push({idx:I,item:g,matches:C})}})),o}},{key:"_findMatches",value:function(e){var t=e.key,i=e.value,n=e.searcher;if(!s(i))return[];var I=[];if(g(i))i.forEach((function(e){var i=e.v,g=e.i,o=e.n;if(s(i)){var C=n.searchIn(i),r=C.isMatch,a=C.score,A=C.indices;r&&I.push({score:a,key:t,value:i,idx:g,norm:o,indices:A})}}));else{var o=i.v,C=i.n,r=n.searchIn(o),a=r.isMatch,A=r.score,c=r.indices;a&&I.push({score:A,key:t,value:o,norm:C,indices:c})}return I}}]),e}();le.version="6.5.3",le.createIndex=V,le.parseIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.getFn,g=void 0===i?w.getFn:i,n=t.fieldNormWeight,I=void 0===n?w.fieldNormWeight:n,o=e.keys,C=e.records,r=new Y({getFn:g,fieldNormWeight:I});return r.setKeys(o),r.setIndexRecords(C),r},le.config=w,le.parseQuery=re,function(){q.push.apply(q,arguments)}(Q)},857:function(e,t,i){function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,g)}return i}function I(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}i.r(t),i.d(t,{__DO_NOT_USE__ActionTypes:function(){return a},applyMiddleware:function(){return h},bindActionCreators:function(){return u},combineReducers:function(){return c},compose:function(){return d},createStore:function(){return A}});var C="function"==typeof Symbol&&Symbol.observable||"@@observable",r=function(){return Math.random().toString(36).substring(7).split("").join(".")},a={INIT:"@@redux/INIT"+r(),REPLACE:"@@redux/REPLACE"+r(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+r()}};function s(e){if("object"!==b(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function A(e,t,i){var g;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(o(0));if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error(o(1));return i(A)(e,t)}if("function"!=typeof e)throw new Error(o(2));var n=e,I=t,r=[],c=r,l=!1;function u(){c===r&&(c=r.slice())}function d(){if(l)throw new Error(o(3));return I}function h(e){if("function"!=typeof e)throw new Error(o(4));if(l)throw new Error(o(5));var t=!0;return u(),c.push(e),function(){if(t){if(l)throw new Error(o(6));t=!1,u();var i=c.indexOf(e);c.splice(i,1),r=null}}}function m(e){if(!s(e))throw new Error(o(7));if(void 0===e.type)throw new Error(o(8));if(l)throw new Error(o(9));try{l=!0,I=n(I,e)}finally{l=!1}for(var t=r=c,i=0;i<t.length;i++)(0,t[i])();return e}function p(e){if("function"!=typeof e)throw new Error(o(10));n=e,m({type:a.REPLACE})}function f(){var e,t=h;return(e={subscribe:function(e){if("object"!==b(e)||null===e)throw new Error(o(11));function i(){e.next&&e.next(d())}return i(),{unsubscribe:t(i)}}})[C]=function(){return this},e}return m({type:a.INIT}),(g={dispatch:m,subscribe:h,getState:d,replaceReducer:p})[C]=f,g}function c(e){for(var t=Object.keys(e),i={},g=0;g<t.length;g++){var n=t[g];"function"==typeof e[n]&&(i[n]=e[n])}var I,C=Object.keys(i);try{!function(e){Object.keys(e).forEach((function(t){var i=e[t];if(void 0===i(void 0,{type:a.INIT}))throw new Error(o(12));if(void 0===i(void 0,{type:a.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(i)}catch(e){I=e}return function(e,t){if(void 0===e&&(e={}),I)throw I;for(var g=!1,n={},r=0;r<C.length;r++){var a=C[r],s=i[a],A=e[a],c=s(A,t);if(void 0===c)throw t&&t.type,new Error(o(14));n[a]=c,g=g||c!==A}return(g=g||C.length!==Object.keys(e).length)?n:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t){if("function"==typeof e)return l(e,t);if("object"!==b(e)||null===e)throw new Error(o(16));var i={};for(var g in e){var n=e[g];"function"==typeof n&&(i[g]=l(n,t))}return i}function d(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function h(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(){var i=e.apply(void 0,arguments),g=function(){throw new Error(o(15))},n={getState:i.getState,dispatch:function(){return g.apply(void 0,arguments)}},C=t.map((function(e){return e(n)}));return g=d.apply(void 0,C)(i.dispatch),I(I({},i),{},{dispatch:g})}}}}},t={};function i(g){var n=t[g];if(void 0!==n)return n.exports;var I=t[g]={exports:{}};return e[g].call(I.exports,I,I.exports,i),I.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var g in t)i.o(t,g)&&!i.o(e,g)&&Object.defineProperty(e,g,{enumerable:!0,get:t[g]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var g,n,I={};return g=i(373),n=i.n(g),i(187),i(883),i(789),i(686),I.default=n(),I=I.default}()},"object"===b(t)&&"object"===b(e)?e.exports=I():(g=[],void 0===(n="function"==typeof(i=I)?i.apply(t,g):i)||(e.exports=n))}).call(this,i(1)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var g=function(){return(g=Object.assign||function(e){for(var t,i=1,g=arguments.length;i<g;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=function(){function e(e,t,i){var n=this;this.endVal=t,this.options=i,this.version="2.1.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.count=function(e){n.startTime||(n.startTime=e);var t=e-n.startTime;n.remaining=n.duration-t,n.useEasing?n.countDown?n.frameVal=n.startVal-n.easingFn(t,0,n.startVal-n.endVal,n.duration):n.frameVal=n.easingFn(t,n.startVal,n.endVal-n.startVal,n.duration):n.countDown?n.frameVal=n.startVal-(n.startVal-n.endVal)*(t/n.duration):n.frameVal=n.startVal+(n.endVal-n.startVal)*(t/n.duration),n.countDown?n.frameVal=n.frameVal<n.endVal?n.endVal:n.frameVal:n.frameVal=n.frameVal>n.endVal?n.endVal:n.frameVal,n.frameVal=Number(n.frameVal.toFixed(n.options.decimalPlaces)),n.printValue(n.frameVal),t<n.duration?n.rAF=requestAnimationFrame(n.count):null!==n.finalEndVal?n.update(n.finalEndVal):n.callback&&n.callback()},this.formatNumber=function(e){var t,i,g,I,o=e<0?"-":"";t=Math.abs(e).toFixed(n.options.decimalPlaces);var C=(t+="").split(".");if(i=C[0],g=C.length>1?n.options.decimal+C[1]:"",n.options.useGrouping){I="";for(var r=0,a=i.length;r<a;++r)0!==r&&r%3==0&&(I=n.options.separator+I),I=i[a-r-1]+I;i=I}return n.options.numerals&&n.options.numerals.length&&(i=i.replace(/[0-9]/g,(function(e){return n.options.numerals[+e]})),g=g.replace(/[0-9]/g,(function(e){return n.options.numerals[+e]}))),o+n.options.prefix+i+g+n.options.suffix},this.easeOutExpo=function(e,t,i,g){return i*(1-Math.pow(2,-10*e/g))*1024/1023+t},this.options=g(g({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(t),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof e?document.getElementById(e):e,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",void 0!==window&&this.options.enableScrollSpy&&(this.error?console.error(this.error,e):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push((function(){return n.handleScroll(n)})),window.onscroll=function(){window.onScrollFns.forEach((function(e){return e()}))},this.handleScroll(this)))}return e.prototype.handleScroll=function(e){if(e&&window){var t=window.innerHeight+window.scrollY,i=e.el.offsetTop+e.el.offsetHeight;i<t&&i>window.scrollY&&e.paused?(e.paused=!1,setTimeout((function(){return e.start()}),e.options.scrollSpyDelay)):window.scrollY>i&&!e.paused&&e.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var t=e-this.startVal;if(Math.abs(t)>this.options.smartEasingThreshold){this.finalEndVal=e;var i=this.countDown?1:-1;this.endVal=e+i*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(e){this.error||(this.callback=e,this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal||this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(e){var t=this.formattingFn(e);"INPUT"===this.el.tagName?this.el.value=t:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=t:this.el.innerHTML=t},e.prototype.ensureNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.validateValue=function(e){var t=Number(e);return this.ensureNumber(t)?t:(this.error="[CountUp] invalid start or end value: "+e,null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e}()},function(e,t){!function(e,t){function i(e){var t=e+"=";if(document.cookie.length>0){var i=document.cookie.indexOf(t);if(-1!==i){i+=t.length;var g=document.cookie.indexOf(";",i);return-1===g&&(g=document.cookie.length),unescape(document.cookie.substring(i,g))}}}function g(e){if(0===e.indexOf("https://www.forrester.com/")){var t="www";return-1!==document.domain.indexOf("webdev")&&(t="webdev"),-1!==document.domain.indexOf("webstg")&&(t="webstg"),-1!==document.domain.indexOf("www.forrester.com")&&(t="www"),"https://".concat(t,".forrester.com").concat(e)}return e}function n(e){e.dynamicNav&&function(e,i){".js-".concat(i,"-nav");var n=document.createElement("ul");n.classList.add("menu");var I=document.createElement("ul");I.classList.add("menu"),e.forEach((function(e){var t=document.createElement("li");t.classList.add("menu-item");var i=document.createElement("a");if(i.href=e.href?e.href:"#",i.textContent=e.sectionTitle,"Me"==i.textContent&&(i.textContent="My Account"),t.appendChild(i),e.linkSections&&e.linkSections.length>0){t.classList.add("menu-item-has-children");var o=document.createElement("ul");o.classList.add("sub-menu"),e.linkSections.forEach((function(e){e.linkList&&e.linkList.length>0&&e.linkList.forEach((function(e){if(e.sectionTitle&&e.linkSections){var t=document.createElement("li");t.classList.add("menu-item"),t.classList.add("menu-item-has-children"),t.classList.add("menu-col");var i=document.createElement("a");i.textContent=e.sectionTitle,i.href="#";var n=document.createElement("ul");n.classList.add("sub-menu"),e.linkSections[0].linkList&&e.linkSections[0].linkList.forEach((function(e,t){var i=document.createElement("li");i.classList.add("menu-item");var I=document.createElement("a");I.textContent=e.text,I.href=e.href?g(e.href):"#",i.appendChild(I),n.appendChild(i)})),t.appendChild(i),t.appendChild(n),o.appendChild(t)}else{var I=document.createElement("li");I.classList.add("menu-item");var C=document.createElement("a");C.textContent=e.text,C.href=e.href?g(e.href):"#",I.appendChild(C),o.appendChild(I)}}))})),t.appendChild(o)}"Me"==e.sectionTitle?I.appendChild(t):n.appendChild(t)})),t(".js-dynamic-nav").empty().append(I),t(".js-static-nav").empty().append(n)}(e.dynamicNav.sections,"dynamic"),t(".js-logged-out").remove(),t(".js-logged-out-nav").remove()}e.init=function(){var e;if(-1!==document.domain.indexOf("webdev")?e=i("webdev._token.auth0"):-1!==document.domain.indexOf("webtest")?e=i("webtest._token.auth0"):-1!==document.domain.indexOf("webstg")?e=i("webstg._token.auth0"):-1!==document.domain.indexOf("www.forrester.com")&&(e=i("www._token.auth0")),e&&"false"!=e){if(t("body").hasClass("event-microsite-template-default")||t("body").hasClass("page-template-template-tunnel")||t("body").hasClass("single-brand")||t("body").hasClass("event-speaker-template-default"))t(".js-site-footer").remove();else{var g=e;if(g){var I={};e?I.Authorization=g:I.ForresterAuth=g,I.apiKey=forr.nav_api_key,t.ajax({url:forr.nav_api,headers:I,type:"GET",success:function(e){console.log("api call success"),n(e)},error:function(e){console.warn("Error retrieving JSON menu (using default): ",e),t(".js-logged-in-nav").remove()}}),t(".js-logged-in").show()}else t(".js-logged-in").remove(),t(".js-logged-in-nav").remove();t(".js-logged-out").remove(),t(".js-logged-in").show(),t(".js-site-footer").remove()}t(".show-anon").remove(),t(".show-auth").show()}else t(".js-site-header-gs").remove(),t(".js-site-footer-gs").remove(),t(".js-logged-in").remove(),t(".js-logged-in-nav").remove(),t(".show-anon").show(),t(".show-auth").remove();t(window).on("scroll",(function(e){t(window).scrollTop()>100?(t(".js-site-header").addClass("is-scrolled"),t(".js-notification-bar").addClass("is-scrolled")):(t(".js-site-header").removeClass("is-scrolled"),t(".js-notification-bar").removeClass("is-scrolled"))})).trigger("scroll"),t(".site-nav-mobile .menu-item.menu-item-has-children > a").after("<span class='sub-menu-expand js-sub-menu-expand'></span>"),t("body").on("click",".js-sub-menu-expand",(function(e){e.preventDefault(),t(e.currentTarget).parent(".menu-item").toggleClass("is-open"),t(e.currentTarget).next("ul.sub-menu").slideToggle()})),t("body").on("click",".site-nav-mobile .menu-item > a[href='#']",(function(e){e.preventDefault(),t(this).next(".js-sub-menu-expand").trigger("click")})),t(".js-header-search-input").on("focus",(function(e){t(".js-header-search").addClass("is-open")})),t(".js-header-search-input").on("blur",(function(e){t(".js-header-search").removeClass("is-open")})),t(".js-header-search-clear").on("click",(function(e){e.preventDefault(),t(".js-header-search-input").val("")}));var o=i("cartItemsCount");o&&o>0?t(".js-cart").show():t(".js-cart").remove(),t(".lr-link").each((function(e,i){var g=-1===document.domain.indexOf("go")?"":-1!==document.domain.indexOf("webdev")?"webdev":-1!==document.domain.indexOf("webtest")?"webtest":-1!==document.domain.indexOf("webstg")?"webstg":-1!==document.domain.indexOf("www.forrester.com")?"www":"";g&&t(i).attr("href","https://".concat(g,".forrester.com").concat(t(i).attr("href")))})),t("#feedback-modal-iframe").attr("src","https://vsb.feedbacknow.com/#/51For3CD826A"),t("#feedback-link").on("click",(function(e){e.preventDefault(),t("#feedback-modal").css("display","flex"),t("#feedback-modal").css("opacity","1")})),t("#feedback-modal-close").on("click",(function(e){e.preventDefault(),t("#feedback-modal").css("display","none"),t("#feedback-modal").css("opacity","0")}))},t(document).ready((function(){e.init()}))}(window.FORRNAV=window.FORRNAV||{},jQuery)},function(e,t){!function(e,t){e.init=function(){var e=t(".js-scroll-fx"),i=t(window);i.on("scroll resize",(function(){var g=i.scrollTop(),n=g+i.height();t.each(e,(function(){var e=t(this),i=e.offset().top;i+e.outerHeight()>=g&&i<=n?e.addClass("in-view"):e.removeClass("in-view")}))})),i.trigger("scroll")},t(document).ready((function(){e.init()}))}(window.FORRSCROLLFX=window.FORRSCROLLFX||{},jQuery)},function(module,exports){!function(FORRELOQUA,$){function addHiddenInput(e,t,i){t.type="hidden",t.name=i.name,t.value=i.value,e.appendChild(t)}function submitEloquaForm(e){return setTimeout((function(){if(e&&document.querySelector){var t=e.querySelector("input[type=submit]");if(t){t.disabled=!0;var i=document.createElement("form"),g={},n=$(e);n&&0!=n.length||(n=$("#form2069"));for(var I=0;I<n[0].length-1;I++){var o=document.createElement("input"),C=n[0][I];"checkbox"===C.type?(o.type="hidden",o.name="optin",o.value=C.checked?"on":"off",i.appendChild(o)):"email"===C.name?(addHiddenInput(i,o,C),g.email=C.value):"formsource"===C.name?(g.visited=C.value,addHiddenInput(i,o,C)):"notes"===C.name?(g.notes=C.value,addHiddenInput(i,o,C)):"submit"===C.type||addHiddenInput(i,o,C)}var r={};window.location.search.substr(1).split("&").forEach((function(e){r[e.split("=")[0]]=e.split("=")[1]}));if(r.utm_source){var a=document.createElement("input");a.type="hidden",a.name="utm_source",a.value=r.utm_source,i.appendChild(a)}if(r.utm_medium){var s=document.createElement("input");s.type="hidden",s.name="utm_medium",s.value=r.utm_medium,i.appendChild(s)}if(r.utm_campaign){var A=document.createElement("input");A.type="hidden",A.name="utm_campaign",A.value=r.utm_campaign,i.appendChild(A)}if(r.utm_term){var c=document.createElement("input");c.type="hidden",c.name="utm_term",c.value=r.utm_term,i.appendChild(c)}if(r.utm_content){var l=document.createElement("input");l.type="hidden",l.name="utm_content",l.value=r.utm_content,i.appendChild(l)}var u=document.createElement("input");u.type="hidden",u.name="uniquecode",u.value=g.email+"-"+Date.now(),i.appendChild(u);var d=$(i).serialize();$.ajax({url:forr.ajaxurl,type:"POST",data:"action=eloqua&".concat(d)}),"cx_widget"==n[0].dataset.behavior?CXWIDGET.lookup():"redirect"==n[0].dataset.behavior?window.location.replace(n[0].dataset.redirecturl):($(".js-eloqua-form").hide(),$(".js-eloqua-alternate").hide(),$(".js-eloqua-confirm").show(),window.scroll(0,document.querySelector(".eloqua-form").parentElement.offsetTop)),"subscribe"!==n[0].dataset.type&&"subscribe-article"!==n[0].dataset.type||"function"!=typeof ga?console.log("No GA"):(ga("send","event","Newsletter Subscription","Submit",window.location.href),console.log("Subscribed"))}}}),100),!0}FORRELOQUA.init=function(){$(".js-eloqua-company-name").on("blur",(function(e){var t=$(this);setTimeout((function(){""!==t.val()&&""==$("#companyAddressField").val()&&($(".js-eloqua-company-address").slideDown(),"US"==$("#countryField").val()||"CA"==$("#countryField").val()||"AU"==$("#countryField").val()?$(".forr-form__state").show():$(".forr-form__state").hide())}),500)}));var AU=[{abbreviation:"ACT",name:"Australian Capital Territory"},{abbreviation:"NSW",name:"New South Wales"},{abbreviation:"NT",name:"Northern Territory"},{abbreviation:"QLD",name:"Queensland"},{abbreviation:"SA",name:"South Australia"},{abbreviation:"TAS",name:"Tasmania"},{abbreviation:"VIC",name:"Victoria"},{abbreviation:"WA",name:"Western Australia"}],CA=[{abbreviation:"AB",name:"Alberta"},{abbreviation:"BC",name:"British Columbia"},{abbreviation:"MB",name:"Manitoba"},{abbreviation:"NB",name:"New Brunswick"},{abbreviation:"NL",name:"Newfoundland and Labrador"},{abbreviation:"NT",name:"Northwest Territories"},{abbreviation:"NS",name:"Nova Scotia"},{abbreviation:"NU",name:"Nunavut"},{abbreviation:"ON",name:"Ontario"},{abbreviation:"PE",name:"Prince Edward Island"},{abbreviation:"QC",name:"Quebec"},{abbreviation:"SK",name:"Saskatchewan"},{abbreviation:"YT",name:"Yukon Territory"}],US=[{abbreviation:"AL",name:"Alabama"},{abbreviation:"AK",name:"Alaska"},{abbreviation:"AZ",name:"Arizona"},{abbreviation:"AR",name:"Arkansas"},{abbreviation:"CA",name:"California"},{abbreviation:"CO",name:"Colorado"},{abbreviation:"CT",name:"Connecticut"},{abbreviation:"DE",name:"Delaware"},{abbreviation:"DC",name:"District of Columbia"},{abbreviation:"FL",name:"Florida"},{abbreviation:"GA",name:"Georgia"},{abbreviation:"HI",name:"Hawaii"},{abbreviation:"ID",name:"Idaho"},{abbreviation:"IL",name:"Illinois"},{abbreviation:"IN",name:"Indiana"},{abbreviation:"IA",name:"Iowa"},{abbreviation:"KS",name:"Kansas"},{abbreviation:"KY",name:"Kentucky"},{abbreviation:"LA",name:"Louisiana"},{abbreviation:"ME",name:"Maine"},{abbreviation:"MD",name:"Maryland"},{abbreviation:"MA",name:"Massachusetts"},{abbreviation:"MI",name:"Michigan"},{abbreviation:"MN",name:"Minnesota"},{abbreviation:"MS",name:"Mississippi"},{abbreviation:"MO",name:"Missouri"},{abbreviation:"MT",name:"Montana"},{abbreviation:"NE",name:"Nebraska"},{abbreviation:"NV",name:"Nevada"},{abbreviation:"NH",name:"New Hampshire"},{abbreviation:"NJ",name:"New Jersey"},{abbreviation:"NM",name:"New Mexico"},{abbreviation:"NY",name:"New York"},{abbreviation:"NC",name:"North Carolina"},{abbreviation:"ND",name:"North Dakota"},{abbreviation:"OH",name:"Ohio"},{abbreviation:"OK",name:"Oklahoma"},{abbreviation:"OR",name:"Oregon"},{abbreviation:"PA",name:"Pennsylvania"},{abbreviation:"RI",name:"Rhode Island"},{abbreviation:"SC",name:"South Carolina"},{abbreviation:"SD",name:"South Dakota"},{abbreviation:"TN",name:"Tennessee"},{abbreviation:"TX",name:"Texas"},{abbreviation:"UT",name:"Utah"},{abbreviation:"VT",name:"Vermont"},{abbreviation:"VA",name:"Virginia"},{abbreviation:"WA",name:"Washington"},{abbreviation:"WV",name:"West Virginia"},{abbreviation:"WI",name:"Wisconsin"},{abbreviation:"WY",name:"Wyoming"},{abbreviation:"AS",name:"American Samoa"},{abbreviation:"GU",name:"Guam Gu"},{abbreviation:"MP",name:"Northern Mariana Islands"},{abbreviation:"PR",name:"Puerto Rico"},{abbreviation:"VI",name:"Virgin Islands"},{abbreviation:"AE",name:"Armed Forces Africa"},{abbreviation:"AA",name:"Armed Forces Americas"},{abbreviation:"AE",name:"Armed Forces Canada"},{abbreviation:"AE",name:"Armed Forces Europe"},{abbreviation:"AE",name:"Armed Forces Middle East"},{abbreviation:"AP",name:"Armed Forces Pacific"}];$("#countryField").on("change",(function(e){var $name=$(this);if("US"==$name.val()||"CA"==$name.val()||"AU"==$name.val()){$("#stateField").find("option").not(":first").remove(),$("#stateField").val($("#stateField option:first").val());for(var i=0;i<eval($name.val()).length;i++){var option=$('<option value="'+eval($name.val())[i].abbreviation+'">'+eval($name.val())[i].name+"</option>");$("#stateField").append(option),$(".forr-form__state").show()}}else $(".forr-form__state").hide()})),$(".js-message-field").on("keyup",(function(e){var t=this.value.length;$(".js-message-field-chars").html(t),t>=500?$(".js-message-field-limiter").addClass("is-over-limit"):$(".js-message-field-limiter").removeClass("is-over-limit")}));var errMsg={firstname:"First Name is a required field",lastname:"Last Name is a required field",email:{required:"Business email is a required field",email:"A valid business email address is required"},businessphone:"Business Phone is a required field",jobtitle:"Job Title is a required field",companyname:"Company Name is a required field",country:"Country is a required field",industry:"Industry is a required field"};"fr-FR"==document.documentElement.lang&&(errMsg={firstname:"Ce champ est obligatoire",lastname:"Ce champ est obligatoire",email:{required:"Ce champ est obligatoire",email:"Ce champ est obligatoire"},businessphone:"Ce champ est obligatoire",jobtitle:"Ce champ est obligatoire",companyname:"Ce champ est obligatoire",country:"Ce champ est obligatoire",industry:"Ce champ est obligatoire"}),"de-DE"==document.documentElement.lang&&(errMsg={firstname:"Pflichtangabe",lastname:"Pflichtangabe",email:{required:"Pflichtangabe",email:"Pflichtangabe"},businessphone:"Pflichtangabe",jobtitle:"Pflichtangabe",companyname:"Pflichtangabe",country:"Pflichtangabe",industry:"Pflichtangabe"}),$(".js-eloqua-form").each((function(){$(this).find("form").validate({messages:errMsg,errorPlacement:function(e,t){t.is(":radio")||t.is(":checkbox")?e.appendTo(t.parents(".forr-form__row")):e.insertAfter(t)},submitHandler:function(e){submitEloquaForm(e)}})}))},$(document).ready((function(){FORRELOQUA.init()}))}(window.FORRELOQUA=window.FORRELOQUA||{},jQuery)},function(e,t){!function(e,t){e.init=function(e){var t=document.getElementById("back-to-top");if(t){var i=200,g=jQuery(".js-banner");g.length>0&&(i=g.height());var n=function(){window.scrollY>=i?t.classList.add("show"):t.classList.remove("show")};window.addEventListener("scroll",n),n(),t.onclick=function(e){return e.preventDefault(),jQuery("html, body").animate({scrollTop:0},"slow"),!1}}},t(document).ready((function(){e.init()}))}(window.FORRSCROLLTOTOP=window.FORRSCROLLTOTOP||{},jQuery)},function(e,t,i){"use strict";var g=i(0),n=i.n(g);document.addEventListener("DOMContentLoaded",(function(e){var t=document.querySelector(".js-forr-lang");if(t){new n.a(t,{maxItemCount:1,searchPlaceholderValue:"Select Language",itemSelectText:"",allowHTML:!0});t.addEventListener("change",(function(e){window.location=e.detail.value})),t.nextElementSibling.querySelectorAll(".choices__item.choices__item--selectable").forEach((function(e){e.removeAttribute("aria-selected")}))}}))},function(e,t){!function(e){e(document).ready((function(){e(".accordion").each((function(t,i){e(i).on("click",'a[data-toggle="collapse"]',(function(t){if(t.preventDefault(),"false"==this.getAttribute("aria-expanded")){var g=e(i).find('a[aria-expanded="true"]');g.length&&(g[0].setAttribute("aria-expanded","false"),g.parents(".card").find(".collapse").slideUp())}this.setAttribute("aria-expanded","true"==this.getAttribute("aria-expanded")?"false":"true"),e(this).parents(".card").find(".collapse").slideToggle()}))}))}))}(jQuery)},function(e,t){function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,I=function(){};return{s:I,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:I}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,C=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return C=e.done,e},e:function(e){r=!0,o=e},f:function(){try{C||null==i.return||i.return()}finally{if(r)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,g=new Array(t);i<t;i++)g[i]=e[i];return g}var n=[],I="";function o(){var e,t=i(document.querySelectorAll(".js-sidenav"));try{for(t.s();!(e=t.n()).done;){var g=e.value;g.getBoundingClientRect().top/window.innerHeight<=.6?g.classList.add("is-active"):g.classList.remove("is-active")}}catch(e){t.e(e)}finally{t.f()}}function C(){var e="";if(n.forEach((function(t){document.querySelector(t).getBoundingClientRect().top<window.innerHeight/4&&(e=t)})),I!=e){var t=document.querySelectorAll(".js-sidenav-link.is-active"),i=document.querySelector(".js-sidenav-link[href='".concat(e,"']"));t&&$(t).each((function(){$(this).removeClass("is-active")})),i&&i.classList.add("is-active"),I=e,document.querySelector(".js-sidenav-mobile-select").value=I}}function r(){var e=document.querySelectorAll(".sn-white");if(e){var t=[],i=0;e.forEach((function(e){var g=e.getBoundingClientRect(),n=Math.floor(g.top),I=Math.floor(g.bottom);n==i&&t.length>0?t[t.length-1][1]=I:t.push([n,I]),i=I}));var g=document.querySelectorAll(".js-sidenav-link");g&&g.forEach((function(e){var i=!1,g=e.getBoundingClientRect();t.forEach((function(e){g.top>=e[0]&&g.bottom<=e[1]&&(i=!0)})),i?e.classList.add("t-white"):e.classList.remove("t-white")}))}}document.addEventListener("DOMContentLoaded",(function(e){if(document.querySelector(".js-sidenav")){window.addEventListener("scroll",o),o(),$(".js-sidenav-link").each((function(){if("#"==this.attributes.href.value.charAt(0)){var e=this.hash;if(e)document.querySelector(e)&&n.push(e)}})),window.addEventListener("scroll",C),C();var t=document.querySelector(".js-sidenav-mobile");if(t){var i=document.querySelector(".js-sidenav-section");window.addEventListener("scroll",(function(){i.getBoundingClientRect().top<=60?t.classList.add("is-fixed"):t.classList.remove("is-fixed"),i.getBoundingClientRect().bottom<=110?t.classList.add("is-passed"):t.classList.remove("is-passed")}));var g=document.querySelector(".js-sidenav-mobile-select");g.addEventListener("change",(function(){g.value!=window.location.hash&&(window.location.hash=g.value)}))}window.addEventListener("scroll",r),r()}}))},function(e,t){$(document).ready((function(){$(".js-fbs-img-carousel").each((function(e){var t=!!$(this).data("centered");$(this).slick({dots:!0,infinite:!0,slidesToShow:1,prevArrow:'<span class="slick-arrow slick-prev">Previous</span>',nextArrow:'<span class="slick-arrow slick-next">Next</span>',mobileFirst:!0,responsive:[{breakpoint:768,settings:{variableWidth:!0,centerMode:t}}]}),$(this).on("afterChange",(function(e,t,i){$(this).parent().find(".js-fbs-img-carousel-position").text(i+1)}))}))}))},function(e,t){var i=[],g="";function n(){var e="";if(i.forEach((function(t){document.querySelector(t).getBoundingClientRect().top<60&&(e=t)})),g!=e){var t=document.querySelectorAll(".js-anchor-links a.is-active"),n=document.querySelectorAll(".js-anchor-links a[href='".concat(e,"']"));t&&$(t).each((function(){$(this).removeClass("is-active")})),n&&$(n).each((function(){$(this).addClass("is-active")})),g=e;var I=document.querySelector(".js-anchor-select");I&&(I.value=g)}}document.addEventListener("DOMContentLoaded",(function(e){document.querySelector(".js-anchor-links")&&($(".js-anchor-links li a").each((function(){if("#"==this.attributes.href.value.charAt(0)){var e=this.hash;if(e)document.querySelector(e)&&i.push(e)}})),window.addEventListener("scroll",n),n());var t=document.querySelector(".js-anchor-select");t&&t.addEventListener("change",(function(){t.value!=window.location.hash&&(window.location.hash=t.value)}))}))},,function(e,t){!function(e,t){function i(){t("body").on("click",".js-agenda-nav-tab",(function(e){e.preventDefault();var i=this.hash.split("?")[0];t(" .js-agenda-nav-tab").removeClass("is-active"),t(this).addClass("is-active"),t(" .js-agenda-tab").removeClass("is-active"),t(" "+i).addClass("is-active");var g=0;t(" .js-agenda-header").length&&(g+=t(" .js-agenda-header").height()),t(" .js-agenda-nav").length&&(g+=t(" .js-agenda-nav").height()+30),t(" .js-anchor-links").length&&(g+=t(" .js-anchor-links").height()),t(".event-agenda-tabs").length&&(g+=t(".event-agenda-tabs").height()),t("html, body").animate({scrollTop:t(" "+i).offset().top-g-130}),t(".js-event-session-title").each((function(){var e=t(this),i=e.parents(".js-event-session");e.height()>=75&&i.addClass("is-talltitle")}))})),window.location.hash&&t(".js-agenda-tab"+window.location.hash).length>0&&(t(".js-agenda-tab"+window.location.hash).find(".event-session__track-session-showhide").trigger("click"),t('.js-agenda-nav-tab[href="'.concat(window.location.hash,'"]')).trigger("click")),t("body").on("click",".js-track-session-showhide",(function(e){e.preventDefault(),t(this).toggleClass("is-open"),t(this).parents(".js-track").find(".js-track-session").toggleClass("is-open"),t(this).parents(".js-track").prev().toggleClass("is-open")}))}e.init=function(){var e;i(),t("body").on("click",".js-pricing-block",(function(e){this.classList.contains("is-active")||(t(".js-pricing-block.is-active .js-pricing-block-body").slideUp(),t(".js-pricing-block.is-active").removeClass("is-active"),t(this).addClass("is-active"),t(this).find(".js-pricing-block-body").slideDown())})),t("body").on("click",".js-tier-tooltip i",(function(e){e.preventDefault(),t(this).parents(".js-tier-tooltip").toggleClass("is-active")})),(e=t("#ems-sticky-footer")).length>0&&(t(".ems-banner").hasClass("ems-banner--overview")?t(window).on("scroll",(function(i){var g=document.querySelector(".ems-banner .btn");t(window).width()<1200&&(g=document.querySelector(".ems-overview-reg .btn")),g&&(g.getBoundingClientRect().bottom<=60?e.addClass("is-scrolled"):e.removeClass("is-scrolled"))})).trigger("scroll"):e.addClass("is-scrolled"),t(window).on("scroll",(function(i){var g=e[0].nextElementSibling;t(g).offset().top-t(document).scrollTop()-t(window).outerHeight()<=0?e.addClass("is-scrolled-past"):e.removeClass("is-scrolled-past")})).trigger("scroll")),t(".js-event-session-title").on("click",(function(e){e.preventDefault(),t(this).parents(".js-event-session").toggleClass("is-open")})),t(".js-sponsor-role-select").on("change",(function(e){var i=t(this).val();t(".js-sponsor-role-select").val(i),i?t(".js-event-sponsor").each((function(e,g){void 0!==t(g).data("roles")&&(t(g).data("roles").toString().split(",").includes(i.toString())?t(g).show():t(g).hide())})):t(".js-event-sponsor").show()})).trigger("change")},t(document).ready((function(){e.init()}))}(window.FORREVENTS=window.FORREVENTS||{},jQuery)},,,,,function(e,t){document.addEventListener("DOMContentLoaded",(function(e){window.addEventListener("load",(function(){if(document.querySelector(".countdown-clock")){var e=document.querySelector(".countdown-clock"),t=e.getAttribute("data-end-date"),i=setInterval((function(){var g=new Date(t).getTime()-(new Date).getTime(),n=Math.floor(g/864e5),I=Math.floor(g%864e5/36e5),o=Math.floor(g%36e5/6e4),C=Math.floor(g%6e4/1e3);e.querySelector(".days").innerHTML="<span>"+n+"</span><span>day"+(1!==n?"s":"")+"</span>",e.querySelector(".hours").innerHTML="<span>"+I+"</span><span>hour"+(1!==I?"s":"")+"</span>",e.querySelector(".minutes").innerHTML="<span>"+o+"</span><span>minute"+(1!==o?"s":"")+"</span>",e.querySelector(".seconds").innerHTML="<span>"+C+"</span><span>second"+(1!==C?"s":"")+"</span>",g<0&&(clearInterval(i),e.remove())}),1e3);setTimeout((function(){null==e||e.classList.add("is-enabled")}),1e3)}}))}))},,function(e,t,i){(function(e){var g=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function I(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new I(n.call(setTimeout,g,arguments),clearTimeout)},t.setInterval=function(){return new I(n.call(setInterval,g,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},I.prototype.unref=I.prototype.ref=function(){},I.prototype.close=function(){this._clearFn.call(g,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i(35),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i(21))},function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(g=window)}e.exports=g},,function(e,t,i){"use strict";(function(e,g){function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,g)}return i}function I(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function C(e,t,i,g,n,I,o){try{var C=e[I](o),r=C.value}catch(e){return void i(e)}C.done?t(r):Promise.resolve(r).then(g,n)}function r(e){return function(){var t=this,i=arguments;return new Promise((function(g,n){var I=e.apply(t,i);function o(e){C(I,g,n,o,r,"next",e)}function r(e){C(I,g,n,o,r,"throw",e)}o(void 0)}))}}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function s(e){var t=u();return function(){var i,g=h(e);if(t){var n=h(this).constructor;i=Reflect.construct(g,arguments,n)}else i=g.apply(this,arguments);return A(this,i)}}function A(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,g)}function g(){return l(e,arguments,h(this).constructor)}return g.prototype=Object.create(e.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d(g,e)})(e)}function l(e,t,i){return(l=u()?Reflect.construct:function(e,t,i){var g=[null];g.push.apply(g,t);var n=new(Function.bind.apply(e,g));return i&&d(n,i.prototype),n}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,g=new Array(t);i<t;i++)g[i]=e[i];return g}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var i=0;i<t.length;i++){var g=t[i];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}function y(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.d(t,"a",(function(){return J}));var G,Z,B=Object.defineProperty,S=function(e,t,i){return function(e,t,i){return t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i}(e,"symbol"!=v(t)?t+"":t,i)},w=function(){function e(){b(this,e)}return y(e,[{key:"requestAnimationFrame",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return requestAnimationFrame(e)}))},{key:"cancelAnimationFrame",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){cancelAnimationFrame(e)}))}]),e}(),W=function(){function t(){b(this,t),S(this,"_lastHandleId",0),S(this,"_lastImmediate",null)}return y(t,[{key:"requestAnimationFrame",value:function(t){return this._lastHandleId>=Number.MAX_SAFE_INTEGER&&(this._lastHandleId=0),this._lastHandleId+=1,this._lastImmediate=e((function(){t(Date.now())})),this._lastHandleId}},{key:"cancelAnimationFrame",value:function(e){this._lastImmediate&&g(this._lastImmediate)}}]),t}(),K=function(){function e(){b(this,e),S(this,"_strategy"),this._strategy="function"==typeof requestAnimationFrame?new w:new W}return y(e,[{key:"requestAnimationFrame",value:function(e){return this._strategy.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){this._strategy.cancelAnimationFrame(e)}}]),e}(),Y=("undefined"==typeof window?"undefined":v(window))<"u"&&v(window.document)<"u",V=new Uint8Array([80,75,3,4]),R=["v","ip","op","layers","fr","w","h"],k="@lottiefiles/dotlottie-web",X=(Z=("undefined"==typeof document?"undefined":v(document))<"u"?null===(G=document.currentScript)||void 0===G?void 0:G.src:void 0,function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=i,n=new Promise((function(i,g){e=i,t=g})),I=Object.assign({},g),o="./this.program",C="";("undefined"==typeof document?"undefined":v(document))<"u"&&document.currentScript&&(C=document.currentScript.src),Z&&(C=Z),C=C.startsWith("blob:")?"":C.substr(0,C.replace(/[?#].*/,"").lastIndexOf("https://www.forrester.com/")+1);var r,A=g.print||console.log.bind(console),l=g.printErr||console.error.bind(console);Object.assign(g,I),I=null,g.thisProgram&&(o=g.thisProgram),g.wasmBinary&&(r=g.wasmBinary);var u,d,h,p,f,G,B,S,w,W=!1;function K(){var e=u.buffer;g.HEAP8=d=new Int8Array(e),g.HEAP16=p=new Int16Array(e),g.HEAPU8=h=new Uint8Array(e),g.HEAPU16=f=new Uint16Array(e),g.HEAP32=G=new Int32Array(e),g.HEAPU32=B=new Uint32Array(e),g.HEAPF32=S=new Float32Array(e),g.HEAPF64=w=new Float64Array(e)}var Y=[],V=[],R=[];function k(){var e=g.preRun.shift();Y.unshift(e)}var X=0,H=null;function L(e){var i;throw null!==(i=g.onAbort)&&void 0!==i&&i.call(g,e),l(e="Aborted("+e+")"),W=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),t(e),e}var E,N=function(e){return e.startsWith("data:application/octet-stream;base64,")};if(!N(E="DotLottiePlayer.wasm")){var F=E;E=g.locateFile?g.locateFile(F,C):C+F}function _(e){if(e==E&&r)return new Uint8Array(r);throw"both async and sync fetching of the wasm failed"}function T(e){return r||"function"!=typeof fetch?Promise.resolve().then((function(){return _(e)})):fetch(e,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '".concat(e,"'");return t.arrayBuffer()})).catch((function(){return _(e)}))}function D(e,t,i){return T(e).then((function(e){return WebAssembly.instantiate(e,t)})).then(i,(function(e){l("failed to asynchronously prepare wasm: ".concat(e)),L(e)}))}function M(e,t){var i=E;return r||"function"!=typeof WebAssembly.instantiateStreaming||N(i)||"function"!=typeof fetch?D(i,e,t):fetch(i,{credentials:"same-origin"}).then((function(g){return WebAssembly.instantiateStreaming(g,e).then(t,(function(g){return l("wasm streaming compile failed: ".concat(g)),l("falling back to ArrayBuffer instantiation"),D(i,e,t)}))}))}var O=function(e){for(;0<e.length;)e.shift()(g)},P=("undefined"==typeof TextDecoder?"undefined":v(TextDecoder))<"u"?new TextDecoder("utf8"):void 0,J=function(e,t,i){var g=t+i;for(i=t;e[i]&&!(i>=g);)++i;if(16<i-t&&e.buffer&&P)return P.decode(e.subarray(t,i));for(g="";t<i;){var n=e[t++];if(128&n){var I=63&e[t++];if(192==(224&n))g+=String.fromCharCode((31&n)<<6|I);else{var o=63&e[t++];65536>(n=224==(240&n)?(15&n)<<12|I<<6|o:(7&n)<<18|I<<12|o<<6|63&e[t++])?g+=String.fromCharCode(n):(n-=65536,g+=String.fromCharCode(55296|n>>10,56320|1023&n))}}else g+=String.fromCharCode(n)}return g},j=y((function e(t){b(this,e),this.ya=t-24})),x=function(e){for(var t=0,i=0;i<e.length;++i){var g=e.charCodeAt(i);127>=g?t++:2047>=g?t+=2:55296<=g&&57343>=g?(t+=4,++i):t+=3}return t},U=function(e,t,i,g){if(0<g){g=i+g-1;for(var n=0;n<e.length;++n){var I=e.charCodeAt(n);if(55296<=I&&57343>=I&&(I=65536+((1023&I)<<10)|1023&e.charCodeAt(++n)),127>=I){if(i>=g)break;t[i++]=I}else{if(2047>=I){if(i+1>=g)break;t[i++]=192|I>>6}else{if(65535>=I){if(i+2>=g)break;t[i++]=224|I>>12}else{if(i+3>=g)break;t[i++]=240|I>>18,t[i++]=128|I>>12&63}t[i++]=128|I>>6&63}t[i++]=128|63&I}}t[i]=0}},z={},Q=function(e){for(;e.length;){var t=e.pop();e.pop()(t)}};function q(e){return this.fromWireType(B[e>>2])}var $,ee,te,ie={},ge={},ne={},Ie=function(e,t,i){function g(t){if((t=i(t)).length!==e.length)throw new $("Mismatched type converter count");for(var g=0;g<e.length;++g)re(e[g],t[g])}e.forEach((function(e){ne[e]=t}));var n=Array(t.length),I=[],o=0;t.forEach((function(e,t){ge.hasOwnProperty(e)?n[t]=ge[e]:(I.push(e),ie.hasOwnProperty(e)||(ie[e]=[]),ie[e].push((function(){n[t]=ge[e],++o===I.length&&g(n)})))})),0===I.length&&g(n)},oe=function(e){for(var t="";h[e];)t+=ee[h[e++]];return t};function Ce(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=t.name;if(!e)throw new te('type "'.concat(g,'" must have a positive integer typeid pointer'));if(ge.hasOwnProperty(e)){if(i.ib)return;throw new te("Cannot register type '".concat(g,"' twice"))}ge[e]=t,delete ne[e],ie.hasOwnProperty(e)&&(t=ie[e],delete ie[e],t.forEach((function(e){return e()})))}function re(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Ce(e,t,i)}var ae,se=function(e){throw new te(e.ma.za.xa.name+" instance already deleted")},Ae=!1,ce=function(){},le=function e(t,i,g){return i===g?t:void 0===g.Ca||null===(t=e(t,i,g.Ca))?null:g.ab(t)},ue={},de=[],he=function(){for(;de.length;){var e=de.pop();e.ma.Ka=!1,e.delete()}},me={},pe=function(e,t){if(void 0===t)throw new te("ptr should not be undefined");for(;e.Ca;)t=e.Na(t),e=e.Ca;return me[t]},be=function(e,t){if(!t.za||!t.ya)throw new $("makeClassHandle requires ptr and ptrType");if(!!t.Da!=!!t.Aa)throw new $("Both smartPtrType and smartPtr must be specified");return t.count={value:1},fe(Object.create(e,{ma:{value:t,writable:!0}}))},fe=function(e){return("undefined"==typeof FinalizationRegistry?"undefined":v(FinalizationRegistry))>"u"?(fe=function(e){return e},e):(Ae=new FinalizationRegistry((function(e){--(e=e.ma).count.value,0===e.count.value&&(e.Aa?e.Da.Fa(e.Aa):e.za.xa.Fa(e.ya))})),ce=function(e){Ae.unregister(e)},(fe=function(e){var t=e.ma;return t.Aa&&Ae.register(e,{ma:t},e),e})(e))};function ye(){}var ve=function(e,t){return Object.defineProperty(t,"name",{value:e})},Ge=function(e,t,i){if(void 0===e[t].Ba){var g=e[t];e[t]=function(){for(var g=arguments.length,n=new Array(g),I=0;I<g;I++)n[I]=arguments[I];if(!e[t].Ba.hasOwnProperty(n.length))throw new te("Function '".concat(i,"' called with an invalid number of arguments (").concat(n.length,") - expects one of (").concat(e[t].Ba,")!"));return e[t].Ba[n.length].apply(this,n)},e[t].Ba=[],e[t].Ba[g.Oa]=g}},Ze=function(e,t,i){if(g.hasOwnProperty(e)){if(void 0===i||void 0!==g[e].Ba&&void 0!==g[e].Ba[i])throw new te("Cannot register public name '".concat(e,"' twice"));if(Ge(g,e,e),g.hasOwnProperty(i))throw new te("Cannot register multiple overloads of a function with the same number of arguments (".concat(i,")!"));g[e].Ba[i]=t}else g[e]=t,void 0!==i&&(g[e].vb=i)},Be=function(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?"_".concat(e):e};function Se(e,t,i,g,n,I,o,C){this.name=e,this.constructor=t,this.La=i,this.Fa=g,this.Ca=n,this.cb=I,this.Na=o,this.ab=C,this.kb=[]}var we=function(e,t,i){for(;t!==i;){if(!t.Na)throw new te("Expected null or instance of ".concat(i.name,", got an instance of ").concat(t.name));e=t.Na(e),t=t.Ca}return e};function We(e,t){if(null===t){if(this.Ta)throw new te("null is not a valid ".concat(this.name));return 0}if(!t.ma)throw new te('Cannot pass "'.concat($e(t),'" as a ').concat(this.name));if(!t.ma.ya)throw new te("Cannot pass deleted object as a pointer of type ".concat(this.name));return we(t.ma.ya,t.ma.za.xa,this.xa)}function Ke(e,t){if(null===t){if(this.Ta)throw new te("null is not a valid ".concat(this.name));if(this.Qa){var i=this.Ua();return null!==e&&e.push(this.Fa,i),i}return 0}if(!t||!t.ma)throw new te('Cannot pass "'.concat($e(t),'" as a ').concat(this.name));if(!t.ma.ya)throw new te("Cannot pass deleted object as a pointer of type ".concat(this.name));if(!this.Pa&&t.ma.za.Pa)throw new te("Cannot convert argument of type ".concat(t.ma.Da?t.ma.Da.name:t.ma.za.name," to parameter type ").concat(this.name));if(i=we(t.ma.ya,t.ma.za.xa,this.xa),this.Qa){if(void 0===t.ma.Aa)throw new te("Passing raw pointer to smart pointer is illegal");switch(this.pb){case 0:if(t.ma.Da!==this)throw new te("Cannot convert argument of type ".concat(t.ma.Da?t.ma.Da.name:t.ma.za.name," to parameter type ").concat(this.name));i=t.ma.Aa;break;case 1:i=t.ma.Aa;break;case 2:if(t.ma.Da===this)i=t.ma.Aa;else{var g=t.clone();i=this.lb(i,Ue((function(){return g.delete()}))),null!==e&&e.push(this.Fa,i)}break;default:throw new te("Unsupporting sharing policy")}}return i}function Ye(e,t){if(null===t){if(this.Ta)throw new te("null is not a valid ".concat(this.name));return 0}if(!t.ma)throw new te('Cannot pass "'.concat($e(t),'" as a ').concat(this.name));if(!t.ma.ya)throw new te("Cannot pass deleted object as a pointer of type ".concat(this.name));if(t.ma.za.Pa)throw new te("Cannot convert argument of type ".concat(t.ma.za.name," to parameter type ").concat(this.name));return we(t.ma.ya,t.ma.za.xa,this.xa)}function Ve(e,t,i,g,n,I,o,C,r,a,s){this.name=e,this.xa=t,this.Ta=i,this.Pa=g,this.Qa=n,this.jb=I,this.pb=o,this.Za=C,this.Ua=r,this.lb=a,this.Fa=s,n||void 0!==t.Ca?this.toWireType=Ke:(this.toWireType=g?We:Ye,this.Ea=null)}var Re,ke,Xe=function(e,t,i){if(!g.hasOwnProperty(e))throw new $("Replacing nonexistent public symbol");void 0!==g[e].Ba&&void 0!==i?g[e].Ba[i]=t:(g[e]=t,g[e].Oa=i)},He=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.includes("j")?(e=e.replace(/p/g,"i"),t=g["dynCall_"+e].apply(void 0,[t].concat(m(i)))):t=Re.get(t).apply(void 0,m(i)),t},Le=function(e,t){return function(){for(var i=arguments.length,g=new Array(i),n=0;n<i;n++)g[n]=arguments[n];return He(e,t,g)}},Ee=function(e,t){var i=(e=oe(e)).includes("j")?Le(e,t):Re.get(t);if("function"!=typeof i)throw new te("unknown function pointer with signature ".concat(e,": ").concat(t));return i},Ne=function(e){e=Vt(e);var t=oe(e);return Rt(e),t},Fe=function(e,t){var i=[],g={};throw t.forEach((function e(t){g[t]||ge[t]||(ne[t]?ne[t].forEach(e):(i.push(t),g[t]=!0))})),new ke("".concat(e,": ")+i.map(Ne).join([", "]))},_e=function(e,t){for(var i=[],g=0;g<e;g++)i.push(B[t+4*g>>2]);return i};function Te(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].Ea)return!0;return!1}function De(e,t,i,g,n){var I=t.length;if(2>I)throw new te("argTypes array size mismatch! Must at least get return value and 'this' types!");var o=null!==t[1]&&null!==i,C=Te(t),r="void"!==t[0].name,a=I-2,s=Array(a),A=[],c=[];return ve(e,(function(){for(var i=arguments.length,I=new Array(i),l=0;l<i;l++)I[l]=arguments[l];if(I.length!==a)throw new te("function ".concat(e," called with ").concat(I.length," arguments, expected ").concat(a));if(c.length=0,A.length=o?2:1,A[0]=n,o){var u=t[1].toWireType(c,this);A[1]=u}for(var d=0;d<a;++d)s[d]=t[d+2].toWireType(c,I[d]),A.push(s[d]);if(I=g.apply(void 0,A),C)Q(c);else for(d=o?1:2;d<t.length;d++){var h=1===d?u:s[d-2];null!==t[d].Ea&&t[d].Ea(h)}return u=r?t[0].fromWireType(I):void 0}))}var Me,Oe=function(e){var t=(e=e.trim()).indexOf("(");return-1!==t?e.substr(0,t):e},Pe=[],Je=[],je=function(e){9<e&&0==--Je[e+1]&&(Je[e]=void 0,Pe.push(e))},xe=function(e){if(!e)throw new te("Cannot use deleted val. handle = "+e);return Je[e]},Ue=function(e){switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:var t=Pe.pop()||Je.length;return Je[t]=e,Je[t+1]=1,t}},ze={name:"emscripten::val",fromWireType:function(e){var t=xe(e);return je(e),t},toWireType:function(e,t){return Ue(t)},argPackAdvance:8,readValueFromPointer:q,Ea:null},Qe=function(e,t,i){switch(t){case 1:return i?function(e){return this.fromWireType(d[e])}:function(e){return this.fromWireType(h[e])};case 2:return i?function(e){return this.fromWireType(p[e>>1])}:function(e){return this.fromWireType(f[e>>1])};case 4:return i?function(e){return this.fromWireType(G[e>>2])}:function(e){return this.fromWireType(B[e>>2])};default:throw new TypeError("invalid integer width (".concat(t,"): ").concat(e))}},qe=function(e,t){var i=ge[e];if(void 0===i)throw e="".concat(t," has unknown type ").concat(Ne(e)),new te(e);return i},$e=function(e){if(null===e)return"null";var t=v(e);return"object"===t||"array"===t||"function"===t?e.toString():""+e},et=function(e,t){switch(t){case 4:return function(e){return this.fromWireType(S[e>>2])};case 8:return function(e){return this.fromWireType(w[e>>3])};default:throw new TypeError("invalid float width (".concat(t,"): ").concat(e))}},tt=function(e,t,i){switch(t){case 1:return i?function(e){return d[e]}:function(e){return h[e]};case 2:return i?function(e){return p[e>>1]}:function(e){return f[e>>1]};case 4:return i?function(e){return G[e>>2]}:function(e){return B[e>>2]};default:throw new TypeError("invalid integer width (".concat(t,"): ").concat(e))}},it=("undefined"==typeof TextDecoder?"undefined":v(TextDecoder))<"u"?new TextDecoder("utf-16le"):void 0,gt=function(e,t){for(var i=e>>1,g=i+t/2;!(i>=g)&&f[i];)++i;if(32<(i<<=1)-e&&it)return it.decode(h.subarray(e,i));for(i="",g=0;!(g>=t/2);++g){var n=p[e+2*g>>1];if(0==n)break;i+=String.fromCharCode(n)}return i},nt=function(e,t,i){var g;if(null!==(g=i)&&void 0!==g||(i=2147483647),2>i)return 0;var n=t;i=(i-=2)<2*e.length?i/2:e.length;for(var I=0;I<i;++I)p[t>>1]=e.charCodeAt(I),t+=2;return p[t>>1]=0,t-n},It=function(e){return 2*e.length},ot=function(e,t){for(var i=0,g="";!(i>=t/4);){var n=G[e+4*i>>2];if(0==n)break;++i,65536<=n?(n-=65536,g+=String.fromCharCode(55296|n>>10,56320|1023&n)):g+=String.fromCharCode(n)}return g},Ct=function(e,t,i){var g;if(null!==(g=i)&&void 0!==g||(i=2147483647),4>i)return 0;var n=t;i=n+i-4;for(var I=0;I<e.length;++I){var o=e.charCodeAt(I);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++I)),G[t>>2]=o,(t+=4)+4>i)break}return G[t>>2]=0,t-n},rt=function(e){for(var t=0,i=0;i<e.length;++i){var g=e.charCodeAt(i);55296<=g&&57343>=g&&++i,t+=4}return t},at=[],st=function(e){var t=at.length;return at.push(e),t},At=function(e,t){for(var i=Array(e),g=0;g<e;++g)i[g]=qe(B[t+4*g>>2],"parameter "+g);return i},ct=Reflect.construct,lt={},ut=function(){if(!Me){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==("undefined"==typeof navigator?"undefined":v(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:o||"./this.program"};for(e in lt)void 0===lt[e]?delete t[e]:t[e]=lt[e];var i=[];for(e in t)i.push("".concat(e,"=").concat(t[e]));Me=i}return Me},dt=[null,[],[]],ht=function(){if("object"==("undefined"==typeof crypto?"undefined":v(crypto))&&"function"==typeof crypto.getRandomValues)return function(e){return crypto.getRandomValues(e)};L("initRandomDevice")},mt=function(e){return(mt=ht())(e)},pt=function(e){return e%4==0&&(e%100!=0||e%400==0)},bt=[31,29,31,30,31,30,31,31,30,31,30,31],ft=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(e){var t=Array(x(e)+1);return U(e,t,0,t.length),t}var vt,Gt,Zt,Bt=function(e,t,i,g){function n(e,t,i){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=i[0]+e;return e}function I(e,t){return n(e,t,"0")}function o(e,t){function i(e){return 0>e?-1:0<e?1:0}var g;return 0===(g=i(e.getFullYear()-t.getFullYear()))&&0===(g=i(e.getMonth()-t.getMonth()))&&(g=i(e.getDate()-t.getDate())),g}function C(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function r(e){var t=e.Ia;for(e=new Date(new Date(e.Ja+1900,0,1).getTime());0<t;){var i=e.getMonth(),g=(pt(e.getFullYear())?bt:ft)[i];if(!(t>g-e.getDate())){e.setDate(e.getDate()+t);break}t-=g-e.getDate()+1,e.setDate(1),11>i?e.setMonth(i+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return i=new Date(e.getFullYear()+1,0,4),t=C(new Date(e.getFullYear(),0,4)),i=C(i),0>=o(t,e)?0>=o(i,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var a=B[g+40>>2];for(var s in g={sb:G[g>>2],rb:G[g+4>>2],Ra:G[g+8>>2],Va:G[g+12>>2],Sa:G[g+16>>2],Ja:G[g+20>>2],Ga:G[g+24>>2],Ia:G[g+28>>2],wb:G[g+32>>2],qb:G[g+36>>2],tb:a&&a?J(h,a):""},i=i?J(h,i):"",a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})i=i.replace(new RegExp(s,"g"),a[s]);var A="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c="January February March April May June July August September October November December".split(" ");for(s in a={"%a":function(e){return A[e.Ga].substring(0,3)},"%A":function(e){return A[e.Ga]},"%b":function(e){return c[e.Sa].substring(0,3)},"%B":function(e){return c[e.Sa]},"%C":function(e){return I((e.Ja+1900)/100|0,2)},"%d":function(e){return I(e.Va,2)},"%e":function(e){return n(e.Va,2," ")},"%g":function(e){return r(e).toString().substring(2)},"%G":r,"%H":function(e){return I(e.Ra,2)},"%I":function(e){return 0==(e=e.Ra)?e=12:12<e&&(e-=12),I(e,2)},"%j":function(e){for(var t=0,i=0;i<=e.Sa-1;t+=(pt(e.Ja+1900)?bt:ft)[i++]);return I(e.Va+t,3)},"%m":function(e){return I(e.Sa+1,2)},"%M":function(e){return I(e.rb,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.Ra&&12>e.Ra?"AM":"PM"},"%S":function(e){return I(e.sb,2)},"%t":function(){return"\t"},"%u":function(e){return e.Ga||7},"%U":function(e){return I(Math.floor((e.Ia+7-e.Ga)/7),2)},"%V":function(e){var t=Math.floor((e.Ia+7-(e.Ga+6)%7)/7);if(2>=(e.Ga+371-e.Ia-2)%7&&t++,t)53==t&&(4==(i=(e.Ga+371-e.Ia)%7)||3==i&&pt(e.Ja)||(t=1));else{t=52;var i=(e.Ga+7-e.Ia-1)%7;(4==i||5==i&&pt(e.Ja%400-1))&&t++}return I(t,2)},"%w":function(e){return e.Ga},"%W":function(e){return I(Math.floor((e.Ia+7-(e.Ga+6)%7)/7),2)},"%y":function(e){return(e.Ja+1900).toString().substring(2)},"%Y":function(e){return e.Ja+1900},"%z":function(e){return(0<=(e=e.qb)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4)},"%Z":function(e){return e.tb},"%%":function(){return"%"}},i=i.replace(/%%/g,"\0\0"),a)i.includes(s)&&(i=i.replace(new RegExp(s,"g"),a[s](g)));return(s=yt(i=i.replace(/\0\0/g,"%"))).length>t?0:(d.set(s,e),s.length-1)};$=g.InternalError=function(e){a(i,e);var t=s(i);function i(e){var g;return b(this,i),(g=t.call(this,e)).name="InternalError",g}return y(i)}(c(Error));for(var St=Array(256),wt=0;256>wt;++wt)St[wt]=String.fromCharCode(wt);ee=St,te=g.BindingError=function(e){a(i,e);var t=s(i);function i(e){var g;return b(this,i),(g=t.call(this,e)).name="BindingError",g}return y(i)}(c(Error)),Object.assign(ye.prototype,{isAliasOf:function(e){if(!(this instanceof ye&&e instanceof ye))return!1;var t=this.ma.za.xa,i=this.ma.ya;e.ma=e.ma;var g=e.ma.za.xa;for(e=e.ma.ya;t.Ca;)i=t.Na(i),t=t.Ca;for(;g.Ca;)e=g.Na(e),g=g.Ca;return t===g&&i===e},clone:function(){if(this.ma.ya||se(this),this.ma.Ma)return this.ma.count.value+=1,this;var e=fe,t=Object,i=t.create,g=Object.getPrototypeOf(this),n=this.ma;return(e=e(i.call(t,g,{ma:{value:{count:n.count,Ka:n.Ka,Ma:n.Ma,ya:n.ya,za:n.za,Aa:n.Aa,Da:n.Da}}}))).ma.count.value+=1,e.ma.Ka=!1,e},delete:function(){if(this.ma.ya||se(this),this.ma.Ka&&!this.ma.Ma)throw new te("Object already scheduled for deletion");ce(this);var e=this.ma;--e.count.value,0===e.count.value&&(e.Aa?e.Da.Fa(e.Aa):e.za.xa.Fa(e.ya)),this.ma.Ma||(this.ma.Aa=void 0,this.ma.ya=void 0)},isDeleted:function(){return!this.ma.ya},deleteLater:function(){if(this.ma.ya||se(this),this.ma.Ka&&!this.ma.Ma)throw new te("Object already scheduled for deletion");return de.push(this),1===de.length&&ae&&ae(he),this.ma.Ka=!0,this}}),g.getInheritedInstanceCount=function(){return Object.keys(me).length},g.getLiveInheritedInstances=function(){var e,t=[];for(e in me)me.hasOwnProperty(e)&&t.push(me[e]);return t},g.flushPendingDeletes=he,g.setDelayFunction=function(e){ae=e,de.length&&ae&&ae(he)},Object.assign(Ve.prototype,{eb:function(e){return this.Za&&(e=this.Za(e)),e},Xa:function(e){var t;null===(t=this.Fa)||void 0===t||t.call(this,e)},argPackAdvance:8,readValueFromPointer:q,fromWireType:function(e){function t(){return this.Qa?be(this.xa.La,{za:this.jb,ya:i,Da:this,Aa:e}):be(this.xa.La,{za:this,ya:e})}var i=this.eb(e);if(!i)return this.Xa(e),null;var g=pe(this.xa,i);if(void 0!==g)return 0===g.ma.count.value?(g.ma.ya=i,g.ma.Aa=e,g.clone()):(g=g.clone(),this.Xa(e),g);if(g=this.xa.cb(i),!(g=ue[g]))return t.call(this);g=this.Pa?g.$a:g.pointerType;var n=le(i,this.xa,g.xa);return null===n?t.call(this):this.Qa?be(g.xa.La,{za:g,ya:n,Da:this,Aa:e}):be(g.xa.La,{za:g,ya:n})}}),ke=g.UnboundTypeError=(vt=Error,(Zt=ve(Gt="UnboundTypeError",(function(e){this.name=Gt,this.message=e,void 0!==(e=Error(e).stack)&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}))).prototype=Object.create(vt.prototype),Zt.prototype.constructor=Zt,Zt.prototype.toString=function(){return void 0===this.message?this.name:"".concat(this.name,": ").concat(this.message)},Zt),Je.push(0,1,void 0,1,null,1,!0,1,!1,1),g.count_emval_handles=function(){return Je.length/2-5-Pe.length};var Wt={c:function(e,t,i,g){L("Assertion failed: ".concat(e?J(h,e):"",", at: ")+[t?t?J(h,t):"":"unknown filename",i,g?g?J(h,g):"":"unknown function"])},m:function(e,t,i){var g=new j(e);throw B[g.ya+16>>2]=0,B[g.ya+4>>2]=t,B[g.ya+8>>2]=i,e},B:function(){return 0},P:function(){},M:function(){},R:function(){return 0},N:function(){},A:function(){},O:function(){},v:function(e){var t=z[e];delete z[e];var i=t.Ua,g=t.Fa,n=t.Ya,I=n.map((function(e){return e.hb})).concat(n.map((function(e){return e.nb})));Ie([e],I,(function(e){var I={};return n.forEach((function(t,i){var g=e[i],o=t.fb,C=t.gb,r=e[i+n.length],a=t.mb,s=t.ob;I[t.bb]={read:function(e){return g.fromWireType(o(C,e))},write:function(e,t){var i=[];a(s,e,r.toWireType(i,t)),Q(i)}}})),[{name:t.name,fromWireType:function(e){var t,i={};for(t in I)i[t]=I[t].read(e);return g(e),i},toWireType:function(e,t){for(var n in I)if(!(n in t))throw new TypeError('Missing field: "'.concat(n,'"'));var o=i();for(n in I)I[n].write(o,t[n]);return null!==e&&e.push(g,o),o},argPackAdvance:8,readValueFromPointer:q,Ea:g}]}))},I:function(){},Y:function(e,t,i,g){re(e,{name:t=oe(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:g},argPackAdvance:8,readValueFromPointer:function(e){return this.fromWireType(h[e])},Ea:null})},r:function(e,t,i,g,n,I,o,C,r,a,s,A,c){s=oe(s),I=Ee(n,I),C&&(C=Ee(o,C)),a&&(a=Ee(r,a)),c=Ee(A,c);var l=Be(s);Ze(l,(function(){Fe("Cannot construct ".concat(s," due to unbound types"),[g])})),Ie([e,t,i],g?[g]:[],(function(t){if(t=t[0],g)var i=t.xa,n=i.La;else n=ye.prototype;t=ve(s,(function(){if(Object.getPrototypeOf(this)!==o)throw new te("Use 'new' to construct "+s);if(void 0===u.Ha)throw new te(s+" has no accessible constructor");for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var g=u.Ha[t.length];if(void 0===g)throw new te("Tried to invoke ctor of ".concat(s," with invalid number of parameters (").concat(t.length,") - expected (").concat(Object.keys(u.Ha).toString(),") parameters instead!"));return g.apply(this,t)}));var o=Object.create(n,{constructor:{value:t}});t.prototype=o;var r,A,u=new Se(s,t,o,c,i,I,C,a);return u.Ca&&(null!==(r=(A=u.Ca).Wa)&&void 0!==r||(A.Wa=[]),u.Ca.Wa.push(u)),i=new Ve(s,u,!0,!1,!1),A=new Ve(s+"*",u,!1,!1,!1),n=new Ve(s+" const*",u,!1,!0,!1),ue[e]={pointerType:A,$a:n},Xe(l,t),[i,A,n]}))},q:function(e,t,i,g,n,I){var o=_e(t,i);n=Ee(g,n),Ie([],[e],(function(e){e=e[0];var i="constructor ".concat(e.name);if(void 0===e.xa.Ha&&(e.xa.Ha=[]),void 0!==e.xa.Ha[t-1])throw new te("Cannot register multiple constructors with identical number of parameters (".concat(t-1,") for class '").concat(e.name,"'! Overload resolution is currently only performed using the parameter count, not actual type info!"));return e.xa.Ha[t-1]=function(){Fe("Cannot construct ".concat(e.name," due to unbound types"),o)},Ie([],o,(function(g){return g.splice(1,0,null),e.xa.Ha[t-1]=De(i,g,null,n,I),[]})),[]}))},f:function(e,t,i,g,n,I,o,C){var r=_e(i,g);t=oe(t),t=Oe(t),I=Ee(n,I),Ie([],[e],(function(e){function g(){Fe("Cannot call ".concat(n," due to unbound types"),r)}e=e[0];var n="".concat(e.name,".").concat(t);t.startsWith("@@")&&(t=Symbol[t.substring(2)]),C&&e.xa.kb.push(t);var a=e.xa.La,s=a[t];return void 0===s||void 0===s.Ba&&s.className!==e.name&&s.Oa===i-2?(g.Oa=i-2,g.className=e.name,a[t]=g):(Ge(a,t,n),a[t].Ba[i-2]=g),Ie([],r,(function(g){return g=De(n,g,e,I,o),void 0===a[t].Ba?(g.Oa=i-2,a[t]=g):a[t].Ba[i-2]=g,[]})),[]}))},X:function(e){return re(e,ze)},x:function(e,t,i,g){function n(){}t=oe(t),n.values={},re(e,{name:t,constructor:n,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:Qe(t,i,g),Ea:null}),Ze(t,n)},k:function(e,t,i){var g=qe(e,"enum");t=oe(t),e=g.constructor,g=Object.create(g.constructor.prototype,{value:{value:i},constructor:{value:ve("".concat(g.name,"_").concat(t),(function(){}))}}),e.values[i]=g,e[t]=g},C:function(e,t,i){re(e,{name:t=oe(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:et(t,i),Ea:null})},E:function(e,t,i,g,n,I){var o=_e(t,i);e=oe(e),e=Oe(e),n=Ee(g,n),Ze(e,(function(){Fe("Cannot call ".concat(e," due to unbound types"),o)}),t-1),Ie([],o,(function(i){return Xe(e,De(e,[i[0],null].concat(i.slice(1)),null,n,I),t-1),[]}))},l:function(e,t,i,g,n){if(t=oe(t),-1===n&&(n=4294967295),n=function(e){return e},0===g){var I=32-8*i;n=function(e){return e<<I>>>I}}var o=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t};re(e,{name:t,fromWireType:n,toWireType:o,argPackAdvance:8,readValueFromPointer:tt(t,i,0!==g),Ea:null})},g:function(e,t,i){function g(e){return new n(d.buffer,B[e+4>>2],B[e>>2])}var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];re(e,{name:i=oe(i),fromWireType:g,argPackAdvance:8,readValueFromPointer:g},{ib:!0})},w:function(e){re(e,ze)},ca:function(e,t,i,g,n,I,o,C,r,a,s,A){i=oe(i),I=Ee(n,I),C=Ee(o,C),a=Ee(r,a),A=Ee(s,A),Ie([e],[t],(function(e){return e=e[0],[new Ve(i,e.xa,!1,!1,!0,e,g,I,C,a,A)]}))},D:function(e,t){var i="std::string"===(t=oe(t));re(e,{name:t,fromWireType:function(e){var t=B[e>>2],g=e+4;if(i)for(var n=g,I=0;I<=t;++I){var o=g+I;if(I==t||0==h[o]){if(n=n?J(h,n,o-n):"",void 0===C)var C=n;else C+="\0",C+=n;n=o+1}}else{for(C=Array(t),I=0;I<t;++I)C[I]=String.fromCharCode(h[g+I]);C=C.join("")}return Rt(e),C},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var g="string"==typeof t;if(!(g||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array))throw new te("Cannot pass non-string to std::string");var n=i&&g?x(t):t.length,I=Yt(4+n+1),o=I+4;if(B[I>>2]=n,i&&g)U(t,h,o,n+1);else if(g)for(g=0;g<n;++g){var C=t.charCodeAt(g);if(255<C)throw Rt(o),new te("String has UTF-16 code units that do not fit in 8 bits");h[o+g]=C}else for(g=0;g<n;++g)h[o+g]=t[g];return null!==e&&e.push(Rt,I),I},argPackAdvance:8,readValueFromPointer:q,Ea:function(e){Rt(e)}})},u:function(e,t,i){if(i=oe(i),2===t)var g=gt,n=nt,I=It,o=function(e){return f[e>>1]};else 4===t&&(g=ot,n=Ct,I=rt,o=function(e){return B[e>>2]});re(e,{name:i,fromWireType:function(e){for(var i,n=B[e>>2],I=e+4,C=0;C<=n;++C){var r=e+4+C*t;(C==n||0==o(r))&&(I=g(I,r-I),void 0===i?i=I:(i+="\0",i+=I),I=r+t)}return Rt(e),i},toWireType:function(e,g){if("string"!=typeof g)throw new te("Cannot pass non-string to C++ string type ".concat(i));var o=I(g),C=Yt(4+o+t);return B[C>>2]=o/t,n(g,C+4,o+t),null!==e&&e.push(Rt,C),C},argPackAdvance:8,readValueFromPointer:q,Ea:function(e){Rt(e)}})},s:function(e,t,i,g,n,I){z[e]={name:oe(t),Ua:Ee(i,g),Fa:Ee(n,I),Ya:[]}},j:function(e,t,i,g,n,I,o,C,r,a){z[e].Ya.push({bb:oe(t),hb:i,fb:Ee(g,n),gb:I,nb:o,mb:Ee(C,r),ob:a})},Z:function(e,t){re(e,{ub:!0,name:t=oe(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},J:function(){throw 1/0},aa:function(e,t,i,g){return(e=at[e])(null,t=xe(t),i,g)},F:je,$:function(e,t,i){var g=At(e,t),n=g.shift();e--;var I=Array(e);return t="methodCaller<(".concat(g.map((function(e){return e.name})).join(", "),") => ").concat(n.name,">"),st(ve(t,(function(t,o,C,r){for(var a=0,s=0;s<e;++s)I[s]=g[s].readValueFromPointer(r+a),a+=g[s].argPackAdvance;return o=1===i?ct(o,I):o.apply(t,I),t=[],o=n.toWireType(t,o),t.length&&(B[C>>2]=Ue(t)),o})))},ba:function(e){9<e&&(Je[e+1]+=1)},_:function(e){var t=xe(e);Q(t),je(e)},o:function(e,t){return e=(e=qe(e,"_emval_take_value")).readValueFromPointer(t),Ue(e)},W:function(){L("")},V:function(){return performance.now()},L:function(e){var t=h.length;if(2147483648<(e>>>=0))return!1;for(var i=1;4>=i;i*=2){var g=t*(1+.2/i);g=Math.min(g,e+100663296);var n=Math;g=Math.max(e,g);e:{n=(n.min.call(n,2147483648,g+(65536-g%65536)%65536)-u.buffer.byteLength+65535)/65536;try{u.grow(n),K();var I=1;break e}catch(e){}I=void 0}if(I)return!0}return!1},S:function(e,t){var i=0;return ut().forEach((function(g,n){var I=t+i;for(n=B[e+4*n>>2]=I,I=0;I<g.length;++I)d[n++]=g.charCodeAt(I);d[n]=0,i+=g.length+1})),0},T:function(e,t){var i=ut();B[e>>2]=i.length;var g=0;return i.forEach((function(e){return g+=e.length+1})),B[t>>2]=g,0},t:function(){return 52},z:function(){return 52},H:function(){return 70},Q:function(e,t,i,g){for(var n=0,I=0;I<i;I++){var o=B[t>>2],C=B[t+4>>2];t+=8;for(var r=0;r<C;r++){var a=h[o+r],s=dt[e];0===a||10===a?((1===e?A:l)(J(s,0)),s.length=0):s.push(a)}n+=C}return B[g>>2]=n,0},U:function(e,t){return mt(h.subarray(e,e+t)),0},i:Dt,d:Tt,e:_t,p:Mt,y:Jt,b:Nt,a:Ft,h:Pt,n:Ot,G:jt,K:function(e,t,i,g){return Bt(e,t,i,g)}},Kt=function(){var e;function i(e){var t;return Kt=e.exports,u=Kt.da,K(),Re=Kt.ha,V.unshift(Kt.ea),X--,null!==(t=g.monitorRunDependencies)&&void 0!==t&&t.call(g,X),0==X&&H&&(e=H,H=null,e()),Kt}var n={a:Wt};if(X++,null!==(e=g.monitorRunDependencies)&&void 0!==e&&e.call(g,X),g.instantiateWasm)try{return g.instantiateWasm(n,i)}catch(e){l("Module.instantiateWasm callback failed with error: ".concat(e)),t(e)}return M(n,(function(e){i(e.instance)})).catch(t),{}}(),Yt=function(e){return(Yt=Kt.fa)(e)},Vt=function(e){return(Vt=Kt.ga)(e)},Rt=function(e){return(Rt=Kt.ia)(e)},kt=function(e,t){return(kt=Kt.ja)(e,t)},Xt=function(e){return(Xt=Kt.ka)(e)},Ht=function(){return(Ht=Kt.la)()};g.dynCall_iijj=function(e,t,i,n,I,o){return(g.dynCall_iijj=Kt.na)(e,t,i,n,I,o)},g.dynCall_vijj=function(e,t,i,n,I,o){return(g.dynCall_vijj=Kt.oa)(e,t,i,n,I,o)},g.dynCall_jiii=function(e,t,i,n){return(g.dynCall_jiii=Kt.pa)(e,t,i,n)},g.dynCall_jii=function(e,t,i){return(g.dynCall_jii=Kt.qa)(e,t,i)};var Lt,Et=g.dynCall_viiij=function(e,t,i,n,I,o){return(Et=g.dynCall_viiij=Kt.ra)(e,t,i,n,I,o)};function Nt(e,t){var i=Ht();try{Re.get(e)(t)}catch(e){if(Xt(i),e!==e+0)throw e;kt(1,0)}}function Ft(e,t,i){var g=Ht();try{Re.get(e)(t,i)}catch(e){if(Xt(g),e!==e+0)throw e;kt(1,0)}}function _t(e,t,i,g){var n=Ht();try{return Re.get(e)(t,i,g)}catch(e){if(Xt(n),e!==e+0)throw e;kt(1,0)}}function Tt(e,t,i){var g=Ht();try{return Re.get(e)(t,i)}catch(e){if(Xt(g),e!==e+0)throw e;kt(1,0)}}function Dt(e,t){var i=Ht();try{return Re.get(e)(t)}catch(e){if(Xt(i),e!==e+0)throw e;kt(1,0)}}function Mt(e,t,i,g,n,I){var o=Ht();try{return Re.get(e)(t,i,g,n,I)}catch(e){if(Xt(o),e!==e+0)throw e;kt(1,0)}}function Ot(e,t,i,g,n){var I=Ht();try{Re.get(e)(t,i,g,n)}catch(e){if(Xt(I),e!==e+0)throw e;kt(1,0)}}function Pt(e,t,i,g){var n=Ht();try{Re.get(e)(t,i,g)}catch(e){if(Xt(n),e!==e+0)throw e;kt(1,0)}}function Jt(e){var t=Ht();try{Re.get(e)()}catch(e){if(Xt(t),e!==e+0)throw e;kt(1,0)}}function jt(e,t,i,g,n,I){var o=Ht();try{Et(e,t,i,g,n,I)}catch(e){if(Xt(o),e!==e+0)throw e;kt(1,0)}}function xt(){function t(){if(!Lt&&(Lt=!0,g.calledRun=!0,!W)){if(O(V),e(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),g.postRun)for("function"==typeof g.postRun&&(g.postRun=[g.postRun]);g.postRun.length;){var t=g.postRun.shift();R.unshift(t)}O(R)}}if(!(0<X)){if(g.preRun)for("function"==typeof g.preRun&&(g.preRun=[g.preRun]);g.preRun.length;)k();O(Y),0<X||(g.setStatus?(g.setStatus("Running..."),setTimeout((function(){setTimeout((function(){g.setStatus("")}),1),t()}),1)):t())}}if(g.dynCall_jiji=function(e,t,i,n,I){return(g.dynCall_jiji=Kt.sa)(e,t,i,n,I)},g.dynCall_viijii=function(e,t,i,n,I,o,C){return(g.dynCall_viijii=Kt.ta)(e,t,i,n,I,o,C)},g.dynCall_iiiiij=function(e,t,i,n,I,o,C){return(g.dynCall_iiiiij=Kt.ua)(e,t,i,n,I,o,C)},g.dynCall_iiiiijj=function(e,t,i,n,I,o,C,r,a){return(g.dynCall_iiiiijj=Kt.va)(e,t,i,n,I,o,C,r,a)},g.dynCall_iiiiiijj=function(e,t,i,n,I,o,C,r,a,s){return(g.dynCall_iiiiiijj=Kt.wa)(e,t,i,n,I,o,C,r,a,s)},H=function e(){Lt||xt(),Lt||(H=e)},g.preInit)for("function"==typeof g.preInit&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();return xt(),n}),H=function(){function e(){throw b(this,e),new Error("RendererLoader is a static class and cannot be instantiated.")}var t,i,g;return y(e,null,[{key:"_tryLoad",value:(g=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X({locateFile:function(){return t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)})},{key:"_loadWithBackup",value:(i=r(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._ModulePromise||(this._ModulePromise=this._tryLoad(this._wasmURL).catch(function(){var e=r(regeneratorRuntime.mark((function e(i){var g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g="https://unpkg.com/".concat(k,"@").concat("0.30.2","/dist/dotlottie-player.wasm"),console.warn("Primary WASM load failed from ".concat(t._wasmURL,". Error: ").concat(i.message)),console.warn("Attempting to load WASM from backup URL: ".concat(g)),e.prev=2,e.next=5,t._tryLoad(g);case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),console.error("Primary WASM URL failed: ".concat(i.message)),console.error("Backup WASM URL failed: ".concat(e.t0.message)),new Error("WASM loading failed from all sources.");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}())),this._ModulePromise));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"load",value:(t=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._loadWithBackup());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setWasmUrl",value:function(e){this._wasmURL=e,this._ModulePromise=null}}]),e}();S(H,"_ModulePromise",null),S(H,"_wasmURL","https://cdn.jsdelivr.net/npm/".concat(k,"@").concat("0.30.2","/dist/dotlottie-player.wasm"));var L=function(){function e(){b(this,e),S(this,"_eventListeners",new Map)}return y(e,[{key:"addEventListener",value:function(e,t){var i=this._eventListeners.get(e);i||(i=new Set,this._eventListeners.set(e,i)),i.add(t)}},{key:"removeEventListener",value:function(e,t){var i=this._eventListeners.get(e);i&&(t?(i.delete(t),0===i.size&&this._eventListeners.delete(e)):this._eventListeners.delete(e))}},{key:"dispatch",value:function(e){var t;null===(t=this._eventListeners.get(e.type))||void 0===t||t.forEach((function(t){return t(e)}))}},{key:"removeAllEventListeners",value:function(){this._eventListeners.clear()}}]),e}();function E(e){if(!function(e){return/^#([0-9a-f]{6}|[0-9a-f]{8})$/i.test(e)}(e))return 0;var t=e.replace("#","");return t=6===t.length?"".concat(t,"ff"):t,parseInt(t,16)}function N(e){if(e.byteLength<4)return!1;for(var t=new Uint8Array(e.slice(0,V.byteLength)),i=0;i<V.length;i+=1)if(V[i]!==t[i])return!1;return!0}function F(e){return R.every((function(t){return Object.prototype.hasOwnProperty.call(e,t)}))}function _(e){if("string"!=typeof e)return F(e);try{return F(JSON.parse(e))}catch(e){return!1}}var T=function(e,t){return"reverse"===e?t.Mode.Reverse:"bounce"===e?t.Mode.Bounce:"reverse-bounce"===e?t.Mode.ReverseBounce:t.Mode.Forward},D=function(e,t){return"contain"===e?t.Fit.Contain:"cover"===e?t.Fit.Cover:"fill"===e?t.Fit.Fill:"fit-height"===e?t.Fit.FitHeight:"fit-width"===e?t.Fit.FitWidth:t.Fit.None},M=function(e,t){var i=new t.VectorFloat;return i.push_back(e[0]),i.push_back(e[1]),i},O=function(e,t){var i=new t.VectorFloat;return 2!==e.length||(i.push_back(e[0]),i.push_back(e[1])),i},P=function(){function e(t){var i,g=this;b(this,e),S(this,"_canvas"),S(this,"_context",null),S(this,"_eventManager"),S(this,"_animationFrameId",null),S(this,"_frameManager"),S(this,"_dotLottieCore",null),S(this,"_renderConfig",{}),S(this,"_isFrozen",!1),S(this,"_backgroundColor",null),S(this,"_pointerUpMethod"),S(this,"_pointerDownMethod"),S(this,"_pointerMoveMethod"),S(this,"_pointerEnterMethod"),S(this,"_pointerExitMethod"),S(this,"_onCompleteMethod"),this._canvas=t.canvas,this._context=this._canvas.getContext("2d"),this._eventManager=new L,this._frameManager=new K,this._renderConfig=null!==(i=t.renderConfig)&&void 0!==i?i:{},H.load().then((function(i){var n,I,o,C,r,a,s;e._wasmModule=i,g._dotLottieCore=new i.DotLottiePlayer({autoplay:null!==(n=t.autoplay)&&void 0!==n&&n,backgroundColor:0,loopAnimation:null!==(I=t.loop)&&void 0!==I&&I,mode:T(null!==(o=t.mode)&&void 0!==o?o:"forward",i),segment:O(null!==(C=t.segment)&&void 0!==C?C:[],i),speed:null!==(r=t.speed)&&void 0!==r?r:1,useFrameInterpolation:null===(a=t.useFrameInterpolation)||void 0===a||a,marker:null!==(s=t.marker)&&void 0!==s?s:"",layout:t.layout?{align:M(t.layout.align,i),fit:D(t.layout.fit,i)}:i.createDefaultLayout()}),g._eventManager.dispatch({type:"ready"}),t.data?g._loadFromData(t.data):t.src&&g._loadFromSrc(t.src),t.backgroundColor&&g.setBackgroundColor(t.backgroundColor)})).catch((function(e){g._eventManager.dispatch({type:"loadError",error:new Error("Failed to load wasm module: ".concat(e))})})),this._pointerUpMethod=this._onPointerUp.bind(this),this._pointerDownMethod=this._onPointerDown.bind(this),this._pointerMoveMethod=this._onPointerMove.bind(this),this._pointerEnterMethod=this._onPointerEnter.bind(this),this._pointerExitMethod=this._onPointerLeave.bind(this),this._onCompleteMethod=this._onComplete.bind(this)}var t;return y(e,[{key:"_dispatchError",value:function(e){console.error(e),this._eventManager.dispatch({type:"loadError",error:new Error(e)})}},{key:"_fetchData",value:(t=r(regeneratorRuntime.mark((function e(t){var i,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((i=e.sent).ok){e.next=5;break}throw new Error("Failed to fetch animation data from URL: ".concat(t,". ").concat(i.status,": ").concat(i.statusText));case 5:return e.next=7,i.arrayBuffer();case 7:return g=e.sent,e.abrupt("return",N(g)?g:(new TextDecoder).decode(g));case 9:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"_loadFromData",value:function(e){if(null!==this._dotLottieCore){var t=this._canvas.width,i=this._canvas.height,g=!1;if("string"==typeof e){if(!_(e))return void this._dispatchError("Invalid Lottie JSON string: The provided string does not conform to the Lottie JSON format.");g=this._dotLottieCore.loadAnimationData(e,t,i)}else if(e instanceof ArrayBuffer){if(!N(e))return void this._dispatchError("Invalid dotLottie ArrayBuffer: The provided ArrayBuffer does not conform to the dotLottie format.");g=this._dotLottieCore.loadDotLottieData(e,t,i)}else{if("object"!=v(e))return void this._dispatchError("Unsupported data type for animation data. Expected: \n          - string (Lottie JSON),\n          - ArrayBuffer (dotLottie),\n          - object (Lottie JSON). \n          Received: ".concat(v(e)));if(!_(e))return void this._dispatchError("Invalid Lottie JSON object: The provided object does not conform to the Lottie JSON format.");g=this._dotLottieCore.loadAnimationData(JSON.stringify(e),t,i)}g?(this._eventManager.dispatch({type:"load"}),Y&&this.resize(),this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._dotLottieCore.config().autoplay&&(this._dotLottieCore.play(),this._dotLottieCore.isPlaying()?(this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))):console.error("something went wrong, the animation was suppose to autoplay"))):this._dispatchError("Failed to load animation data")}}},{key:"_loadFromSrc",value:function(e){var t=this;this._fetchData(e).then((function(e){return t._loadFromData(e)})).catch((function(i){return t._dispatchError("Failed to load animation data from URL: ".concat(e,". ").concat(i))}))}},{key:"activeAnimationId",get:function(){var e;return null===(e=this._dotLottieCore)||void 0===e?void 0:e.activeAnimationId()}},{key:"activeThemeId",get:function(){var e;return null===(e=this._dotLottieCore)||void 0===e?void 0:e.activeThemeId()}},{key:"layout",get:function(){var t,i=null===(t=this._dotLottieCore)||void 0===t?void 0:t.config().layout;if(i)return{align:[i.align.get(0),i.align.get(1)],fit:function(){var t,g,n,I,o,C;switch(i.fit){case null===(t=e._wasmModule)||void 0===t?void 0:t.Fit.Contain:return"contain";case null===(g=e._wasmModule)||void 0===g?void 0:g.Fit.Cover:return"cover";case null===(n=e._wasmModule)||void 0===n?void 0:n.Fit.Fill:return"fill";case null===(I=e._wasmModule)||void 0===I?void 0:I.Fit.FitHeight:return"fit-height";case null===(o=e._wasmModule)||void 0===o?void 0:o.Fit.FitWidth:return"fit-width";case null===(C=e._wasmModule)||void 0===C?void 0:C.Fit.None:return"none";default:return"contain"}}()}}},{key:"marker",get:function(){var e;return null===(e=this._dotLottieCore)||void 0===e?void 0:e.config().marker}},{key:"manifest",get:function(){try{var e,t=null===(e=this._dotLottieCore)||void 0===e?void 0:e.manifestString();if(null===this._dotLottieCore||!t)return null;var i=JSON.parse(t);return 0===Object.keys(i).length?null:i}catch(e){return null}}},{key:"renderConfig",get:function(){return this._renderConfig}},{key:"segment",get:function(){var e,t=null===(e=this._dotLottieCore)||void 0===e?void 0:e.config().segment;if(t&&2===t.size())return[t.get(0),t.get(1)]}},{key:"loop",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.config().loopAnimation)&&void 0!==e&&e}},{key:"mode",get:function(){var t,i,g,n,I=null===(t=this._dotLottieCore)||void 0===t?void 0:t.config().mode;return I===(null===(i=e._wasmModule)||void 0===i?void 0:i.Mode.Reverse)?"reverse":I===(null===(g=e._wasmModule)||void 0===g?void 0:g.Mode.Bounce)?"bounce":I===(null===(n=e._wasmModule)||void 0===n?void 0:n.Mode.ReverseBounce)?"reverse-bounce":"forward"}},{key:"isFrozen",get:function(){return this._isFrozen}},{key:"backgroundColor",get:function(){var e;return null!==(e=this._backgroundColor)&&void 0!==e?e:""}},{key:"autoplay",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.config().autoplay)&&void 0!==e&&e}},{key:"useFrameInterpolation",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.config().useFrameInterpolation)&&void 0!==e&&e}},{key:"speed",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.config().speed)&&void 0!==e?e:0}},{key:"isReady",get:function(){return null!==this._dotLottieCore}},{key:"isLoaded",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.isLoaded())&&void 0!==e&&e}},{key:"isPlaying",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.isPlaying())&&void 0!==e&&e}},{key:"isPaused",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.isPaused())&&void 0!==e&&e}},{key:"isStopped",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.isStopped())&&void 0!==e&&e}},{key:"currentFrame",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.currentFrame())&&void 0!==e?e:0}},{key:"loopCount",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.loopCount())&&void 0!==e?e:0}},{key:"totalFrames",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.totalFrames())&&void 0!==e?e:0}},{key:"duration",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.duration())&&void 0!==e?e:0}},{key:"segmentDuration",get:function(){var e,t;return null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.segmentDuration())&&void 0!==e?e:0}},{key:"canvas",get:function(){return this._canvas}},{key:"load",value:function(t){var i,g,n,I,o,C,r,a;null===this._dotLottieCore||null===e._wasmModule||(this._dotLottieCore.setConfig({autoplay:null!==(i=t.autoplay)&&void 0!==i&&i,backgroundColor:0,loopAnimation:null!==(g=t.loop)&&void 0!==g&&g,mode:T(null!==(n=t.mode)&&void 0!==n?n:"forward",e._wasmModule),segment:O(null!==(I=t.segment)&&void 0!==I?I:[],e._wasmModule),speed:null!==(o=t.speed)&&void 0!==o?o:1,useFrameInterpolation:null===(C=t.useFrameInterpolation)||void 0===C||C,marker:null!==(r=t.marker)&&void 0!==r?r:"",layout:t.layout?{align:M(t.layout.align,e._wasmModule),fit:D(t.layout.fit,e._wasmModule)}:e._wasmModule.createDefaultLayout()}),t.data?this._loadFromData(t.data):t.src&&this._loadFromSrc(t.src),this.setBackgroundColor(null!==(a=t.backgroundColor)&&void 0!==a?a:""))}},{key:"_render",value:function(){if(null===this._dotLottieCore||null===this._context)return!1;if(this._dotLottieCore.render()){var e=this._dotLottieCore.buffer(),t=new Uint8ClampedArray(e,0,this._canvas.width*this._canvas.height*4),i=null;return("undefined"==typeof ImageData?"undefined":v(ImageData))>"u"?(i=this._context.createImageData(this._canvas.width,this._canvas.height)).data.set(t):i=new ImageData(t,this._canvas.width,this._canvas.height),this._context.putImageData(i,0,0),this._eventManager.dispatch({type:"render",currentFrame:this._dotLottieCore.currentFrame()}),!0}return!1}},{key:"_draw",value:function(){if(null!==this._dotLottieCore&&null!==this._context&&this._dotLottieCore.isPlaying()){var e=this._dotLottieCore.requestFrame();this._dotLottieCore.setFrame(e)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render()&&this._dotLottieCore.isComplete()&&(this._dotLottieCore.config().loopAnimation?this._eventManager.dispatch({type:"loop",loopCount:this._dotLottieCore.loopCount()}):this._eventManager.dispatch({type:"complete"}))),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))}}},{key:"play",value:function(){null!==this._dotLottieCore&&(this._dotLottieCore.play()||this._dotLottieCore.isPlaying())&&(this._isFrozen=!1,this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)))}},{key:"pause",value:function(){null!==this._dotLottieCore&&(this._dotLottieCore.pause()||this._dotLottieCore.isPaused())&&this._eventManager.dispatch({type:"pause"})}},{key:"stop",value:function(){null!==this._dotLottieCore&&this._dotLottieCore.stop()&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._eventManager.dispatch({type:"stop"}))}},{key:"setFrame",value:function(e){null===this._dotLottieCore||e<0||e>this._dotLottieCore.totalFrames()||this._dotLottieCore.seek(e)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render())}},{key:"setSpeed",value:function(e){null!==this._dotLottieCore&&this._dotLottieCore.setConfig(I(I({},this._dotLottieCore.config()),{},{speed:e}))}},{key:"setBackgroundColor",value:function(e){null!==this._dotLottieCore&&(Y&&this._canvas instanceof HTMLCanvasElement?this._canvas.style.backgroundColor=e:this._dotLottieCore.setConfig(I(I({},this._dotLottieCore.config()),{},{backgroundColor:E(e)})),this._backgroundColor=e)}},{key:"setLoop",value:function(e){null!==this._dotLottieCore&&this._dotLottieCore.setConfig(I(I({},this._dotLottieCore.config()),{},{loopAnimation:e}))}},{key:"setUseFrameInterpolation",value:function(e){null!==this._dotLottieCore&&this._dotLottieCore.setConfig(I(I({},this._dotLottieCore.config()),{},{useFrameInterpolation:e}))}},{key:"addEventListener",value:function(e,t){this._eventManager.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this._eventManager.removeEventListener(e,t)}},{key:"destroy",value:function(){var e;null!==(e=this._dotLottieCore)&&void 0!==e&&e.delete(),this._dotLottieCore=null,this._context=null,this._eventManager.dispatch({type:"destroy"}),this._eventManager.removeAllEventListeners(),this._cleanupStateMachineListeners()}},{key:"freeze",value:function(){null!==this._animationFrameId&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this._isFrozen=!0,this._eventManager.dispatch({type:"freeze"}))}},{key:"unfreeze",value:function(){null===this._animationFrameId&&(this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)),this._isFrozen=!1,this._eventManager.dispatch({type:"unfreeze"}))}},{key:"resize",value:function(){var e;if(Y&&this._canvas instanceof HTMLCanvasElement){var t=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,i=this._canvas.getBoundingClientRect(),g=i.height,n=i.width;this._canvas.width=n*t,this._canvas.height=g*t}(null===(e=this._dotLottieCore)||void 0===e?void 0:e.resize(this._canvas.width,this._canvas.height))&&this._render()}},{key:"setSegment",value:function(t,i){null===this._dotLottieCore||null===e._wasmModule||this._dotLottieCore.setConfig(I(I({},this._dotLottieCore.config()),{},{segment:O([t,i],e._wasmModule)}))}},{key:"setMode",value:function(t){null===this._dotLottieCore||null===e._wasmModule||this._dotLottieCore.setConfig(I(I({},this._dotLottieCore.config()),{},{mode:T(t,e._wasmModule)}))}},{key:"setRenderConfig",value:function(e){this._renderConfig=e}},{key:"loadAnimation",value:function(e){null!==this._dotLottieCore&&this._dotLottieCore.activeAnimationId()!==e&&(this._dotLottieCore.loadAnimation(e,this._canvas.width,this._canvas.height)?(this._eventManager.dispatch({type:"load"}),this.resize()):this._eventManager.dispatch({type:"loadError",error:new Error("Failed to animation :".concat(e))}))}},{key:"setMarker",value:function(e){null!==this._dotLottieCore&&this._dotLottieCore.setConfig(I(I({},this._dotLottieCore.config()),{},{marker:e}))}},{key:"markers",value:function(){var e,t=null===(e=this._dotLottieCore)||void 0===e?void 0:e.markers();if(t){for(var i=[],g=0;g<t.size();g+=1){var n=t.get(g);i.push({name:n.name,time:n.time,duration:n.duration})}return i}return[]}},{key:"loadTheme",value:function(e){if(null===this._dotLottieCore)return!1;var t=this._dotLottieCore.loadTheme(e);return this._render(),t}},{key:"loadThemeData",value:function(e){if(null===this._dotLottieCore)return!1;var t=this._dotLottieCore.loadThemeData(e);return this._render(),t}},{key:"setLayout",value:function(t){null===this._dotLottieCore||null===e._wasmModule||this._dotLottieCore.setConfig(I(I({},this._dotLottieCore.config()),{},{layout:{align:M(t.align,e._wasmModule),fit:D(t.fit,e._wasmModule)}}))}},{key:"setViewport",value:function(e,t,i,g){return null!==this._dotLottieCore&&this._dotLottieCore.setViewport(e,t,i,g)}},{key:"loadStateMachine",value:function(e){var t,i;return null!==(t=null===(i=this._dotLottieCore)||void 0===i?void 0:i.loadStateMachine(e))&&void 0!==t&&t}},{key:"startStateMachine",value:function(){var e,t,i=null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.startStateMachine())&&void 0!==e&&e;return i&&this._setupStateMachineListeners(),i}},{key:"stopStateMachine",value:function(){var e,t,i=null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.stopStateMachine())&&void 0!==e&&e;return i&&this._cleanupStateMachineListeners(),i}},{key:"_getPointerPosition",value:function(e){var t=this._canvas.getBoundingClientRect(),i=this._canvas.width/t.width,g=this._canvas.height/t.height,n=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1;return{x:(e.clientX-t.left)*i/n,y:(e.clientY-t.top)*g/n}}},{key:"_onPointerUp",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerUp: ".concat(i," ").concat(g))}},{key:"_onPointerDown",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerDown: ".concat(i," ").concat(g))}},{key:"_onPointerMove",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerMove: ".concat(i," ").concat(g))}},{key:"_onPointerEnter",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerEnter: ".concat(i," ").concat(g))}},{key:"_onPointerLeave",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerExit: ".concat(i," ").concat(g))}},{key:"_onComplete",value:function(){this.postStateMachineEvent("OnComplete")}},{key:"postStateMachineEvent",value:function(e){var t,i,g=null!==(t=null===(i=this._dotLottieCore)||void 0===i?void 0:i.postEventPayload(e))&&void 0!==t?t:1;return 2===g?this.play():3===g?this.pause():4===g&&this._render(),g}},{key:"getStateMachineListeners",value:function(){if(!this._dotLottieCore)return[];for(var e=this._dotLottieCore.stateMachineFrameworkSetup(),t=[],i=0;i<e.size();i+=1)t.push(e.get(i));return t}},{key:"_setupStateMachineListeners",value:function(){if(Y&&this._canvas instanceof HTMLCanvasElement&&null!==this._dotLottieCore&&this.isLoaded){var e=this.getStateMachineListeners();e.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._pointerUpMethod),e.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._pointerDownMethod),e.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._pointerMoveMethod),e.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._pointerEnterMethod),e.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._pointerExitMethod),e.includes("Complete")&&this.addEventListener("complete",this._onCompleteMethod)}}},{key:"_cleanupStateMachineListeners",value:function(){Y&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._pointerUpMethod),this._canvas.removeEventListener("pointerdown",this._pointerDownMethod),this._canvas.removeEventListener("pointermove",this._pointerMoveMethod),this._canvas.removeEventListener("pointerenter",this._pointerEnterMethod),this._canvas.removeEventListener("pointerleave",this._pointerExitMethod),this.removeEventListener("complete",this._onCompleteMethod))}},{key:"loadStateMachineData",value:function(e){var t,i;return null!==(t=null===(i=this._dotLottieCore)||void 0===i?void 0:i.loadStateMachineData(e))&&void 0!==t&&t}},{key:"animationSize",value:function(){var e,t,i,g;return{width:null!==(e=null===(t=this._dotLottieCore)||void 0===t?void 0:t.animationSize().get(0))&&void 0!==e?e:0,height:null!==(i=null===(g=this._dotLottieCore)||void 0===g?void 0:g.animationSize().get(1))&&void 0!==i?i:0}}},{key:"setStateMachineBooleanContext",value:function(e,t){var i,g;return null!==(i=null===(g=this._dotLottieCore)||void 0===g?void 0:g.setStateMachineBooleanContext(e,t))&&void 0!==i&&i}},{key:"setStateMachineNumericContext",value:function(e,t){var i,g;return null!==(i=null===(g=this._dotLottieCore)||void 0===g?void 0:g.setStateMachineNumericContext(e,t))&&void 0!==i&&i}},{key:"setStateMachineStringContext",value:function(e,t){var i,g;return null!==(i=null===(g=this._dotLottieCore)||void 0===g?void 0:g.setStateMachineStringContext(e,t))&&void 0!==i&&i}}],[{key:"setWasmUrl",value:function(e){H.setWasmUrl(e)}}]),e}();S(P,"_wasmModule",null);var J=P,j=function(e){a(i,e);var t=s(i);function i(){return b(this,i),t.call(this,"data:application/javascript;base64,InVzZSBzdHJpY3QiOwooKCkgPT4gewogIHZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgdmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlOwogIHZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gInN5bWJvbCIgPyBrZXkgKyAiIiA6IGtleSwgdmFsdWUpOwoKICAvLyBzcmMvYW5pbWF0aW9uLWZyYW1lLW1hbmFnZXIudHMKICB2YXIgV2ViQW5pbWF0aW9uRnJhbWVTdHJhdGVneSA9IGNsYXNzIHsKICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaykgewogICAgICByZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTsKICAgIH0KICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKSB7CiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTsKICAgIH0KICB9OwogIHZhciBOb2RlQW5pbWF0aW9uRnJhbWVTdHJhdGVneSA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfbGFzdEhhbmRsZUlkIiwgMCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9sYXN0SW1tZWRpYXRlIiwgbnVsbCk7CiAgICB9CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHsKICAgICAgaWYgKHRoaXMuX2xhc3RIYW5kbGVJZCA+PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgewogICAgICAgIHRoaXMuX2xhc3RIYW5kbGVJZCA9IDA7CiAgICAgIH0KICAgICAgdGhpcy5fbGFzdEhhbmRsZUlkICs9IDE7CiAgICAgIHRoaXMuX2xhc3RJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGUoKCkgPT4gewogICAgICAgIGNhbGxiYWNrKERhdGUubm93KCkpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMuX2xhc3RIYW5kbGVJZDsKICAgIH0KICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKF9pZCkgewogICAgICBpZiAodGhpcy5fbGFzdEltbWVkaWF0ZSkgewogICAgICAgIGNsZWFySW1tZWRpYXRlKHRoaXMuX2xhc3RJbW1lZGlhdGUpOwogICAgICB9CiAgICB9CiAgfTsKICB2YXIgQW5pbWF0aW9uRnJhbWVNYW5hZ2VyID0gY2xhc3MgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9zdHJhdGVneSIpOwogICAgICB0aGlzLl9zdHJhdGVneSA9IHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09ICJmdW5jdGlvbiIgPyBuZXcgV2ViQW5pbWF0aW9uRnJhbWVTdHJhdGVneSgpIDogbmV3IE5vZGVBbmltYXRpb25GcmFtZVN0cmF0ZWd5KCk7CiAgICB9CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHsKICAgICAgcmV0dXJuIHRoaXMuX3N0cmF0ZWd5LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7CiAgICB9CiAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCkgewogICAgICB0aGlzLl9zdHJhdGVneS5jYW5jZWxBbmltYXRpb25GcmFtZShpZCk7CiAgICB9CiAgfTsKCiAgLy8gc3JjL2NvbnN0YW50cy50cwogIHZhciBJU19CUk9XU0VSID0gdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gInVuZGVmaW5lZCI7CiAgdmFyIFpJUF9TSUdOQVRVUkUgPSBuZXcgVWludDhBcnJheShbODAsIDc1LCAzLCA0XSk7CiAgdmFyIExPVFRJRV9KU09OX01BTkRBVE9SWV9GSUVMRFMgPSBbInYiLCAiaXAiLCAib3AiLCAibGF5ZXJzIiwgImZyIiwgInciLCAiaCJdOwogIHZhciBQQUNLQUdFX1ZFUlNJT04gPSAiMC4zMC4yIjsKICB2YXIgUEFDS0FHRV9OQU1FID0gIkBsb3R0aWVmaWxlcy9kb3Rsb3R0aWUtd2ViIjsKCiAgLy8gc3JjL2NvcmUvZG90bG90dGllLXBsYXllci5qcwogIHZhciBjcmVhdGVEb3RMb3R0aWVQbGF5ZXJNb2R1bGUgPSAoKCkgPT4gewogICAgdmFyIF9zY3JpcHREaXIgPSB0eXBlb2YgZG9jdW1lbnQgIT0gInVuZGVmaW5lZCIgPyBkb2N1bWVudC5jdXJyZW50U2NyaXB0Py5zcmMgOiB2b2lkIDA7CiAgICByZXR1cm4gZnVuY3Rpb24obW9kdWxlQXJnID0ge30pIHsKICAgICAgdmFyIGsgPSBtb2R1bGVBcmcsIGFhLCBiYSwgcmVhZHlQcm9taXNlID0gbmV3IFByb21pc2UoKGEsIGIpID0+IHsKICAgICAgICBhYSA9IGE7CiAgICAgICAgYmEgPSBiOwogICAgICB9KSwgY2EgPSBPYmplY3QuYXNzaWduKHt9LCBrKSwgZGEgPSAiLi90aGlzLnByb2dyYW0iLCB0ID0gIiI7CiAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBkb2N1bWVudCAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmICh0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpOwogICAgICBfc2NyaXB0RGlyICYmICh0ID0gX3NjcmlwdERpcik7CiAgICAgIHQuc3RhcnRzV2l0aCgiYmxvYjoiKSA/IHQgPSAiIiA6IHQgPSB0LnN1YnN0cigwLCB0LnJlcGxhY2UoL1s/I10uKi8sICIiKS5sYXN0SW5kZXhPZigiLyIpICsgMSk7CiAgICAgIHZhciBlYSA9IGsucHJpbnQgfHwgY29uc29sZS5sb2cuYmluZChjb25zb2xlKSwgdyA9IGsucHJpbnRFcnIgfHwgY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpOwogICAgICBPYmplY3QuYXNzaWduKGssIGNhKTsKICAgICAgY2EgPSBudWxsOwogICAgICBrLnRoaXNQcm9ncmFtICYmIChkYSA9IGsudGhpc1Byb2dyYW0pOwogICAgICB2YXIgeDsKICAgICAgay53YXNtQmluYXJ5ICYmICh4ID0gay53YXNtQmluYXJ5KTsKICAgICAgdmFyIGZhLCBoYSA9IGZhbHNlLCB5LCBBLCBCLCBDLCBFLCBGLCBqYSwga2E7CiAgICAgIGZ1bmN0aW9uIGxhKCkgewogICAgICAgIHZhciBhID0gZmEuYnVmZmVyOwogICAgICAgIGsuSEVBUDggPSB5ID0gbmV3IEludDhBcnJheShhKTsKICAgICAgICBrLkhFQVAxNiA9IEIgPSBuZXcgSW50MTZBcnJheShhKTsKICAgICAgICBrLkhFQVBVOCA9IEEgPSBuZXcgVWludDhBcnJheShhKTsKICAgICAgICBrLkhFQVBVMTYgPSBDID0gbmV3IFVpbnQxNkFycmF5KGEpOwogICAgICAgIGsuSEVBUDMyID0gRSA9IG5ldyBJbnQzMkFycmF5KGEpOwogICAgICAgIGsuSEVBUFUzMiA9IEYgPSBuZXcgVWludDMyQXJyYXkoYSk7CiAgICAgICAgay5IRUFQRjMyID0gamEgPSBuZXcgRmxvYXQzMkFycmF5KGEpOwogICAgICAgIGsuSEVBUEY2NCA9IGthID0gbmV3IEZsb2F0NjRBcnJheShhKTsKICAgICAgfQogICAgICB2YXIgbWEgPSBbXSwgbmEgPSBbXSwgb2EgPSBbXTsKICAgICAgZnVuY3Rpb24gcGEoKSB7CiAgICAgICAgdmFyIGEgPSBrLnByZVJ1bi5zaGlmdCgpOwogICAgICAgIG1hLnVuc2hpZnQoYSk7CiAgICAgIH0KICAgICAgdmFyIEcgPSAwLCBxYSA9IG51bGwsIEggPSBudWxsOwogICAgICBmdW5jdGlvbiByYShhKSB7CiAgICAgICAgay5vbkFib3J0Py4oYSk7CiAgICAgICAgYSA9ICJBYm9ydGVkKCIgKyBhICsgIikiOwogICAgICAgIHcoYSk7CiAgICAgICAgaGEgPSB0cnVlOwogICAgICAgIGEgPSBuZXcgV2ViQXNzZW1ibHkuUnVudGltZUVycm9yKGEgKyAiLiBCdWlsZCB3aXRoIC1zQVNTRVJUSU9OUyBmb3IgbW9yZSBpbmZvLiIpOwogICAgICAgIGJhKGEpOwogICAgICAgIHRocm93IGE7CiAgICAgIH0KICAgICAgdmFyIHNhID0gKGEpID0+IGEuc3RhcnRzV2l0aCgiZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCIpLCBJOwogICAgICBJID0gIkRvdExvdHRpZVBsYXllci53YXNtIjsKICAgICAgaWYgKCFzYShJKSkgewogICAgICAgIHZhciB0YSA9IEk7CiAgICAgICAgSSA9IGsubG9jYXRlRmlsZSA/IGsubG9jYXRlRmlsZSh0YSwgdCkgOiB0ICsgdGE7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdWEoYSkgewogICAgICAgIGlmIChhID09IEkgJiYgeCkgcmV0dXJuIG5ldyBVaW50OEFycmF5KHgpOwogICAgICAgIHRocm93ICJib3RoIGFzeW5jIGFuZCBzeW5jIGZldGNoaW5nIG9mIHRoZSB3YXNtIGZhaWxlZCI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdmEoYSkgewogICAgICAgIHJldHVybiB4IHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIGZldGNoID8gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB1YShhKSkgOiBmZXRjaChhLCB7IGNyZWRlbnRpYWxzOiAic2FtZS1vcmlnaW4iIH0pLnRoZW4oKGIpID0+IHsKICAgICAgICAgIGlmICghYi5vaykgdGhyb3cgYGZhaWxlZCB0byBsb2FkIHdhc20gYmluYXJ5IGZpbGUgYXQgJyR7YX0nYDsKICAgICAgICAgIHJldHVybiBiLmFycmF5QnVmZmVyKCk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gdWEoYSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdhKGEsIGIsIGMpIHsKICAgICAgICByZXR1cm4gdmEoYSkudGhlbigoZCkgPT4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoZCwgYikpLnRoZW4oYywgKGQpID0+IHsKICAgICAgICAgIHcoYGZhaWxlZCB0byBhc3luY2hyb25vdXNseSBwcmVwYXJlIHdhc206ICR7ZH1gKTsKICAgICAgICAgIHJhKGQpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHhhKGEsIGIpIHsKICAgICAgICB2YXIgYyA9IEk7CiAgICAgICAgcmV0dXJuIHggfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcgfHwgc2EoYykgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgZmV0Y2ggPyB3YShjLCBhLCBiKSA6IGZldGNoKGMsIHsgY3JlZGVudGlhbHM6ICJzYW1lLW9yaWdpbiIgfSkudGhlbigKICAgICAgICAgIChkKSA9PiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhkLCBhKS50aGVuKGIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdyhgd2FzbSBzdHJlYW1pbmcgY29tcGlsZSBmYWlsZWQ6ICR7ZX1gKTsKICAgICAgICAgICAgdygiZmFsbGluZyBiYWNrIHRvIEFycmF5QnVmZmVyIGluc3RhbnRpYXRpb24iKTsKICAgICAgICAgICAgcmV0dXJuIHdhKGMsIGEsIGIpOwogICAgICAgICAgfSkKICAgICAgICApOwogICAgICB9CiAgICAgIHZhciB5YSA9IChhKSA9PiB7CiAgICAgICAgZm9yICg7IDAgPCBhLmxlbmd0aDsgKSBhLnNoaWZ0KCkoayk7CiAgICAgIH0sIHphID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFRleHREZWNvZGVyID8gbmV3IFRleHREZWNvZGVyKCJ1dGY4IikgOiB2b2lkIDAsIEogPSAoYSwgYiwgYykgPT4gewogICAgICAgIHZhciBkID0gYiArIGM7CiAgICAgICAgZm9yIChjID0gYjsgYVtjXSAmJiAhKGMgPj0gZCk7ICkgKytjOwogICAgICAgIGlmICgxNiA8IGMgLSBiICYmIGEuYnVmZmVyICYmIHphKSByZXR1cm4gemEuZGVjb2RlKGEuc3ViYXJyYXkoYiwgYykpOwogICAgICAgIGZvciAoZCA9ICIiOyBiIDwgYzsgKSB7CiAgICAgICAgICB2YXIgZSA9IGFbYisrXTsKICAgICAgICAgIGlmIChlICYgMTI4KSB7CiAgICAgICAgICAgIHZhciBmID0gYVtiKytdICYgNjM7CiAgICAgICAgICAgIGlmICgxOTIgPT0gKGUgJiAyMjQpKSBkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGUgJiAzMSkgPDwgNiB8IGYpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB2YXIgbCA9IGFbYisrXSAmIDYzOwogICAgICAgICAgICAgIGUgPSAyMjQgPT0gKGUgJiAyNDApID8gKGUgJiAxNSkgPDwgMTIgfCBmIDw8IDYgfCBsIDogKGUgJiA3KSA8PCAxOCB8IGYgPDwgMTIgfCBsIDw8IDYgfCBhW2IrK10gJiA2MzsKICAgICAgICAgICAgICA2NTUzNiA+IGUgPyBkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZSkgOiAoZSAtPSA2NTUzNiwgZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2IHwgZSA+PiAxMCwgNTYzMjAgfCBlICYgMTAyMykpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZDsKICAgICAgfTsKICAgICAgY2xhc3MgQWEgewogICAgICAgIGNvbnN0cnVjdG9yKGEpIHsKICAgICAgICAgIHRoaXMueWEgPSBhIC0gMjQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBCYSA9IDAsIENhID0gMCwgRGEgPSAoYSkgPT4gewogICAgICAgIGZvciAodmFyIGIgPSAwLCBjID0gMDsgYyA8IGEubGVuZ3RoOyArK2MpIHsKICAgICAgICAgIHZhciBkID0gYS5jaGFyQ29kZUF0KGMpOwogICAgICAgICAgMTI3ID49IGQgPyBiKysgOiAyMDQ3ID49IGQgPyBiICs9IDIgOiA1NTI5NiA8PSBkICYmIDU3MzQzID49IGQgPyAoYiArPSA0LCArK2MpIDogYiArPSAzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYjsKICAgICAgfSwgRWEgPSAoYSwgYiwgYywgZCkgPT4gewogICAgICAgIGlmICgwIDwgZCkgewogICAgICAgICAgZCA9IGMgKyBkIC0gMTsKICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgYS5sZW5ndGg7ICsrZSkgewogICAgICAgICAgICB2YXIgZiA9IGEuY2hhckNvZGVBdChlKTsKICAgICAgICAgICAgaWYgKDU1Mjk2IDw9IGYgJiYgNTczNDMgPj0gZikgewogICAgICAgICAgICAgIHZhciBsID0gYS5jaGFyQ29kZUF0KCsrZSk7CiAgICAgICAgICAgICAgZiA9IDY1NTM2ICsgKChmICYgMTAyMykgPDwgMTApIHwgbCAmIDEwMjM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKDEyNyA+PSBmKSB7CiAgICAgICAgICAgICAgaWYgKGMgPj0gZCkgYnJlYWs7CiAgICAgICAgICAgICAgYltjKytdID0gZjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoMjA0NyA+PSBmKSB7CiAgICAgICAgICAgICAgICBpZiAoYyArIDEgPj0gZCkgYnJlYWs7CiAgICAgICAgICAgICAgICBiW2MrK10gPSAxOTIgfCBmID4+IDY7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICg2NTUzNSA+PSBmKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjICsgMiA+PSBkKSBicmVhazsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMjI0IHwgZiA+PiAxMjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChjICsgMyA+PSBkKSBicmVhazsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMjQwIHwgZiA+PiAxODsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMTI4IHwgZiA+PiAxMiAmIDYzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYltjKytdID0gMTI4IHwgZiA+PiA2ICYgNjM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJbYysrXSA9IDEyOCB8IGYgJiA2MzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYltjXSA9IDA7CiAgICAgICAgfQogICAgICB9LCBGYSA9IHt9LCBHYSA9IChhKSA9PiB7CiAgICAgICAgZm9yICg7IGEubGVuZ3RoOyApIHsKICAgICAgICAgIHZhciBiID0gYS5wb3AoKTsKICAgICAgICAgIGEucG9wKCkoYik7CiAgICAgICAgfQogICAgICB9OwogICAgICBmdW5jdGlvbiBLKGEpIHsKICAgICAgICByZXR1cm4gdGhpcy5mcm9tV2lyZVR5cGUoRlthID4+IDJdKTsKICAgICAgfQogICAgICB2YXIgTCA9IHt9LCBNID0ge30sIEhhID0ge30sIElhLCBQID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBmdW5jdGlvbiBkKGgpIHsKICAgICAgICAgIGggPSBjKGgpOwogICAgICAgICAgaWYgKGgubGVuZ3RoICE9PSBhLmxlbmd0aCkgdGhyb3cgbmV3IElhKCJNaXNtYXRjaGVkIHR5cGUgY29udmVydGVyIGNvdW50Iik7CiAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGEubGVuZ3RoOyArK24pIE8oYVtuXSwgaFtuXSk7CiAgICAgICAgfQogICAgICAgIGEuZm9yRWFjaChmdW5jdGlvbihoKSB7CiAgICAgICAgICBIYVtoXSA9IGI7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGUgPSBBcnJheShiLmxlbmd0aCksIGYgPSBbXSwgbCA9IDA7CiAgICAgICAgYi5mb3JFYWNoKChoLCBuKSA9PiB7CiAgICAgICAgICBNLmhhc093blByb3BlcnR5KGgpID8gZVtuXSA9IE1baF0gOiAoZi5wdXNoKGgpLCBMLmhhc093blByb3BlcnR5KGgpIHx8IChMW2hdID0gW10pLCBMW2hdLnB1c2goKCkgPT4gewogICAgICAgICAgICBlW25dID0gTVtoXTsKICAgICAgICAgICAgKytsOwogICAgICAgICAgICBsID09PSBmLmxlbmd0aCAmJiBkKGUpOwogICAgICAgICAgfSkpOwogICAgICAgIH0pOwogICAgICAgIDAgPT09IGYubGVuZ3RoICYmIGQoZSk7CiAgICAgIH0sIEphLCBRID0gKGEpID0+IHsKICAgICAgICBmb3IgKHZhciBiID0gIiI7IEFbYV07ICkgYiArPSBKYVtBW2ErK11dOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBSOwogICAgICBmdW5jdGlvbiBLYShhLCBiLCBjID0ge30pIHsKICAgICAgICB2YXIgZCA9IGIubmFtZTsKICAgICAgICBpZiAoIWEpIHRocm93IG5ldyBSKGB0eXBlICIke2R9IiBtdXN0IGhhdmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIHR5cGVpZCBwb2ludGVyYCk7CiAgICAgICAgaWYgKE0uaGFzT3duUHJvcGVydHkoYSkpIHsKICAgICAgICAgIGlmIChjLmliKSByZXR1cm47CiAgICAgICAgICB0aHJvdyBuZXcgUihgQ2Fubm90IHJlZ2lzdGVyIHR5cGUgJyR7ZH0nIHR3aWNlYCk7CiAgICAgICAgfQogICAgICAgIE1bYV0gPSBiOwogICAgICAgIGRlbGV0ZSBIYVthXTsKICAgICAgICBMLmhhc093blByb3BlcnR5KGEpICYmIChiID0gTFthXSwgZGVsZXRlIExbYV0sIGIuZm9yRWFjaCgoZSkgPT4gZSgpKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gTyhhLCBiLCBjID0ge30pIHsKICAgICAgICBpZiAoISgiYXJnUGFja0FkdmFuY2UiIGluIGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJyZWdpc3RlclR5cGUgcmVnaXN0ZXJlZEluc3RhbmNlIHJlcXVpcmVzIGFyZ1BhY2tBZHZhbmNlIik7CiAgICAgICAgcmV0dXJuIEthKGEsIGIsIGMpOwogICAgICB9CiAgICAgIHZhciBMYSA9IChhKSA9PiB7CiAgICAgICAgdGhyb3cgbmV3IFIoYS5tYS56YS54YS5uYW1lICsgIiBpbnN0YW5jZSBhbHJlYWR5IGRlbGV0ZWQiKTsKICAgICAgfSwgTWEgPSBmYWxzZSwgT2EgPSAoKSA9PiB7CiAgICAgIH0sIFBhID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAoYiA9PT0gYykgcmV0dXJuIGE7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gYy5DYSkgcmV0dXJuIG51bGw7CiAgICAgICAgYSA9IFBhKGEsIGIsIGMuQ2EpOwogICAgICAgIHJldHVybiBudWxsID09PSBhID8gbnVsbCA6IGMuYWIoYSk7CiAgICAgIH0sIFFhID0ge30sIFJhID0gW10sIFNhID0gKCkgPT4gewogICAgICAgIGZvciAoOyBSYS5sZW5ndGg7ICkgewogICAgICAgICAgdmFyIGEgPSBSYS5wb3AoKTsKICAgICAgICAgIGEubWEuS2EgPSBmYWxzZTsKICAgICAgICAgIGFbImRlbGV0ZSJdKCk7CiAgICAgICAgfQogICAgICB9LCBUYSwgVWEgPSB7fSwgVmEgPSAoYSwgYikgPT4gewogICAgICAgIGlmICh2b2lkIDAgPT09IGIpIHRocm93IG5ldyBSKCJwdHIgc2hvdWxkIG5vdCBiZSB1bmRlZmluZWQiKTsKICAgICAgICBmb3IgKDsgYS5DYTsgKSBiID0gYS5OYShiKSwgYSA9IGEuQ2E7CiAgICAgICAgcmV0dXJuIFVhW2JdOwogICAgICB9LCBYYSA9IChhLCBiKSA9PiB7CiAgICAgICAgaWYgKCFiLnphIHx8ICFiLnlhKSB0aHJvdyBuZXcgSWEoIm1ha2VDbGFzc0hhbmRsZSByZXF1aXJlcyBwdHIgYW5kIHB0clR5cGUiKTsKICAgICAgICBpZiAoISFiLkRhICE9PSAhIWIuQWEpIHRocm93IG5ldyBJYSgiQm90aCBzbWFydFB0clR5cGUgYW5kIHNtYXJ0UHRyIG11c3QgYmUgc3BlY2lmaWVkIik7CiAgICAgICAgYi5jb3VudCA9IHsgdmFsdWU6IDEgfTsKICAgICAgICByZXR1cm4gV2EoT2JqZWN0LmNyZWF0ZShhLCB7IG1hOiB7IHZhbHVlOiBiLCB3cml0YWJsZTogdHJ1ZSB9IH0pKTsKICAgICAgfSwgV2EgPSAoYSkgPT4gewogICAgICAgIGlmICgidW5kZWZpbmVkIiA9PT0gdHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5KSByZXR1cm4gV2EgPSAoYikgPT4gYiwgYTsKICAgICAgICBNYSA9IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeSgoYikgPT4gewogICAgICAgICAgYiA9IGIubWE7CiAgICAgICAgICAtLWIuY291bnQudmFsdWU7CiAgICAgICAgICAwID09PSBiLmNvdW50LnZhbHVlICYmIChiLkFhID8gYi5EYS5GYShiLkFhKSA6IGIuemEueGEuRmEoYi55YSkpOwogICAgICAgIH0pOwogICAgICAgIFdhID0gKGIpID0+IHsKICAgICAgICAgIHZhciBjID0gYi5tYTsKICAgICAgICAgIGMuQWEgJiYgTWEucmVnaXN0ZXIoYiwgeyBtYTogYyB9LCBiKTsKICAgICAgICAgIHJldHVybiBiOwogICAgICAgIH07CiAgICAgICAgT2EgPSAoYikgPT4gewogICAgICAgICAgTWEudW5yZWdpc3RlcihiKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBXYShhKTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gWWEoKSB7CiAgICAgIH0KICAgICAgdmFyIFphID0gKGEsIGIpID0+IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCAibmFtZSIsIHsgdmFsdWU6IGEgfSksICRhID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAodm9pZCAwID09PSBhW2JdLkJhKSB7CiAgICAgICAgICB2YXIgZCA9IGFbYl07CiAgICAgICAgICBhW2JdID0gZnVuY3Rpb24oLi4uZSkgewogICAgICAgICAgICBpZiAoIWFbYl0uQmEuaGFzT3duUHJvcGVydHkoZS5sZW5ndGgpKQogICAgICAgICAgICAgIHRocm93IG5ldyBSKAogICAgICAgICAgICAgICAgYEZ1bmN0aW9uICcke2N9JyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIG51bWJlciBvZiBhcmd1bWVudHMgKCR7ZS5sZW5ndGh9KSAtIGV4cGVjdHMgb25lIG9mICgke2FbYl0uQmF9KSFgCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIGFbYl0uQmFbZS5sZW5ndGhdLmFwcGx5KHRoaXMsIGUpOwogICAgICAgICAgfTsKICAgICAgICAgIGFbYl0uQmEgPSBbXTsKICAgICAgICAgIGFbYl0uQmFbZC5PYV0gPSBkOwogICAgICAgIH0KICAgICAgfSwgYWIgPSAoYSwgYiwgYykgPT4gewogICAgICAgIGlmIChrLmhhc093blByb3BlcnR5KGEpKSB7CiAgICAgICAgICBpZiAodm9pZCAwID09PSBjIHx8IHZvaWQgMCAhPT0ga1thXS5CYSAmJiB2b2lkIDAgIT09IGtbYV0uQmFbY10pCiAgICAgICAgICAgIHRocm93IG5ldyBSKGBDYW5ub3QgcmVnaXN0ZXIgcHVibGljIG5hbWUgJyR7YX0nIHR3aWNlYCk7CiAgICAgICAgICAkYShrLCBhLCBhKTsKICAgICAgICAgIGlmIChrLmhhc093blByb3BlcnR5KGMpKQogICAgICAgICAgICB0aHJvdyBuZXcgUihgQ2Fubm90IHJlZ2lzdGVyIG11bHRpcGxlIG92ZXJsb2FkcyBvZiBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgbnVtYmVyIG9mIGFyZ3VtZW50cyAoJHtjfSkhYCk7CiAgICAgICAgICBrW2FdLkJhW2NdID0gYjsKICAgICAgICB9IGVsc2Uga1thXSA9IGIsIHZvaWQgMCAhPT0gYyAmJiAoa1thXS52YiA9IGMpOwogICAgICB9LCBiYiA9IChhKSA9PiB7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gYSkgcmV0dXJuICJfdW5rbm93biI7CiAgICAgICAgYSA9IGEucmVwbGFjZSgvW15hLXpBLVowLTlfXS9nLCAiJCIpOwogICAgICAgIHZhciBiID0gYS5jaGFyQ29kZUF0KDApOwogICAgICAgIHJldHVybiA0OCA8PSBiICYmIDU3ID49IGIgPyBgXyR7YX1gIDogYTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gY2IoYSwgYiwgYywgZCwgZSwgZiwgbCwgaCkgewogICAgICAgIHRoaXMubmFtZSA9IGE7CiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGI7CiAgICAgICAgdGhpcy5MYSA9IGM7CiAgICAgICAgdGhpcy5GYSA9IGQ7CiAgICAgICAgdGhpcy5DYSA9IGU7CiAgICAgICAgdGhpcy5jYiA9IGY7CiAgICAgICAgdGhpcy5OYSA9IGw7CiAgICAgICAgdGhpcy5hYiA9IGg7CiAgICAgICAgdGhpcy5rYiA9IFtdOwogICAgICB9CiAgICAgIHZhciBkYiA9IChhLCBiLCBjKSA9PiB7CiAgICAgICAgZm9yICg7IGIgIT09IGM7ICkgewogICAgICAgICAgaWYgKCFiLk5hKSB0aHJvdyBuZXcgUihgRXhwZWN0ZWQgbnVsbCBvciBpbnN0YW5jZSBvZiAke2MubmFtZX0sIGdvdCBhbiBpbnN0YW5jZSBvZiAke2IubmFtZX1gKTsKICAgICAgICAgIGEgPSBiLk5hKGEpOwogICAgICAgICAgYiA9IGIuQ2E7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhOwogICAgICB9OwogICAgICBmdW5jdGlvbiBlYihhLCBiKSB7CiAgICAgICAgaWYgKG51bGwgPT09IGIpIHsKICAgICAgICAgIGlmICh0aGlzLlRhKSB0aHJvdyBuZXcgUihgbnVsbCBpcyBub3QgYSB2YWxpZCAke3RoaXMubmFtZX1gKTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoIWIubWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyAiJHtmYihiKX0iIGFzIGEgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCFiLm1hLnlhKSB0aHJvdyBuZXcgUihgQ2Fubm90IHBhc3MgZGVsZXRlZCBvYmplY3QgYXMgYSBwb2ludGVyIG9mIHR5cGUgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgcmV0dXJuIGRiKGIubWEueWEsIGIubWEuemEueGEsIHRoaXMueGEpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdiKGEsIGIpIHsKICAgICAgICBpZiAobnVsbCA9PT0gYikgewogICAgICAgICAgaWYgKHRoaXMuVGEpIHRocm93IG5ldyBSKGBudWxsIGlzIG5vdCBhIHZhbGlkICR7dGhpcy5uYW1lfWApOwogICAgICAgICAgaWYgKHRoaXMuUWEpIHsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzLlVhKCk7CiAgICAgICAgICAgIG51bGwgIT09IGEgJiYgYS5wdXNoKHRoaXMuRmEsIGMpOwogICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoIWIgfHwgIWIubWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyAiJHtmYihiKX0iIGFzIGEgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCFiLm1hLnlhKSB0aHJvdyBuZXcgUihgQ2Fubm90IHBhc3MgZGVsZXRlZCBvYmplY3QgYXMgYSBwb2ludGVyIG9mIHR5cGUgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCF0aGlzLlBhICYmIGIubWEuemEuUGEpCiAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLkRhID8gYi5tYS5EYS5uYW1lIDogYi5tYS56YS5uYW1lfSB0byBwYXJhbWV0ZXIgdHlwZSAke3RoaXMubmFtZX1gCiAgICAgICAgICApOwogICAgICAgIGMgPSBkYihiLm1hLnlhLCBiLm1hLnphLnhhLCB0aGlzLnhhKTsKICAgICAgICBpZiAodGhpcy5RYSkgewogICAgICAgICAgaWYgKHZvaWQgMCA9PT0gYi5tYS5BYSkgdGhyb3cgbmV3IFIoIlBhc3NpbmcgcmF3IHBvaW50ZXIgdG8gc21hcnQgcG9pbnRlciBpcyBpbGxlZ2FsIik7CiAgICAgICAgICBzd2l0Y2ggKHRoaXMucGIpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChiLm1hLkRhID09PSB0aGlzKSBjID0gYi5tYS5BYTsKICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgICAgYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLkRhID8gYi5tYS5EYS5uYW1lIDogYi5tYS56YS5uYW1lfSB0byBwYXJhbWV0ZXIgdHlwZSAke3RoaXMubmFtZX1gCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgYyA9IGIubWEuQWE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBpZiAoYi5tYS5EYSA9PT0gdGhpcykgYyA9IGIubWEuQWE7CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IGIuY2xvbmUoKTsKICAgICAgICAgICAgICAgIGMgPSB0aGlzLmxiKAogICAgICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgICAgICBoYigoKSA9PiBkWyJkZWxldGUiXSgpKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIG51bGwgIT09IGEgJiYgYS5wdXNoKHRoaXMuRmEsIGMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0aHJvdyBuZXcgUigiVW5zdXBwb3J0aW5nIHNoYXJpbmcgcG9saWN5Iik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGliKGEsIGIpIHsKICAgICAgICBpZiAobnVsbCA9PT0gYikgewogICAgICAgICAgaWYgKHRoaXMuVGEpIHRocm93IG5ldyBSKGBudWxsIGlzIG5vdCBhIHZhbGlkICR7dGhpcy5uYW1lfWApOwogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGlmICghYi5tYSkgdGhyb3cgbmV3IFIoYENhbm5vdCBwYXNzICIke2ZiKGIpfSIgYXMgYSAke3RoaXMubmFtZX1gKTsKICAgICAgICBpZiAoIWIubWEueWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyBkZWxldGVkIG9iamVjdCBhcyBhIHBvaW50ZXIgb2YgdHlwZSAke3RoaXMubmFtZX1gKTsKICAgICAgICBpZiAoYi5tYS56YS5QYSkgdGhyb3cgbmV3IFIoYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLnphLm5hbWV9IHRvIHBhcmFtZXRlciB0eXBlICR7dGhpcy5uYW1lfWApOwogICAgICAgIHJldHVybiBkYihiLm1hLnlhLCBiLm1hLnphLnhhLCB0aGlzLnhhKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBqYihhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuLCBtLCBwKSB7CiAgICAgICAgdGhpcy5uYW1lID0gYTsKICAgICAgICB0aGlzLnhhID0gYjsKICAgICAgICB0aGlzLlRhID0gYzsKICAgICAgICB0aGlzLlBhID0gZDsKICAgICAgICB0aGlzLlFhID0gZTsKICAgICAgICB0aGlzLmpiID0gZjsKICAgICAgICB0aGlzLnBiID0gbDsKICAgICAgICB0aGlzLlphID0gaDsKICAgICAgICB0aGlzLlVhID0gbjsKICAgICAgICB0aGlzLmxiID0gbTsKICAgICAgICB0aGlzLkZhID0gcDsKICAgICAgICBlIHx8IHZvaWQgMCAhPT0gYi5DYSA/IHRoaXMudG9XaXJlVHlwZSA9IGdiIDogKHRoaXMudG9XaXJlVHlwZSA9IGQgPyBlYiA6IGliLCB0aGlzLkVhID0gbnVsbCk7CiAgICAgIH0KICAgICAgdmFyIGtiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAoIWsuaGFzT3duUHJvcGVydHkoYSkpIHRocm93IG5ldyBJYSgiUmVwbGFjaW5nIG5vbmV4aXN0ZW50IHB1YmxpYyBzeW1ib2wiKTsKICAgICAgICB2b2lkIDAgIT09IGtbYV0uQmEgJiYgdm9pZCAwICE9PSBjID8ga1thXS5CYVtjXSA9IGIgOiAoa1thXSA9IGIsIGtbYV0uT2EgPSBjKTsKICAgICAgfSwgUywgbGIgPSAoYSwgYiwgYyA9IFtdKSA9PiB7CiAgICAgICAgYS5pbmNsdWRlcygiaiIpID8gKGEgPSBhLnJlcGxhY2UoL3AvZywgImkiKSwgYiA9ICgwLCBrWyJkeW5DYWxsXyIgKyBhXSkoYiwgLi4uYykpIDogYiA9IFMuZ2V0KGIpKC4uLmMpOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBtYiA9IChhLCBiKSA9PiAoLi4uYykgPT4gbGIoYSwgYiwgYyksIFQgPSAoYSwgYikgPT4gewogICAgICAgIGEgPSBRKGEpOwogICAgICAgIHZhciBjID0gYS5pbmNsdWRlcygiaiIpID8gbWIoYSwgYikgOiBTLmdldChiKTsKICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgYykgdGhyb3cgbmV3IFIoYHVua25vd24gZnVuY3Rpb24gcG9pbnRlciB3aXRoIHNpZ25hdHVyZSAke2F9OiAke2J9YCk7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0sIG5iLCBwYiA9IChhKSA9PiB7CiAgICAgICAgYSA9IG9iKGEpOwogICAgICAgIHZhciBiID0gUShhKTsKICAgICAgICBVKGEpOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBxYiA9IChhLCBiKSA9PiB7CiAgICAgICAgZnVuY3Rpb24gYyhmKSB7CiAgICAgICAgICBlW2ZdIHx8IE1bZl0gfHwgKEhhW2ZdID8gSGFbZl0uZm9yRWFjaChjKSA6IChkLnB1c2goZiksIGVbZl0gPSB0cnVlKSk7CiAgICAgICAgfQogICAgICAgIHZhciBkID0gW10sIGUgPSB7fTsKICAgICAgICBiLmZvckVhY2goYyk7CiAgICAgICAgdGhyb3cgbmV3IG5iKGAke2F9OiBgICsgZC5tYXAocGIpLmpvaW4oWyIsICJdKSk7CiAgICAgIH0sIHJiID0gKGEsIGIpID0+IHsKICAgICAgICBmb3IgKHZhciBjID0gW10sIGQgPSAwOyBkIDwgYTsgZCsrKSBjLnB1c2goRltiICsgNCAqIGQgPj4gMl0pOwogICAgICAgIHJldHVybiBjOwogICAgICB9OwogICAgICBmdW5jdGlvbiBzYihhKSB7CiAgICAgICAgZm9yICh2YXIgYiA9IDE7IGIgPCBhLmxlbmd0aDsgKytiKSBpZiAobnVsbCAhPT0gYVtiXSAmJiB2b2lkIDAgPT09IGFbYl0uRWEpIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0YihhLCBiLCBjLCBkLCBlKSB7CiAgICAgICAgdmFyIGYgPSBiLmxlbmd0aDsKICAgICAgICBpZiAoMiA+IGYpIHRocm93IG5ldyBSKCJhcmdUeXBlcyBhcnJheSBzaXplIG1pc21hdGNoISBNdXN0IGF0IGxlYXN0IGdldCByZXR1cm4gdmFsdWUgYW5kICd0aGlzJyB0eXBlcyEiKTsKICAgICAgICB2YXIgbCA9IG51bGwgIT09IGJbMV0gJiYgbnVsbCAhPT0gYywgaCA9IHNiKGIpLCBuID0gInZvaWQiICE9PSBiWzBdLm5hbWUsIG0gPSBmIC0gMiwgcCA9IEFycmF5KG0pLCB1ID0gW10sIHYgPSBbXTsKICAgICAgICByZXR1cm4gWmEoYSwgZnVuY3Rpb24oLi4uZykgewogICAgICAgICAgaWYgKGcubGVuZ3RoICE9PSBtKSB0aHJvdyBuZXcgUihgZnVuY3Rpb24gJHthfSBjYWxsZWQgd2l0aCAke2cubGVuZ3RofSBhcmd1bWVudHMsIGV4cGVjdGVkICR7bX1gKTsKICAgICAgICAgIHYubGVuZ3RoID0gMDsKICAgICAgICAgIHUubGVuZ3RoID0gbCA/IDIgOiAxOwogICAgICAgICAgdVswXSA9IGU7CiAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICB2YXIgcSA9IGJbMV0udG9XaXJlVHlwZSh2LCB0aGlzKTsKICAgICAgICAgICAgdVsxXSA9IHE7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IG07ICsrcikgcFtyXSA9IGJbciArIDJdLnRvV2lyZVR5cGUodiwgZ1tyXSksIHUucHVzaChwW3JdKTsKICAgICAgICAgIGcgPSBkKC4uLnUpOwogICAgICAgICAgaWYgKGgpIEdhKHYpOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBmb3IgKHIgPSBsID8gMSA6IDI7IHIgPCBiLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgdmFyIHogPSAxID09PSByID8gcSA6IHBbciAtIDJdOwogICAgICAgICAgICAgIG51bGwgIT09IGJbcl0uRWEgJiYgYltyXS5FYSh6KTsKICAgICAgICAgICAgfQogICAgICAgICAgcSA9IG4gPyBiWzBdLmZyb21XaXJlVHlwZShnKSA6IHZvaWQgMDsKICAgICAgICAgIHJldHVybiBxOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHZhciB1YiA9IChhKSA9PiB7CiAgICAgICAgYSA9IGEudHJpbSgpOwogICAgICAgIGNvbnN0IGIgPSBhLmluZGV4T2YoIigiKTsKICAgICAgICByZXR1cm4gLTEgIT09IGIgPyBhLnN1YnN0cigwLCBiKSA6IGE7CiAgICAgIH0sIHZiID0gW10sIFYgPSBbXSwgd2IgPSAoYSkgPT4gewogICAgICAgIDkgPCBhICYmIDAgPT09IC0tVlthICsgMV0gJiYgKFZbYV0gPSB2b2lkIDAsIHZiLnB1c2goYSkpOwogICAgICB9LCB5YiA9IChhKSA9PiB7CiAgICAgICAgaWYgKCFhKSB0aHJvdyBuZXcgUigiQ2Fubm90IHVzZSBkZWxldGVkIHZhbC4gaGFuZGxlID0gIiArIGEpOwogICAgICAgIHJldHVybiBWW2FdOwogICAgICB9LCBoYiA9IChhKSA9PiB7CiAgICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgICBjYXNlIHZvaWQgMDoKICAgICAgICAgICAgcmV0dXJuIDI7CiAgICAgICAgICBjYXNlIG51bGw6CiAgICAgICAgICAgIHJldHVybiA0OwogICAgICAgICAgY2FzZSB0cnVlOgogICAgICAgICAgICByZXR1cm4gNjsKICAgICAgICAgIGNhc2UgZmFsc2U6CiAgICAgICAgICAgIHJldHVybiA4OwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgY29uc3QgYiA9IHZiLnBvcCgpIHx8IFYubGVuZ3RoOwogICAgICAgICAgICBWW2JdID0gYTsKICAgICAgICAgICAgVltiICsgMV0gPSAxOwogICAgICAgICAgICByZXR1cm4gYjsKICAgICAgICB9CiAgICAgIH0sIHpiID0gewogICAgICAgIG5hbWU6ICJlbXNjcmlwdGVuOjp2YWwiLAogICAgICAgIGZyb21XaXJlVHlwZTogKGEpID0+IHsKICAgICAgICAgIHZhciBiID0geWIoYSk7CiAgICAgICAgICB3YihhKTsKICAgICAgICAgIHJldHVybiBiOwogICAgICAgIH0sCiAgICAgICAgdG9XaXJlVHlwZTogKGEsIGIpID0+IGhiKGIpLAogICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBLLAogICAgICAgIEVhOiBudWxsCiAgICAgIH0sIEFiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBzd2l0Y2ggKGIpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIGMgPyBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKHlbZF0pOwogICAgICAgICAgICB9IDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShBW2RdKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIGMgPyBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKEJbZCA+PiAxXSk7CiAgICAgICAgICAgIH0gOiBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKENbZCA+PiAxXSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBjID8gZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShFW2QgPj4gMl0pOwogICAgICAgICAgICB9IDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShGW2QgPj4gMl0pOwogICAgICAgICAgICB9OwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgaW52YWxpZCBpbnRlZ2VyIHdpZHRoICgke2J9KTogJHthfWApOwogICAgICAgIH0KICAgICAgfSwgQmIgPSAoYSwgYikgPT4gewogICAgICAgIHZhciBjID0gTVthXTsKICAgICAgICBpZiAodm9pZCAwID09PSBjKSB0aHJvdyBhID0gYCR7Yn0gaGFzIHVua25vd24gdHlwZSAke3BiKGEpfWAsIG5ldyBSKGEpOwogICAgICAgIHJldHVybiBjOwogICAgICB9LCBmYiA9IChhKSA9PiB7CiAgICAgICAgaWYgKG51bGwgPT09IGEpIHJldHVybiAibnVsbCI7CiAgICAgICAgdmFyIGIgPSB0eXBlb2YgYTsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT09IGIgfHwgImFycmF5IiA9PT0gYiB8fCAiZnVuY3Rpb24iID09PSBiID8gYS50b1N0cmluZygpIDogIiIgKyBhOwogICAgICB9LCBDYiA9IChhLCBiKSA9PiB7CiAgICAgICAgc3dpdGNoIChiKSB7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKGphW2MgPj4gMl0pOwogICAgICAgICAgICB9OwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYykgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShrYVtjID4+IDNdKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGludmFsaWQgZmxvYXQgd2lkdGggKCR7Yn0pOiAke2F9YCk7CiAgICAgICAgfQogICAgICB9LCBEYiA9IChhLCBiLCBjKSA9PiB7CiAgICAgICAgc3dpdGNoIChiKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiBjID8gKGQpID0+IHlbZF0gOiAoZCkgPT4gQVtkXTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIGMgPyAoZCkgPT4gQltkID4+IDFdIDogKGQpID0+IENbZCA+PiAxXTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIGMgPyAoZCkgPT4gRVtkID4+IDJdIDogKGQpID0+IEZbZCA+PiAyXTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGludmFsaWQgaW50ZWdlciB3aWR0aCAoJHtifSk6ICR7YX1gKTsKICAgICAgICB9CiAgICAgIH0sIEViID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFRleHREZWNvZGVyID8gbmV3IFRleHREZWNvZGVyKCJ1dGYtMTZsZSIpIDogdm9pZCAwLCBGYiA9IChhLCBiKSA9PiB7CiAgICAgICAgdmFyIGMgPSBhID4+IDE7CiAgICAgICAgZm9yICh2YXIgZCA9IGMgKyBiIC8gMjsgIShjID49IGQpICYmIENbY107ICkgKytjOwogICAgICAgIGMgPDw9IDE7CiAgICAgICAgaWYgKDMyIDwgYyAtIGEgJiYgRWIpIHJldHVybiBFYi5kZWNvZGUoQS5zdWJhcnJheShhLCBjKSk7CiAgICAgICAgYyA9ICIiOwogICAgICAgIGZvciAoZCA9IDA7ICEoZCA+PSBiIC8gMik7ICsrZCkgewogICAgICAgICAgdmFyIGUgPSBCW2EgKyAyICogZCA+PiAxXTsKICAgICAgICAgIGlmICgwID09IGUpIGJyZWFrOwogICAgICAgICAgYyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYzsKICAgICAgfSwgR2IgPSAoYSwgYiwgYykgPT4gewogICAgICAgIGMgPz8gKGMgPSAyMTQ3NDgzNjQ3KTsKICAgICAgICBpZiAoMiA+IGMpIHJldHVybiAwOwogICAgICAgIGMgLT0gMjsKICAgICAgICB2YXIgZCA9IGI7CiAgICAgICAgYyA9IGMgPCAyICogYS5sZW5ndGggPyBjIC8gMiA6IGEubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgYzsgKytlKSBCW2IgPj4gMV0gPSBhLmNoYXJDb2RlQXQoZSksIGIgKz0gMjsKICAgICAgICBCW2IgPj4gMV0gPSAwOwogICAgICAgIHJldHVybiBiIC0gZDsKICAgICAgfSwgSGIgPSAoYSkgPT4gMiAqIGEubGVuZ3RoLCBJYiA9IChhLCBiKSA9PiB7CiAgICAgICAgZm9yICh2YXIgYyA9IDAsIGQgPSAiIjsgIShjID49IGIgLyA0KTsgKSB7CiAgICAgICAgICB2YXIgZSA9IEVbYSArIDQgKiBjID4+IDJdOwogICAgICAgICAgaWYgKDAgPT0gZSkgYnJlYWs7CiAgICAgICAgICArK2M7CiAgICAgICAgICA2NTUzNiA8PSBlID8gKGUgLT0gNjU1MzYsIGQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NiB8IGUgPj4gMTAsIDU2MzIwIHwgZSAmIDEwMjMpKSA6IGQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGQ7CiAgICAgIH0sIEpiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBjID8/IChjID0gMjE0NzQ4MzY0Nyk7CiAgICAgICAgaWYgKDQgPiBjKSByZXR1cm4gMDsKICAgICAgICB2YXIgZCA9IGI7CiAgICAgICAgYyA9IGQgKyBjIC0gNDsKICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IGEubGVuZ3RoOyArK2UpIHsKICAgICAgICAgIHZhciBmID0gYS5jaGFyQ29kZUF0KGUpOwogICAgICAgICAgaWYgKDU1Mjk2IDw9IGYgJiYgNTczNDMgPj0gZikgewogICAgICAgICAgICB2YXIgbCA9IGEuY2hhckNvZGVBdCgrK2UpOwogICAgICAgICAgICBmID0gNjU1MzYgKyAoKGYgJiAxMDIzKSA8PCAxMCkgfCBsICYgMTAyMzsKICAgICAgICAgIH0KICAgICAgICAgIEVbYiA+PiAyXSA9IGY7CiAgICAgICAgICBiICs9IDQ7CiAgICAgICAgICBpZiAoYiArIDQgPiBjKSBicmVhazsKICAgICAgICB9CiAgICAgICAgRVtiID4+IDJdID0gMDsKICAgICAgICByZXR1cm4gYiAtIGQ7CiAgICAgIH0sIEtiID0gKGEpID0+IHsKICAgICAgICBmb3IgKHZhciBiID0gMCwgYyA9IDA7IGMgPCBhLmxlbmd0aDsgKytjKSB7CiAgICAgICAgICB2YXIgZCA9IGEuY2hhckNvZGVBdChjKTsKICAgICAgICAgIDU1Mjk2IDw9IGQgJiYgNTczNDMgPj0gZCAmJiArK2M7CiAgICAgICAgICBiICs9IDQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiOwogICAgICB9LCBMYiA9IFtdLCBNYiA9IChhKSA9PiB7CiAgICAgICAgdmFyIGIgPSBMYi5sZW5ndGg7CiAgICAgICAgTGIucHVzaChhKTsKICAgICAgICByZXR1cm4gYjsKICAgICAgfSwgTmIgPSAoYSwgYikgPT4gewogICAgICAgIGZvciAodmFyIGMgPSBBcnJheShhKSwgZCA9IDA7IGQgPCBhOyArK2QpIGNbZF0gPSBCYihGW2IgKyA0ICogZCA+PiAyXSwgInBhcmFtZXRlciAiICsgZCk7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0sIE9iID0gUmVmbGVjdC5jb25zdHJ1Y3QsIFBiID0ge30sIFJiID0gKCkgPT4gewogICAgICAgIGlmICghUWIpIHsKICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICBVU0VSOiAid2ViX3VzZXIiLAogICAgICAgICAgICBMT0dOQU1FOiAid2ViX3VzZXIiLAogICAgICAgICAgICBQQVRIOiAiLyIsCiAgICAgICAgICAgIFBXRDogIi8iLAogICAgICAgICAgICBIT01FOiAiL2hvbWUvd2ViX3VzZXIiLAogICAgICAgICAgICBMQU5HOiAoIm9iamVjdCIgPT0gdHlwZW9mIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IubGFuZ3VhZ2VzICYmIG5hdmlnYXRvci5sYW5ndWFnZXNbMF0gfHwgIkMiKS5yZXBsYWNlKAogICAgICAgICAgICAgICItIiwKICAgICAgICAgICAgICAiXyIKICAgICAgICAgICAgKSArICIuVVRGLTgiLAogICAgICAgICAgICBfOiBkYSB8fCAiLi90aGlzLnByb2dyYW0iCiAgICAgICAgICB9LCBiOwogICAgICAgICAgZm9yIChiIGluIFBiKSB2b2lkIDAgPT09IFBiW2JdID8gZGVsZXRlIGFbYl0gOiBhW2JdID0gUGJbYl07CiAgICAgICAgICB2YXIgYyA9IFtdOwogICAgICAgICAgZm9yIChiIGluIGEpIGMucHVzaChgJHtifT0ke2FbYl19YCk7CiAgICAgICAgICBRYiA9IGM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBRYjsKICAgICAgfSwgUWIsIFNiID0gW251bGwsIFtdLCBbXV0sIFRiID0gKCkgPT4gewogICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgY3J5cHRvICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMpCiAgICAgICAgICByZXR1cm4gKGEpID0+IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYSk7CiAgICAgICAgcmEoImluaXRSYW5kb21EZXZpY2UiKTsKICAgICAgfSwgVWIgPSAoYSkgPT4gKFViID0gVGIoKSkoYSksIFZiID0gKGEpID0+IDAgPT09IGEgJSA0ICYmICgwICE9PSBhICUgMTAwIHx8IDAgPT09IGEgJSA0MDApLCBXYiA9IFszMSwgMjksIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXSwgWGIgPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07CiAgICAgIGZ1bmN0aW9uIFliKGEpIHsKICAgICAgICB2YXIgYiA9IEFycmF5KERhKGEpICsgMSk7CiAgICAgICAgRWEoYSwgYiwgMCwgYi5sZW5ndGgpOwogICAgICAgIHJldHVybiBiOwogICAgICB9CiAgICAgIHZhciBaYiA9IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgZnVuY3Rpb24gZShnLCBxLCByKSB7CiAgICAgICAgICBmb3IgKGcgPSAibnVtYmVyIiA9PSB0eXBlb2YgZyA/IGcudG9TdHJpbmcoKSA6IGcgfHwgIiI7IGcubGVuZ3RoIDwgcTsgKSBnID0gclswXSArIGc7CiAgICAgICAgICByZXR1cm4gZzsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZihnLCBxKSB7CiAgICAgICAgICByZXR1cm4gZShnLCBxLCAiMCIpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKGcsIHEpIHsKICAgICAgICAgIGZ1bmN0aW9uIHIoTikgewogICAgICAgICAgICByZXR1cm4gMCA+IE4gPyAtMSA6IDAgPCBOID8gMSA6IDA7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgejsKICAgICAgICAgIDAgPT09ICh6ID0gcihnLmdldEZ1bGxZZWFyKCkgLSBxLmdldEZ1bGxZZWFyKCkpKSAmJiAwID09PSAoeiA9IHIoZy5nZXRNb250aCgpIC0gcS5nZXRNb250aCgpKSkgJiYgKHogPSByKGcuZ2V0RGF0ZSgpIC0gcS5nZXREYXRlKCkpKTsKICAgICAgICAgIHJldHVybiB6OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBoKGcpIHsKICAgICAgICAgIHN3aXRjaCAoZy5nZXREYXkoKSkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSAtIDEsIDExLCAyOSk7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICByZXR1cm4gZzsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCksIDAsIDMpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSwgMCwgMik7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZy5nZXRGdWxsWWVhcigpLCAwLCAxKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCkgLSAxLCAxMSwgMzEpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSAtIDEsIDExLCAzMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG4oZykgewogICAgICAgICAgdmFyIHEgPSBnLklhOwogICAgICAgICAgZm9yIChnID0gbmV3IERhdGUobmV3IERhdGUoZy5KYSArIDE5MDAsIDAsIDEpLmdldFRpbWUoKSk7IDAgPCBxOyApIHsKICAgICAgICAgICAgdmFyIHIgPSBnLmdldE1vbnRoKCksIHogPSAoVmIoZy5nZXRGdWxsWWVhcigpKSA/IFdiIDogWGIpW3JdOwogICAgICAgICAgICBpZiAocSA+IHogLSBnLmdldERhdGUoKSkKICAgICAgICAgICAgICBxIC09IHogLSBnLmdldERhdGUoKSArIDEsIGcuc2V0RGF0ZSgxKSwgMTEgPiByID8gZy5zZXRNb250aChyICsgMSkgOiAoZy5zZXRNb250aCgwKSwgZy5zZXRGdWxsWWVhcihnLmdldEZ1bGxZZWFyKCkgKyAxKSk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGcuc2V0RGF0ZShnLmdldERhdGUoKSArIHEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByID0gbmV3IERhdGUoZy5nZXRGdWxsWWVhcigpICsgMSwgMCwgNCk7CiAgICAgICAgICBxID0gaChuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCksIDAsIDQpKTsKICAgICAgICAgIHIgPSBoKHIpOwogICAgICAgICAgcmV0dXJuIDAgPj0gbChxLCBnKSA/IDAgPj0gbChyLCBnKSA/IGcuZ2V0RnVsbFllYXIoKSArIDEgOiBnLmdldEZ1bGxZZWFyKCkgOiBnLmdldEZ1bGxZZWFyKCkgLSAxOwogICAgICAgIH0KICAgICAgICB2YXIgbSA9IEZbZCArIDQwID4+IDJdOwogICAgICAgIGQgPSB7CiAgICAgICAgICBzYjogRVtkID4+IDJdLAogICAgICAgICAgcmI6IEVbZCArIDQgPj4gMl0sCiAgICAgICAgICBSYTogRVtkICsgOCA+PiAyXSwKICAgICAgICAgIFZhOiBFW2QgKyAxMiA+PiAyXSwKICAgICAgICAgIFNhOiBFW2QgKyAxNiA+PiAyXSwKICAgICAgICAgIEphOiBFW2QgKyAyMCA+PiAyXSwKICAgICAgICAgIEdhOiBFW2QgKyAyNCA+PiAyXSwKICAgICAgICAgIElhOiBFW2QgKyAyOCA+PiAyXSwKICAgICAgICAgIHdiOiBFW2QgKyAzMiA+PiAyXSwKICAgICAgICAgIHFiOiBFW2QgKyAzNiA+PiAyXSwKICAgICAgICAgIHRiOiBtID8gbSA/IEooQSwgbSkgOiAiIiA6ICIiCiAgICAgICAgfTsKICAgICAgICBjID0gYyA/IEooQSwgYykgOiAiIjsKICAgICAgICBtID0gewogICAgICAgICAgIiVjIjogIiVhICViICVkICVIOiVNOiVTICVZIiwKICAgICAgICAgICIlRCI6ICIlbS8lZC8leSIsCiAgICAgICAgICAiJUYiOiAiJVktJW0tJWQiLAogICAgICAgICAgIiVoIjogIiViIiwKICAgICAgICAgICIlciI6ICIlSTolTTolUyAlcCIsCiAgICAgICAgICAiJVIiOiAiJUg6JU0iLAogICAgICAgICAgIiVUIjogIiVIOiVNOiVTIiwKICAgICAgICAgICIleCI6ICIlbS8lZC8leSIsCiAgICAgICAgICAiJVgiOiAiJUg6JU06JVMiLAogICAgICAgICAgIiVFYyI6ICIlYyIsCiAgICAgICAgICAiJUVDIjogIiVDIiwKICAgICAgICAgICIlRXgiOiAiJW0vJWQvJXkiLAogICAgICAgICAgIiVFWCI6ICIlSDolTTolUyIsCiAgICAgICAgICAiJUV5IjogIiV5IiwKICAgICAgICAgICIlRVkiOiAiJVkiLAogICAgICAgICAgIiVPZCI6ICIlZCIsCiAgICAgICAgICAiJU9lIjogIiVlIiwKICAgICAgICAgICIlT0giOiAiJUgiLAogICAgICAgICAgIiVPSSI6ICIlSSIsCiAgICAgICAgICAiJU9tIjogIiVtIiwKICAgICAgICAgICIlT00iOiAiJU0iLAogICAgICAgICAgIiVPUyI6ICIlUyIsCiAgICAgICAgICAiJU91IjogIiV1IiwKICAgICAgICAgICIlT1UiOiAiJVUiLAogICAgICAgICAgIiVPViI6ICIlViIsCiAgICAgICAgICAiJU93IjogIiV3IiwKICAgICAgICAgICIlT1ciOiAiJVciLAogICAgICAgICAgIiVPeSI6ICIleSIKICAgICAgICB9OwogICAgICAgIGZvciAodmFyIHAgaW4gbSkgYyA9IGMucmVwbGFjZShuZXcgUmVnRXhwKHAsICJnIiksIG1bcF0pOwogICAgICAgIHZhciB1ID0gIlN1bmRheSBNb25kYXkgVHVlc2RheSBXZWRuZXNkYXkgVGh1cnNkYXkgRnJpZGF5IFNhdHVyZGF5Ii5zcGxpdCgiICIpLCB2ID0gIkphbnVhcnkgRmVicnVhcnkgTWFyY2ggQXByaWwgTWF5IEp1bmUgSnVseSBBdWd1c3QgU2VwdGVtYmVyIE9jdG9iZXIgTm92ZW1iZXIgRGVjZW1iZXIiLnNwbGl0KCIgIik7CiAgICAgICAgbSA9IHsKICAgICAgICAgICIlYSI6IChnKSA9PiB1W2cuR2FdLnN1YnN0cmluZygwLCAzKSwKICAgICAgICAgICIlQSI6IChnKSA9PiB1W2cuR2FdLAogICAgICAgICAgIiViIjogKGcpID0+IHZbZy5TYV0uc3Vic3RyaW5nKDAsIDMpLAogICAgICAgICAgIiVCIjogKGcpID0+IHZbZy5TYV0sCiAgICAgICAgICAiJUMiOiAoZykgPT4gZigoZy5KYSArIDE5MDApIC8gMTAwIHwgMCwgMiksCiAgICAgICAgICAiJWQiOiAoZykgPT4gZihnLlZhLCAyKSwKICAgICAgICAgICIlZSI6IChnKSA9PiBlKGcuVmEsIDIsICIgIiksCiAgICAgICAgICAiJWciOiAoZykgPT4gbihnKS50b1N0cmluZygpLnN1YnN0cmluZygyKSwKICAgICAgICAgICIlRyI6IG4sCiAgICAgICAgICAiJUgiOiAoZykgPT4gZihnLlJhLCAyKSwKICAgICAgICAgICIlSSI6IChnKSA9PiB7CiAgICAgICAgICAgIGcgPSBnLlJhOwogICAgICAgICAgICAwID09IGcgPyBnID0gMTIgOiAxMiA8IGcgJiYgKGcgLT0gMTIpOwogICAgICAgICAgICByZXR1cm4gZihnLCAyKTsKICAgICAgICAgIH0sCiAgICAgICAgICAiJWoiOiAoZykgPT4gewogICAgICAgICAgICBmb3IgKHZhciBxID0gMCwgciA9IDA7IHIgPD0gZy5TYSAtIDE7IHEgKz0gKFZiKGcuSmEgKyAxOTAwKSA/IFdiIDogWGIpW3IrK10pIDsKICAgICAgICAgICAgcmV0dXJuIGYoZy5WYSArIHEsIDMpOwogICAgICAgICAgfSwKICAgICAgICAgICIlbSI6IChnKSA9PiBmKGcuU2EgKyAxLCAyKSwKICAgICAgICAgICIlTSI6IChnKSA9PiBmKGcucmIsIDIpLAogICAgICAgICAgIiVuIjogKCkgPT4gIlxuIiwKICAgICAgICAgICIlcCI6IChnKSA9PiAwIDw9IGcuUmEgJiYgMTIgPiBnLlJhID8gIkFNIiA6ICJQTSIsCiAgICAgICAgICAiJVMiOiAoZykgPT4gZihnLnNiLCAyKSwKICAgICAgICAgICIldCI6ICgpID0+ICIJIiwKICAgICAgICAgICIldSI6IChnKSA9PiBnLkdhIHx8IDcsCiAgICAgICAgICAiJVUiOiAoZykgPT4gZihNYXRoLmZsb29yKChnLklhICsgNyAtIGcuR2EpIC8gNyksIDIpLAogICAgICAgICAgIiVWIjogKGcpID0+IHsKICAgICAgICAgICAgdmFyIHEgPSBNYXRoLmZsb29yKChnLklhICsgNyAtIChnLkdhICsgNikgJSA3KSAvIDcpOwogICAgICAgICAgICAyID49IChnLkdhICsgMzcxIC0gZy5JYSAtIDIpICUgNyAmJiBxKys7CiAgICAgICAgICAgIGlmIChxKSA1MyA9PSBxICYmIChyID0gKGcuR2EgKyAzNzEgLSBnLklhKSAlIDcsIDQgPT0gciB8fCAzID09IHIgJiYgVmIoZy5KYSkgfHwgKHEgPSAxKSk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHEgPSA1MjsKICAgICAgICAgICAgICB2YXIgciA9IChnLkdhICsgNyAtIGcuSWEgLSAxKSAlIDc7CiAgICAgICAgICAgICAgKDQgPT0gciB8fCA1ID09IHIgJiYgVmIoZy5KYSAlIDQwMCAtIDEpKSAmJiBxKys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGYocSwgMik7CiAgICAgICAgICB9LAogICAgICAgICAgIiV3IjogKGcpID0+IGcuR2EsCiAgICAgICAgICAiJVciOiAoZykgPT4gZihNYXRoLmZsb29yKChnLklhICsgNyAtIChnLkdhICsgNikgJSA3KSAvIDcpLCAyKSwKICAgICAgICAgICIleSI6IChnKSA9PiAoZy5KYSArIDE5MDApLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIpLAogICAgICAgICAgIiVZIjogKGcpID0+IGcuSmEgKyAxOTAwLAogICAgICAgICAgIiV6IjogKGcpID0+IHsKICAgICAgICAgICAgZyA9IGcucWI7CiAgICAgICAgICAgIHZhciBxID0gMCA8PSBnOwogICAgICAgICAgICBnID0gTWF0aC5hYnMoZykgLyA2MDsKICAgICAgICAgICAgcmV0dXJuIChxID8gIisiIDogIi0iKSArIFN0cmluZygiMDAwMCIgKyAoZyAvIDYwICogMTAwICsgZyAlIDYwKSkuc2xpY2UoLTQpOwogICAgICAgICAgfSwKICAgICAgICAgICIlWiI6IChnKSA9PiBnLnRiLAogICAgICAgICAgIiUlIjogKCkgPT4gIiUiCiAgICAgICAgfTsKICAgICAgICBjID0gYy5yZXBsYWNlKC8lJS9nLCAiXDBcMCIpOwogICAgICAgIGZvciAocCBpbiBtKSBjLmluY2x1ZGVzKHApICYmIChjID0gYy5yZXBsYWNlKG5ldyBSZWdFeHAocCwgImciKSwgbVtwXShkKSkpOwogICAgICAgIGMgPSBjLnJlcGxhY2UoL1wwXDAvZywgIiUiKTsKICAgICAgICBwID0gWWIoYyk7CiAgICAgICAgaWYgKHAubGVuZ3RoID4gYikgcmV0dXJuIDA7CiAgICAgICAgeS5zZXQocCwgYSk7CiAgICAgICAgcmV0dXJuIHAubGVuZ3RoIC0gMTsKICAgICAgfTsKICAgICAgSWEgPSBrLkludGVybmFsRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICAgICAgICBjb25zdHJ1Y3RvcihhKSB7CiAgICAgICAgICBzdXBlcihhKTsKICAgICAgICAgIHRoaXMubmFtZSA9ICJJbnRlcm5hbEVycm9yIjsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZvciAodmFyICRiID0gQXJyYXkoMjU2KSwgYWMgPSAwOyAyNTYgPiBhYzsgKythYykgJGJbYWNdID0gU3RyaW5nLmZyb21DaGFyQ29kZShhYyk7CiAgICAgIEphID0gJGI7CiAgICAgIFIgPSBrLkJpbmRpbmdFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3IgewogICAgICAgIGNvbnN0cnVjdG9yKGEpIHsKICAgICAgICAgIHN1cGVyKGEpOwogICAgICAgICAgdGhpcy5uYW1lID0gIkJpbmRpbmdFcnJvciI7CiAgICAgICAgfQogICAgICB9OwogICAgICBPYmplY3QuYXNzaWduKFlhLnByb3RvdHlwZSwgewogICAgICAgIGlzQWxpYXNPZjogZnVuY3Rpb24oYSkgewogICAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFlhICYmIGEgaW5zdGFuY2VvZiBZYSkpIHJldHVybiBmYWxzZTsKICAgICAgICAgIHZhciBiID0gdGhpcy5tYS56YS54YSwgYyA9IHRoaXMubWEueWE7CiAgICAgICAgICBhLm1hID0gYS5tYTsKICAgICAgICAgIHZhciBkID0gYS5tYS56YS54YTsKICAgICAgICAgIGZvciAoYSA9IGEubWEueWE7IGIuQ2E7ICkgYyA9IGIuTmEoYyksIGIgPSBiLkNhOwogICAgICAgICAgZm9yICg7IGQuQ2E7ICkgYSA9IGQuTmEoYSksIGQgPSBkLkNhOwogICAgICAgICAgcmV0dXJuIGIgPT09IGQgJiYgYyA9PT0gYTsKICAgICAgICB9LAogICAgICAgIGNsb25lOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHRoaXMubWEueWEgfHwgTGEodGhpcyk7CiAgICAgICAgICBpZiAodGhpcy5tYS5NYSkgcmV0dXJuIHRoaXMubWEuY291bnQudmFsdWUgKz0gMSwgdGhpczsKICAgICAgICAgIHZhciBhID0gV2EsIGIgPSBPYmplY3QsIGMgPSBiLmNyZWF0ZSwgZCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKSwgZSA9IHRoaXMubWE7CiAgICAgICAgICBhID0gYSgKICAgICAgICAgICAgYy5jYWxsKGIsIGQsIHsKICAgICAgICAgICAgICBtYTogeyB2YWx1ZTogeyBjb3VudDogZS5jb3VudCwgS2E6IGUuS2EsIE1hOiBlLk1hLCB5YTogZS55YSwgemE6IGUuemEsIEFhOiBlLkFhLCBEYTogZS5EYSB9IH0KICAgICAgICAgICAgfSkKICAgICAgICAgICk7CiAgICAgICAgICBhLm1hLmNvdW50LnZhbHVlICs9IDE7CiAgICAgICAgICBhLm1hLkthID0gZmFsc2U7CiAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9LAogICAgICAgIFsiZGVsZXRlIl0oKSB7CiAgICAgICAgICB0aGlzLm1hLnlhIHx8IExhKHRoaXMpOwogICAgICAgICAgaWYgKHRoaXMubWEuS2EgJiYgIXRoaXMubWEuTWEpIHRocm93IG5ldyBSKCJPYmplY3QgYWxyZWFkeSBzY2hlZHVsZWQgZm9yIGRlbGV0aW9uIik7CiAgICAgICAgICBPYSh0aGlzKTsKICAgICAgICAgIHZhciBhID0gdGhpcy5tYTsKICAgICAgICAgIC0tYS5jb3VudC52YWx1ZTsKICAgICAgICAgIDAgPT09IGEuY291bnQudmFsdWUgJiYgKGEuQWEgPyBhLkRhLkZhKGEuQWEpIDogYS56YS54YS5GYShhLnlhKSk7CiAgICAgICAgICB0aGlzLm1hLk1hIHx8ICh0aGlzLm1hLkFhID0gdm9pZCAwLCB0aGlzLm1hLnlhID0gdm9pZCAwKTsKICAgICAgICB9LAogICAgICAgIGlzRGVsZXRlZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gIXRoaXMubWEueWE7CiAgICAgICAgfSwKICAgICAgICBkZWxldGVMYXRlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICB0aGlzLm1hLnlhIHx8IExhKHRoaXMpOwogICAgICAgICAgaWYgKHRoaXMubWEuS2EgJiYgIXRoaXMubWEuTWEpIHRocm93IG5ldyBSKCJPYmplY3QgYWxyZWFkeSBzY2hlZHVsZWQgZm9yIGRlbGV0aW9uIik7CiAgICAgICAgICBSYS5wdXNoKHRoaXMpOwogICAgICAgICAgMSA9PT0gUmEubGVuZ3RoICYmIFRhICYmIFRhKFNhKTsKICAgICAgICAgIHRoaXMubWEuS2EgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgay5nZXRJbmhlcml0ZWRJbnN0YW5jZUNvdW50ID0gKCkgPT4gT2JqZWN0LmtleXMoVWEpLmxlbmd0aDsKICAgICAgay5nZXRMaXZlSW5oZXJpdGVkSW5zdGFuY2VzID0gKCkgPT4gewogICAgICAgIHZhciBhID0gW10sIGI7CiAgICAgICAgZm9yIChiIGluIFVhKSBVYS5oYXNPd25Qcm9wZXJ0eShiKSAmJiBhLnB1c2goVWFbYl0pOwogICAgICAgIHJldHVybiBhOwogICAgICB9OwogICAgICBrLmZsdXNoUGVuZGluZ0RlbGV0ZXMgPSBTYTsKICAgICAgay5zZXREZWxheUZ1bmN0aW9uID0gKGEpID0+IHsKICAgICAgICBUYSA9IGE7CiAgICAgICAgUmEubGVuZ3RoICYmIFRhICYmIFRhKFNhKTsKICAgICAgfTsKICAgICAgT2JqZWN0LmFzc2lnbihqYi5wcm90b3R5cGUsIHsKICAgICAgICBlYihhKSB7CiAgICAgICAgICB0aGlzLlphICYmIChhID0gdGhpcy5aYShhKSk7CiAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9LAogICAgICAgIFhhKGEpIHsKICAgICAgICAgIHRoaXMuRmE/LihhKTsKICAgICAgICB9LAogICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBLLAogICAgICAgIGZyb21XaXJlVHlwZTogZnVuY3Rpb24oYSkgewogICAgICAgICAgZnVuY3Rpb24gYigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuUWEgPyBYYSh0aGlzLnhhLkxhLCB7IHphOiB0aGlzLmpiLCB5YTogYywgRGE6IHRoaXMsIEFhOiBhIH0pIDogWGEodGhpcy54YS5MYSwgeyB6YTogdGhpcywgeWE6IGEgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgYyA9IHRoaXMuZWIoYSk7CiAgICAgICAgICBpZiAoIWMpIHJldHVybiB0aGlzLlhhKGEpLCBudWxsOwogICAgICAgICAgdmFyIGQgPSBWYSh0aGlzLnhhLCBjKTsKICAgICAgICAgIGlmICh2b2lkIDAgIT09IGQpIHsKICAgICAgICAgICAgaWYgKDAgPT09IGQubWEuY291bnQudmFsdWUpIHJldHVybiBkLm1hLnlhID0gYywgZC5tYS5BYSA9IGEsIGQuY2xvbmUoKTsKICAgICAgICAgICAgZCA9IGQuY2xvbmUoKTsKICAgICAgICAgICAgdGhpcy5YYShhKTsKICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgICB9CiAgICAgICAgICBkID0gdGhpcy54YS5jYihjKTsKICAgICAgICAgIGQgPSBRYVtkXTsKICAgICAgICAgIGlmICghZCkgcmV0dXJuIGIuY2FsbCh0aGlzKTsKICAgICAgICAgIGQgPSB0aGlzLlBhID8gZC4kYSA6IGQucG9pbnRlclR5cGU7CiAgICAgICAgICB2YXIgZSA9IFBhKGMsIHRoaXMueGEsIGQueGEpOwogICAgICAgICAgcmV0dXJuIG51bGwgPT09IGUgPyBiLmNhbGwodGhpcykgOiB0aGlzLlFhID8gWGEoZC54YS5MYSwgeyB6YTogZCwgeWE6IGUsIERhOiB0aGlzLCBBYTogYSB9KSA6IFhhKGQueGEuTGEsIHsgemE6IGQsIHlhOiBlIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG5iID0gay5VbmJvdW5kVHlwZUVycm9yID0gKChhLCBiKSA9PiB7CiAgICAgICAgdmFyIGMgPSBaYShiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICB0aGlzLm5hbWUgPSBiOwogICAgICAgICAgdGhpcy5tZXNzYWdlID0gZDsKICAgICAgICAgIGQgPSBFcnJvcihkKS5zdGFjazsKICAgICAgICAgIHZvaWQgMCAhPT0gZCAmJiAodGhpcy5zdGFjayA9IHRoaXMudG9TdHJpbmcoKSArICJcbiIgKyBkLnJlcGxhY2UoL15FcnJvcig6W15cbl0qKT9cbi8sICIiKSk7CiAgICAgICAgfSk7CiAgICAgICAgYy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTsKICAgICAgICBjLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGM7CiAgICAgICAgYy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMubWVzc2FnZSA/IHRoaXMubmFtZSA6IGAke3RoaXMubmFtZX06ICR7dGhpcy5tZXNzYWdlfWA7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gYzsKICAgICAgfSkoRXJyb3IsICJVbmJvdW5kVHlwZUVycm9yIik7CiAgICAgIFYucHVzaCgwLCAxLCB2b2lkIDAsIDEsIG51bGwsIDEsIHRydWUsIDEsIGZhbHNlLCAxKTsKICAgICAgay5jb3VudF9lbXZhbF9oYW5kbGVzID0gKCkgPT4gVi5sZW5ndGggLyAyIC0gNSAtIHZiLmxlbmd0aDsKICAgICAgdmFyIG1jID0gewogICAgICAgIGM6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICByYSgKICAgICAgICAgICAgYEFzc2VydGlvbiBmYWlsZWQ6ICR7YSA/IEooQSwgYSkgOiAiIn0sIGF0OiBgICsgW2IgPyBiID8gSihBLCBiKSA6ICIiIDogInVua25vd24gZmlsZW5hbWUiLCBjLCBkID8gZCA/IEooQSwgZCkgOiAiIiA6ICJ1bmtub3duIGZ1bmN0aW9uIl0KICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICBtOiAoYSwgYiwgYykgPT4gewogICAgICAgICAgdmFyIGQgPSBuZXcgQWEoYSk7CiAgICAgICAgICBGW2QueWEgKyAxNiA+PiAyXSA9IDA7CiAgICAgICAgICBGW2QueWEgKyA0ID4+IDJdID0gYjsKICAgICAgICAgIEZbZC55YSArIDggPj4gMl0gPSBjOwogICAgICAgICAgQmEgPSBhOwogICAgICAgICAgQ2ErKzsKICAgICAgICAgIHRocm93IEJhOwogICAgICAgIH0sCiAgICAgICAgQjogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIFA6ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIE06ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIFI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKICAgICAgICBOOiAoKSA9PiB7CiAgICAgICAgfSwKICAgICAgICBBOiBmdW5jdGlvbigpIHsKICAgICAgICB9LAogICAgICAgIE86ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIHY6IChhKSA9PiB7CiAgICAgICAgICB2YXIgYiA9IEZhW2FdOwogICAgICAgICAgZGVsZXRlIEZhW2FdOwogICAgICAgICAgdmFyIGMgPSBiLlVhLCBkID0gYi5GYSwgZSA9IGIuWWEsIGYgPSBlLm1hcCgobCkgPT4gbC5oYikuY29uY2F0KGUubWFwKChsKSA9PiBsLm5iKSk7CiAgICAgICAgICBQKFthXSwgZiwgKGwpID0+IHsKICAgICAgICAgICAgdmFyIGggPSB7fTsKICAgICAgICAgICAgZS5mb3JFYWNoKChuLCBtKSA9PiB7CiAgICAgICAgICAgICAgdmFyIHAgPSBsW21dLCB1ID0gbi5mYiwgdiA9IG4uZ2IsIGcgPSBsW20gKyBlLmxlbmd0aF0sIHEgPSBuLm1iLCByID0gbi5vYjsKICAgICAgICAgICAgICBoW24uYmJdID0gewogICAgICAgICAgICAgICAgcmVhZDogKHopID0+IHAuZnJvbVdpcmVUeXBlKHUodiwgeikpLAogICAgICAgICAgICAgICAgd3JpdGU6ICh6LCBOKSA9PiB7CiAgICAgICAgICAgICAgICAgIHZhciBEID0gW107CiAgICAgICAgICAgICAgICAgIHEociwgeiwgZy50b1dpcmVUeXBlKEQsIE4pKTsKICAgICAgICAgICAgICAgICAgR2EoRCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZTogYi5uYW1lLAogICAgICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiAobikgPT4gewogICAgICAgICAgICAgICAgICB2YXIgbSA9IHt9LCBwOwogICAgICAgICAgICAgICAgICBmb3IgKHAgaW4gaCkgbVtwXSA9IGhbcF0ucmVhZChuKTsKICAgICAgICAgICAgICAgICAgZChuKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdG9XaXJlVHlwZTogKG4sIG0pID0+IHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBoKSBpZiAoIShwIGluIG0pKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBNaXNzaW5nIGZpZWxkOiAiJHtwfSJgKTsKICAgICAgICAgICAgICAgICAgdmFyIHUgPSBjKCk7CiAgICAgICAgICAgICAgICAgIGZvciAocCBpbiBoKSBoW3BdLndyaXRlKHUsIG1bcF0pOwogICAgICAgICAgICAgICAgICBudWxsICE9PSBuICYmIG4ucHVzaChkLCB1KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHU7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXJnUGFja0FkdmFuY2U6IDgsCiAgICAgICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogSywKICAgICAgICAgICAgICAgIEVhOiBkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICBdOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBJOiAoKSA9PiB7CiAgICAgICAgfSwKICAgICAgICBZOiAoYSwgYiwgYywgZCkgPT4gewogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBPKGEsIHsKICAgICAgICAgICAgbmFtZTogYiwKICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgcmV0dXJuICEhZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9XaXJlVHlwZTogZnVuY3Rpb24oZSwgZikgewogICAgICAgICAgICAgIHJldHVybiBmID8gYyA6IGQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShBW2VdKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgRWE6IG51bGwKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgcjogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0sIHAsIHUsIHYpID0+IHsKICAgICAgICAgIHAgPSBRKHApOwogICAgICAgICAgZiA9IFQoZSwgZik7CiAgICAgICAgICBoICYmIChoID0gVChsLCBoKSk7CiAgICAgICAgICBtICYmIChtID0gVChuLCBtKSk7CiAgICAgICAgICB2ID0gVCh1LCB2KTsKICAgICAgICAgIHZhciBnID0gYmIocCk7CiAgICAgICAgICBhYihnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcWIoYENhbm5vdCBjb25zdHJ1Y3QgJHtwfSBkdWUgdG8gdW5ib3VuZCB0eXBlc2AsIFtkXSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIFAoW2EsIGIsIGNdLCBkID8gW2RdIDogW10sIChxKSA9PiB7CiAgICAgICAgICAgIHEgPSBxWzBdOwogICAgICAgICAgICBpZiAoZCkgewogICAgICAgICAgICAgIHZhciByID0gcS54YTsKICAgICAgICAgICAgICB2YXIgeiA9IHIuTGE7CiAgICAgICAgICAgIH0gZWxzZSB6ID0gWWEucHJvdG90eXBlOwogICAgICAgICAgICBxID0gWmEocCwgZnVuY3Rpb24oLi4uTmEpIHsKICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpICE9PSBOKSB0aHJvdyBuZXcgUigiVXNlICduZXcnIHRvIGNvbnN0cnVjdCAiICsgcCk7CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gRC5IYSkgdGhyb3cgbmV3IFIocCArICIgaGFzIG5vIGFjY2Vzc2libGUgY29uc3RydWN0b3IiKTsKICAgICAgICAgICAgICB2YXIgeGIgPSBELkhhW05hLmxlbmd0aF07CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0geGIpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgICAgYFRyaWVkIHRvIGludm9rZSBjdG9yIG9mICR7cH0gd2l0aCBpbnZhbGlkIG51bWJlciBvZiBwYXJhbWV0ZXJzICgke05hLmxlbmd0aH0pIC0gZXhwZWN0ZWQgKCR7T2JqZWN0LmtleXMoRC5IYSkudG9TdHJpbmcoKX0pIHBhcmFtZXRlcnMgaW5zdGVhZCFgCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybiB4Yi5hcHBseSh0aGlzLCBOYSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgTiA9IE9iamVjdC5jcmVhdGUoeiwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogcSB9IH0pOwogICAgICAgICAgICBxLnByb3RvdHlwZSA9IE47CiAgICAgICAgICAgIHZhciBEID0gbmV3IGNiKHAsIHEsIE4sIHYsIHIsIGYsIGgsIG0pOwogICAgICAgICAgICBpZiAoRC5DYSkgewogICAgICAgICAgICAgIHZhciBpYTsKICAgICAgICAgICAgICAoaWEgPSBELkNhKS5XYSA/PyAoaWEuV2EgPSBbXSk7CiAgICAgICAgICAgICAgRC5DYS5XYS5wdXNoKEQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHIgPSBuZXcgamIocCwgRCwgdHJ1ZSwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgaWEgPSBuZXcgamIocCArICIqIiwgRCwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7CiAgICAgICAgICAgIHogPSBuZXcgamIocCArICIgY29uc3QqIiwgRCwgZmFsc2UsIHRydWUsIGZhbHNlKTsKICAgICAgICAgICAgUWFbYV0gPSB7IHBvaW50ZXJUeXBlOiBpYSwgJGE6IHogfTsKICAgICAgICAgICAga2IoZywgcSk7CiAgICAgICAgICAgIHJldHVybiBbciwgaWEsIHpdOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBxOiAoYSwgYiwgYywgZCwgZSwgZikgPT4gewogICAgICAgICAgdmFyIGwgPSByYihiLCBjKTsKICAgICAgICAgIGUgPSBUKGQsIGUpOwogICAgICAgICAgUChbXSwgW2FdLCAoaCkgPT4gewogICAgICAgICAgICBoID0gaFswXTsKICAgICAgICAgICAgdmFyIG4gPSBgY29uc3RydWN0b3IgJHtoLm5hbWV9YDsKICAgICAgICAgICAgdm9pZCAwID09PSBoLnhhLkhhICYmIChoLnhhLkhhID0gW10pOwogICAgICAgICAgICBpZiAodm9pZCAwICE9PSBoLnhhLkhhW2IgLSAxXSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgIGBDYW5ub3QgcmVnaXN0ZXIgbXVsdGlwbGUgY29uc3RydWN0b3JzIHdpdGggaWRlbnRpY2FsIG51bWJlciBvZiBwYXJhbWV0ZXJzICgke2IgLSAxfSkgZm9yIGNsYXNzICcke2gubmFtZX0nISBPdmVybG9hZCByZXNvbHV0aW9uIGlzIGN1cnJlbnRseSBvbmx5IHBlcmZvcm1lZCB1c2luZyB0aGUgcGFyYW1ldGVyIGNvdW50LCBub3QgYWN0dWFsIHR5cGUgaW5mbyFgCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgaC54YS5IYVtiIC0gMV0gPSAoKSA9PiB7CiAgICAgICAgICAgICAgcWIoYENhbm5vdCBjb25zdHJ1Y3QgJHtoLm5hbWV9IGR1ZSB0byB1bmJvdW5kIHR5cGVzYCwgbCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIFAoW10sIGwsIChtKSA9PiB7CiAgICAgICAgICAgICAgbS5zcGxpY2UoMSwgMCwgbnVsbCk7CiAgICAgICAgICAgICAgaC54YS5IYVtiIC0gMV0gPSB0YihuLCBtLCBudWxsLCBlLCBmKTsKICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGY6IChhLCBiLCBjLCBkLCBlLCBmLCBsLCBoKSA9PiB7CiAgICAgICAgICB2YXIgbiA9IHJiKGMsIGQpOwogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBiID0gdWIoYik7CiAgICAgICAgICBmID0gVChlLCBmKTsKICAgICAgICAgIFAoW10sIFthXSwgKG0pID0+IHsKICAgICAgICAgICAgZnVuY3Rpb24gcCgpIHsKICAgICAgICAgICAgICBxYihgQ2Fubm90IGNhbGwgJHt1fSBkdWUgdG8gdW5ib3VuZCB0eXBlc2AsIG4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG0gPSBtWzBdOwogICAgICAgICAgICB2YXIgdSA9IGAke20ubmFtZX0uJHtifWA7CiAgICAgICAgICAgIGIuc3RhcnRzV2l0aCgiQEAiKSAmJiAoYiA9IFN5bWJvbFtiLnN1YnN0cmluZygyKV0pOwogICAgICAgICAgICBoICYmIG0ueGEua2IucHVzaChiKTsKICAgICAgICAgICAgdmFyIHYgPSBtLnhhLkxhLCBnID0gdltiXTsKICAgICAgICAgICAgdm9pZCAwID09PSBnIHx8IHZvaWQgMCA9PT0gZy5CYSAmJiBnLmNsYXNzTmFtZSAhPT0gbS5uYW1lICYmIGcuT2EgPT09IGMgLSAyID8gKHAuT2EgPSBjIC0gMiwgcC5jbGFzc05hbWUgPSBtLm5hbWUsIHZbYl0gPSBwKSA6ICgkYSh2LCBiLCB1KSwgdltiXS5CYVtjIC0gMl0gPSBwKTsKICAgICAgICAgICAgUChbXSwgbiwgKHEpID0+IHsKICAgICAgICAgICAgICBxID0gdGIodSwgcSwgbSwgZiwgbCk7CiAgICAgICAgICAgICAgdm9pZCAwID09PSB2W2JdLkJhID8gKHEuT2EgPSBjIC0gMiwgdltiXSA9IHEpIDogdltiXS5CYVtjIC0gMl0gPSBxOwogICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgWDogKGEpID0+IE8oYSwgemIpLAogICAgICAgIHg6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgICAgfQogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBlLnZhbHVlcyA9IHt9OwogICAgICAgICAgTyhhLCB7CiAgICAgICAgICAgIG5hbWU6IGIsCiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBlLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGZ1bmN0aW9uKGYpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci52YWx1ZXNbZl07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IChmLCBsKSA9PiBsLnZhbHVlLAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IEFiKGIsIGMsIGQpLAogICAgICAgICAgICBFYTogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgICBhYihiLCBlKTsKICAgICAgICB9LAogICAgICAgIGs6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICB2YXIgZCA9IEJiKGEsICJlbnVtIik7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIGEgPSBkLmNvbnN0cnVjdG9yOwogICAgICAgICAgZCA9IE9iamVjdC5jcmVhdGUoZC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHsKICAgICAgICAgICAgdmFsdWU6IHsgdmFsdWU6IGMgfSwKICAgICAgICAgICAgY29uc3RydWN0b3I6IHsgdmFsdWU6IFphKGAke2QubmFtZX1fJHtifWAsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB9KSB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGEudmFsdWVzW2NdID0gZDsKICAgICAgICAgIGFbYl0gPSBkOwogICAgICAgIH0sCiAgICAgICAgQzogKGEsIGIsIGMpID0+IHsKICAgICAgICAgIGIgPSBRKGIpOwogICAgICAgICAgTyhhLCB7CiAgICAgICAgICAgIG5hbWU6IGIsCiAgICAgICAgICAgIGZyb21XaXJlVHlwZTogKGQpID0+IGQsCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IChkLCBlKSA9PiBlLAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IENiKGIsIGMpLAogICAgICAgICAgICBFYTogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBFOiAoYSwgYiwgYywgZCwgZSwgZikgPT4gewogICAgICAgICAgdmFyIGwgPSByYihiLCBjKTsKICAgICAgICAgIGEgPSBRKGEpOwogICAgICAgICAgYSA9IHViKGEpOwogICAgICAgICAgZSA9IFQoZCwgZSk7CiAgICAgICAgICBhYigKICAgICAgICAgICAgYSwKICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcWIoYENhbm5vdCBjYWxsICR7YX0gZHVlIHRvIHVuYm91bmQgdHlwZXNgLCBsKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYiAtIDEKICAgICAgICAgICk7CiAgICAgICAgICBQKFtdLCBsLCAoaCkgPT4gewogICAgICAgICAgICBrYihhLCB0YihhLCBbaFswXSwgbnVsbF0uY29uY2F0KGguc2xpY2UoMSkpLCBudWxsLCBlLCBmKSwgYiAtIDEpOwogICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGw6IChhLCBiLCBjLCBkLCBlKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIC0xID09PSBlICYmIChlID0gNDI5NDk2NzI5NSk7CiAgICAgICAgICBlID0gKGgpID0+IGg7CiAgICAgICAgICBpZiAoMCA9PT0gZCkgewogICAgICAgICAgICB2YXIgZiA9IDMyIC0gOCAqIGM7CiAgICAgICAgICAgIGUgPSAoaCkgPT4gaCA8PCBmID4+PiBmOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGwgPSBiLmluY2x1ZGVzKCJ1bnNpZ25lZCIpID8gZnVuY3Rpb24oaCwgbikgewogICAgICAgICAgICByZXR1cm4gbiA+Pj4gMDsKICAgICAgICAgIH0gOiBmdW5jdGlvbihoLCBuKSB7CiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgfTsKICAgICAgICAgIE8oYSwgewogICAgICAgICAgICBuYW1lOiBiLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGUsCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IGwsCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogRGIoYiwgYywgMCAhPT0gZCksCiAgICAgICAgICAgIEVhOiBudWxsCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGc6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICBmdW5jdGlvbiBkKGYpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBlKHkuYnVmZmVyLCBGW2YgKyA0ID4+IDJdLCBGW2YgPj4gMl0pOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGUgPSBbSW50OEFycmF5LCBVaW50OEFycmF5LCBJbnQxNkFycmF5LCBVaW50MTZBcnJheSwgSW50MzJBcnJheSwgVWludDMyQXJyYXksIEZsb2F0MzJBcnJheSwgRmxvYXQ2NEFycmF5XVtiXTsKICAgICAgICAgIGMgPSBRKGMpOwogICAgICAgICAgTyhhLCB7IG5hbWU6IGMsIGZyb21XaXJlVHlwZTogZCwgYXJnUGFja0FkdmFuY2U6IDgsIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBkIH0sIHsgaWI6IHRydWUgfSk7CiAgICAgICAgfSwKICAgICAgICB3OiAoYSkgPT4gewogICAgICAgICAgTyhhLCB6Yik7CiAgICAgICAgfSwKICAgICAgICBjYTogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0sIHAsIHUpID0+IHsKICAgICAgICAgIGMgPSBRKGMpOwogICAgICAgICAgZiA9IFQoZSwgZik7CiAgICAgICAgICBoID0gVChsLCBoKTsKICAgICAgICAgIG0gPSBUKG4sIG0pOwogICAgICAgICAgdSA9IFQocCwgdSk7CiAgICAgICAgICBQKFthXSwgW2JdLCAodikgPT4gewogICAgICAgICAgICB2ID0gdlswXTsKICAgICAgICAgICAgcmV0dXJuIFtuZXcgamIoYywgdi54YSwgZmFsc2UsIGZhbHNlLCB0cnVlLCB2LCBkLCBmLCBoLCBtLCB1KV07CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIEQ6IChhLCBiKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIHZhciBjID0gInN0ZDo6c3RyaW5nIiA9PT0gYjsKICAgICAgICAgIE8oYSwgewogICAgICAgICAgICBuYW1lOiBiLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICB2YXIgZSA9IEZbZCA+PiAyXSwgZiA9IGQgKyA0OwogICAgICAgICAgICAgIGlmIChjKQogICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IGYsIGggPSAwOyBoIDw9IGU7ICsraCkgewogICAgICAgICAgICAgICAgICB2YXIgbiA9IGYgKyBoOwogICAgICAgICAgICAgICAgICBpZiAoaCA9PSBlIHx8IDAgPT0gQVtuXSkgewogICAgICAgICAgICAgICAgICAgIGwgPSBsID8gSihBLCBsLCBuIC0gbCkgOiAiIjsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBtKSB2YXIgbSA9IGw7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBtICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMCksIG0gKz0gbDsKICAgICAgICAgICAgICAgICAgICBsID0gbiArIDE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIG0gPSBBcnJheShlKTsKICAgICAgICAgICAgICAgIGZvciAoaCA9IDA7IGggPCBlOyArK2gpIG1baF0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKEFbZiArIGhdKTsKICAgICAgICAgICAgICAgIG0gPSBtLmpvaW4oIiIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBVKGQpOwogICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b1dpcmVUeXBlOiBmdW5jdGlvbihkLCBlKSB7CiAgICAgICAgICAgICAgZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyICYmIChlID0gbmV3IFVpbnQ4QXJyYXkoZSkpOwogICAgICAgICAgICAgIHZhciBmID0gInN0cmluZyIgPT0gdHlwZW9mIGU7CiAgICAgICAgICAgICAgaWYgKCEoZiB8fCBlIGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBlIGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkgfHwgZSBpbnN0YW5jZW9mIEludDhBcnJheSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigiQ2Fubm90IHBhc3Mgbm9uLXN0cmluZyB0byBzdGQ6OnN0cmluZyIpOwogICAgICAgICAgICAgIHZhciBsID0gYyAmJiBmID8gRGEoZSkgOiBlLmxlbmd0aDsKICAgICAgICAgICAgICB2YXIgaCA9IGJjKDQgKyBsICsgMSksIG4gPSBoICsgNDsKICAgICAgICAgICAgICBGW2ggPj4gMl0gPSBsOwogICAgICAgICAgICAgIGlmIChjICYmIGYpIEVhKGUsIEEsIG4sIGwgKyAxKTsKICAgICAgICAgICAgICBlbHNlIGlmIChmKQogICAgICAgICAgICAgICAgZm9yIChmID0gMDsgZiA8IGw7ICsrZikgewogICAgICAgICAgICAgICAgICB2YXIgbSA9IGUuY2hhckNvZGVBdChmKTsKICAgICAgICAgICAgICAgICAgaWYgKDI1NSA8IG0pIHRocm93IFUobiksIG5ldyBSKCJTdHJpbmcgaGFzIFVURi0xNiBjb2RlIHVuaXRzIHRoYXQgZG8gbm90IGZpdCBpbiA4IGJpdHMiKTsKICAgICAgICAgICAgICAgICAgQVtuICsgZl0gPSBtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgZm9yIChmID0gMDsgZiA8IGw7ICsrZikgQVtuICsgZl0gPSBlW2ZdOwogICAgICAgICAgICAgIG51bGwgIT09IGQgJiYgZC5wdXNoKFUsIGgpOwogICAgICAgICAgICAgIHJldHVybiBoOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IEssCiAgICAgICAgICAgIEVhKGQpIHsKICAgICAgICAgICAgICBVKGQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHU6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICBjID0gUShjKTsKICAgICAgICAgIGlmICgyID09PSBiKSB7CiAgICAgICAgICAgIHZhciBkID0gRmI7CiAgICAgICAgICAgIHZhciBlID0gR2I7CiAgICAgICAgICAgIHZhciBmID0gSGI7CiAgICAgICAgICAgIHZhciBsID0gKGgpID0+IENbaCA+PiAxXTsKICAgICAgICAgIH0gZWxzZSA0ID09PSBiICYmIChkID0gSWIsIGUgPSBKYiwgZiA9IEtiLCBsID0gKGgpID0+IEZbaCA+PiAyXSk7CiAgICAgICAgICBPKGEsIHsKICAgICAgICAgICAgbmFtZTogYywKICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiAoaCkgPT4gewogICAgICAgICAgICAgIGZvciAodmFyIG4gPSBGW2ggPj4gMl0sIG0sIHAgPSBoICsgNCwgdSA9IDA7IHUgPD0gbjsgKyt1KSB7CiAgICAgICAgICAgICAgICB2YXIgdiA9IGggKyA0ICsgdSAqIGI7CiAgICAgICAgICAgICAgICBpZiAodSA9PSBuIHx8IDAgPT0gbCh2KSkKICAgICAgICAgICAgICAgICAgcCA9IGQocCwgdiAtIHApLCB2b2lkIDAgPT09IG0gPyBtID0gcCA6IChtICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMCksIG0gKz0gcCksIHAgPSB2ICsgYjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgVShoKTsKICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9XaXJlVHlwZTogKGgsIG4pID0+IHsKICAgICAgICAgICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIG4pIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyBub24tc3RyaW5nIHRvIEMrKyBzdHJpbmcgdHlwZSAke2N9YCk7CiAgICAgICAgICAgICAgdmFyIG0gPSBmKG4pLCBwID0gYmMoNCArIG0gKyBiKTsKICAgICAgICAgICAgICBGW3AgPj4gMl0gPSBtIC8gYjsKICAgICAgICAgICAgICBlKG4sIHAgKyA0LCBtICsgYik7CiAgICAgICAgICAgICAgbnVsbCAhPT0gaCAmJiBoLnB1c2goVSwgcCk7CiAgICAgICAgICAgICAgcmV0dXJuIHA7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogSywKICAgICAgICAgICAgRWEoaCkgewogICAgICAgICAgICAgIFUoaCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgczogKGEsIGIsIGMsIGQsIGUsIGYpID0+IHsKICAgICAgICAgIEZhW2FdID0geyBuYW1lOiBRKGIpLCBVYTogVChjLCBkKSwgRmE6IFQoZSwgZiksIFlhOiBbXSB9OwogICAgICAgIH0sCiAgICAgICAgajogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0pID0+IHsKICAgICAgICAgIEZhW2FdLllhLnB1c2goeyBiYjogUShiKSwgaGI6IGMsIGZiOiBUKGQsIGUpLCBnYjogZiwgbmI6IGwsIG1iOiBUKGgsIG4pLCBvYjogbSB9KTsKICAgICAgICB9LAogICAgICAgIFo6IChhLCBiKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIE8oYSwgeyB1YjogdHJ1ZSwgbmFtZTogYiwgYXJnUGFja0FkdmFuY2U6IDAsIGZyb21XaXJlVHlwZTogKCkgPT4gewogICAgICAgICAgfSwgdG9XaXJlVHlwZTogKCkgPT4gewogICAgICAgICAgfSB9KTsKICAgICAgICB9LAogICAgICAgIEo6ICgpID0+IHsKICAgICAgICAgIHRocm93IEluZmluaXR5OwogICAgICAgIH0sCiAgICAgICAgYWE6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBhID0gTGJbYV07CiAgICAgICAgICBiID0geWIoYik7CiAgICAgICAgICByZXR1cm4gYShudWxsLCBiLCBjLCBkKTsKICAgICAgICB9LAogICAgICAgIEY6IHdiLAogICAgICAgICQ6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICB2YXIgZCA9IE5iKGEsIGIpLCBlID0gZC5zaGlmdCgpOwogICAgICAgICAgYS0tOwogICAgICAgICAgdmFyIGYgPSBBcnJheShhKTsKICAgICAgICAgIGIgPSBgbWV0aG9kQ2FsbGVyPCgke2QubWFwKChsKSA9PiBsLm5hbWUpLmpvaW4oIiwgIil9KSA9PiAke2UubmFtZX0+YDsKICAgICAgICAgIHJldHVybiBNYigKICAgICAgICAgICAgWmEoYiwgKGwsIGgsIG4sIG0pID0+IHsKICAgICAgICAgICAgICBmb3IgKHZhciBwID0gMCwgdSA9IDA7IHUgPCBhOyArK3UpIGZbdV0gPSBkW3VdLnJlYWRWYWx1ZUZyb21Qb2ludGVyKG0gKyBwKSwgcCArPSBkW3VdLmFyZ1BhY2tBZHZhbmNlOwogICAgICAgICAgICAgIGggPSAxID09PSBjID8gT2IoaCwgZikgOiBoLmFwcGx5KGwsIGYpOwogICAgICAgICAgICAgIGwgPSBbXTsKICAgICAgICAgICAgICBoID0gZS50b1dpcmVUeXBlKGwsIGgpOwogICAgICAgICAgICAgIGwubGVuZ3RoICYmIChGW24gPj4gMl0gPSBoYihsKSk7CiAgICAgICAgICAgICAgcmV0dXJuIGg7CiAgICAgICAgICAgIH0pCiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICAgYmE6IChhKSA9PiB7CiAgICAgICAgICA5IDwgYSAmJiAoVlthICsgMV0gKz0gMSk7CiAgICAgICAgfSwKICAgICAgICBfOiAoYSkgPT4gewogICAgICAgICAgdmFyIGIgPSB5YihhKTsKICAgICAgICAgIEdhKGIpOwogICAgICAgICAgd2IoYSk7CiAgICAgICAgfSwKICAgICAgICBvOiAoYSwgYikgPT4gewogICAgICAgICAgYSA9IEJiKGEsICJfZW12YWxfdGFrZV92YWx1ZSIpOwogICAgICAgICAgYSA9IGEucmVhZFZhbHVlRnJvbVBvaW50ZXIoYik7CiAgICAgICAgICByZXR1cm4gaGIoYSk7CiAgICAgICAgfSwKICAgICAgICBXOiAoKSA9PiB7CiAgICAgICAgICByYSgiIik7CiAgICAgICAgfSwKICAgICAgICBWOiAoKSA9PiBwZXJmb3JtYW5jZS5ub3coKSwKICAgICAgICBMOiAoYSkgPT4gewogICAgICAgICAgdmFyIGIgPSBBLmxlbmd0aDsKICAgICAgICAgIGEgPj4+PSAwOwogICAgICAgICAgaWYgKDIxNDc0ODM2NDggPCBhKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICBmb3IgKHZhciBjID0gMTsgNCA+PSBjOyBjICo9IDIpIHsKICAgICAgICAgICAgdmFyIGQgPSBiICogKDEgKyAwLjIgLyBjKTsKICAgICAgICAgICAgZCA9IE1hdGgubWluKGQsIGEgKyAxMDA2NjMyOTYpOwogICAgICAgICAgICB2YXIgZSA9IE1hdGg7CiAgICAgICAgICAgIGQgPSBNYXRoLm1heChhLCBkKTsKICAgICAgICAgICAgYTogewogICAgICAgICAgICAgIGUgPSAoZS5taW4uY2FsbChlLCAyMTQ3NDgzNjQ4LCBkICsgKDY1NTM2IC0gZCAlIDY1NTM2KSAlIDY1NTM2KSAtIGZhLmJ1ZmZlci5ieXRlTGVuZ3RoICsgNjU1MzUpIC8gNjU1MzY7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZhLmdyb3coZSk7CiAgICAgICAgICAgICAgICBsYSgpOwogICAgICAgICAgICAgICAgdmFyIGYgPSAxOwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICB9IGNhdGNoIChsKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGYgPSB2b2lkIDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGYpIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgUzogKGEsIGIpID0+IHsKICAgICAgICAgIHZhciBjID0gMDsKICAgICAgICAgIFJiKCkuZm9yRWFjaCgoZCwgZSkgPT4gewogICAgICAgICAgICB2YXIgZiA9IGIgKyBjOwogICAgICAgICAgICBlID0gRlthICsgNCAqIGUgPj4gMl0gPSBmOwogICAgICAgICAgICBmb3IgKGYgPSAwOyBmIDwgZC5sZW5ndGg7ICsrZikgeVtlKytdID0gZC5jaGFyQ29kZUF0KGYpOwogICAgICAgICAgICB5W2VdID0gMDsKICAgICAgICAgICAgYyArPSBkLmxlbmd0aCArIDE7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0sCiAgICAgICAgVDogKGEsIGIpID0+IHsKICAgICAgICAgIHZhciBjID0gUmIoKTsKICAgICAgICAgIEZbYSA+PiAyXSA9IGMubGVuZ3RoOwogICAgICAgICAgdmFyIGQgPSAwOwogICAgICAgICAgYy5mb3JFYWNoKChlKSA9PiBkICs9IGUubGVuZ3RoICsgMSk7CiAgICAgICAgICBGW2IgPj4gMl0gPSBkOwogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKICAgICAgICB0OiAoKSA9PiA1MiwKICAgICAgICB6OiAoKSA9PiA1MiwKICAgICAgICBIOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiA3MDsKICAgICAgICB9LAogICAgICAgIFE6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBmb3IgKHZhciBlID0gMCwgZiA9IDA7IGYgPCBjOyBmKyspIHsKICAgICAgICAgICAgdmFyIGwgPSBGW2IgPj4gMl0sIGggPSBGW2IgKyA0ID4+IDJdOwogICAgICAgICAgICBiICs9IDg7CiAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgaDsgbisrKSB7CiAgICAgICAgICAgICAgdmFyIG0gPSBBW2wgKyBuXSwgcCA9IFNiW2FdOwogICAgICAgICAgICAgIDAgPT09IG0gfHwgMTAgPT09IG0gPyAoKDEgPT09IGEgPyBlYSA6IHcpKEoocCwgMCkpLCBwLmxlbmd0aCA9IDApIDogcC5wdXNoKG0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGUgKz0gaDsKICAgICAgICAgIH0KICAgICAgICAgIEZbZCA+PiAyXSA9IGU7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIFU6IChhLCBiKSA9PiB7CiAgICAgICAgICBVYihBLnN1YmFycmF5KGEsIGEgKyBiKSk7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIGk6IGNjLAogICAgICAgIGQ6IGRjLAogICAgICAgIGU6IGVjLAogICAgICAgIHA6IGZjLAogICAgICAgIHk6IGdjLAogICAgICAgIGI6IGhjLAogICAgICAgIGE6IGljLAogICAgICAgIGg6IGpjLAogICAgICAgIG46IGtjLAogICAgICAgIEc6IGxjLAogICAgICAgIEs6IChhLCBiLCBjLCBkKSA9PiBaYihhLCBiLCBjLCBkKQogICAgICB9LCBXID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZnVuY3Rpb24gYShjKSB7CiAgICAgICAgICBXID0gYy5leHBvcnRzOwogICAgICAgICAgZmEgPSBXLmRhOwogICAgICAgICAgbGEoKTsKICAgICAgICAgIFMgPSBXLmhhOwogICAgICAgICAgbmEudW5zaGlmdChXLmVhKTsKICAgICAgICAgIEctLTsKICAgICAgICAgIGsubW9uaXRvclJ1bkRlcGVuZGVuY2llcz8uKEcpOwogICAgICAgICAgMCA9PSBHICYmIChudWxsICE9PSBxYSAmJiAoY2xlYXJJbnRlcnZhbChxYSksIHFhID0gbnVsbCksIEggJiYgKGMgPSBILCBIID0gbnVsbCwgYygpKSk7CiAgICAgICAgICByZXR1cm4gVzsKICAgICAgICB9CiAgICAgICAgdmFyIGIgPSB7IGE6IG1jIH07CiAgICAgICAgRysrOwogICAgICAgIGsubW9uaXRvclJ1bkRlcGVuZGVuY2llcz8uKEcpOwogICAgICAgIGlmIChrLmluc3RhbnRpYXRlV2FzbSkKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBrLmluc3RhbnRpYXRlV2FzbShiLCBhKTsKICAgICAgICAgIH0gY2F0Y2ggKGMpIHsKICAgICAgICAgICAgdyhgTW9kdWxlLmluc3RhbnRpYXRlV2FzbSBjYWxsYmFjayBmYWlsZWQgd2l0aCBlcnJvcjogJHtjfWApLCBiYShjKTsKICAgICAgICAgIH0KICAgICAgICB4YShiLCBmdW5jdGlvbihjKSB7CiAgICAgICAgICBhKGMuaW5zdGFuY2UpOwogICAgICAgIH0pLmNhdGNoKGJhKTsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0oKSwgYmMgPSAoYSkgPT4gKGJjID0gVy5mYSkoYSksIG9iID0gKGEpID0+IChvYiA9IFcuZ2EpKGEpLCBVID0gKGEpID0+IChVID0gVy5pYSkoYSksIFggPSAoYSwgYikgPT4gKFggPSBXLmphKShhLCBiKSwgWSA9IChhKSA9PiAoWSA9IFcua2EpKGEpLCBaID0gKCkgPT4gKFogPSBXLmxhKSgpOwogICAgICBrLmR5bkNhbGxfaWlqaiA9IChhLCBiLCBjLCBkLCBlLCBmKSA9PiAoay5keW5DYWxsX2lpamogPSBXLm5hKShhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgay5keW5DYWxsX3ZpamogPSAoYSwgYiwgYywgZCwgZSwgZikgPT4gKGsuZHluQ2FsbF92aWpqID0gVy5vYSkoYSwgYiwgYywgZCwgZSwgZik7CiAgICAgIGsuZHluQ2FsbF9qaWlpID0gKGEsIGIsIGMsIGQpID0+IChrLmR5bkNhbGxfamlpaSA9IFcucGEpKGEsIGIsIGMsIGQpOwogICAgICBrLmR5bkNhbGxfamlpID0gKGEsIGIsIGMpID0+IChrLmR5bkNhbGxfamlpID0gVy5xYSkoYSwgYiwgYyk7CiAgICAgIHZhciBuYyA9IGsuZHluQ2FsbF92aWlpaiA9IChhLCBiLCBjLCBkLCBlLCBmKSA9PiAobmMgPSBrLmR5bkNhbGxfdmlpaWogPSBXLnJhKShhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgay5keW5DYWxsX2ppamkgPSAoYSwgYiwgYywgZCwgZSkgPT4gKGsuZHluQ2FsbF9qaWppID0gVy5zYSkoYSwgYiwgYywgZCwgZSk7CiAgICAgIGsuZHluQ2FsbF92aWlqaWkgPSAoYSwgYiwgYywgZCwgZSwgZiwgbCkgPT4gKGsuZHluQ2FsbF92aWlqaWkgPSBXLnRhKShhLCBiLCBjLCBkLCBlLCBmLCBsKTsKICAgICAgay5keW5DYWxsX2lpaWlpaiA9IChhLCBiLCBjLCBkLCBlLCBmLCBsKSA9PiAoay5keW5DYWxsX2lpaWlpaiA9IFcudWEpKGEsIGIsIGMsIGQsIGUsIGYsIGwpOwogICAgICBrLmR5bkNhbGxfaWlpaWlqaiA9IChhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuKSA9PiAoay5keW5DYWxsX2lpaWlpamogPSBXLnZhKShhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuKTsKICAgICAgay5keW5DYWxsX2lpaWlpaWpqID0gKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0pID0+IChrLmR5bkNhbGxfaWlpaWlpamogPSBXLndhKShhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuLCBtKTsKICAgICAgZnVuY3Rpb24gaGMoYSwgYikgewogICAgICAgIHZhciBjID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBTLmdldChhKShiKTsKICAgICAgICB9IGNhdGNoIChkKSB7CiAgICAgICAgICBZKGMpOwogICAgICAgICAgaWYgKGQgIT09IGQgKyAwKSB0aHJvdyBkOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaWMoYSwgYiwgYykgewogICAgICAgIHZhciBkID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBTLmdldChhKShiLCBjKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBZKGQpOwogICAgICAgICAgaWYgKGUgIT09IGUgKyAwKSB0aHJvdyBlOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZWMoYSwgYiwgYywgZCkgewogICAgICAgIHZhciBlID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gUy5nZXQoYSkoYiwgYywgZCk7CiAgICAgICAgfSBjYXRjaCAoZikgewogICAgICAgICAgWShlKTsKICAgICAgICAgIGlmIChmICE9PSBmICsgMCkgdGhyb3cgZjsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRjKGEsIGIsIGMpIHsKICAgICAgICB2YXIgZCA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIFMuZ2V0KGEpKGIsIGMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIFkoZCk7CiAgICAgICAgICBpZiAoZSAhPT0gZSArIDApIHRocm93IGU7CiAgICAgICAgICBYKDEsIDApOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBjYyhhLCBiKSB7CiAgICAgICAgdmFyIGMgPSBaKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBTLmdldChhKShiKTsKICAgICAgICB9IGNhdGNoIChkKSB7CiAgICAgICAgICBZKGMpOwogICAgICAgICAgaWYgKGQgIT09IGQgKyAwKSB0aHJvdyBkOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZmMoYSwgYiwgYywgZCwgZSwgZikgewogICAgICAgIHZhciBsID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gUy5nZXQoYSkoYiwgYywgZCwgZSwgZik7CiAgICAgICAgfSBjYXRjaCAoaCkgewogICAgICAgICAgWShsKTsKICAgICAgICAgIGlmIChoICE9PSBoICsgMCkgdGhyb3cgaDsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGtjKGEsIGIsIGMsIGQsIGUpIHsKICAgICAgICB2YXIgZiA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoYiwgYywgZCwgZSk7CiAgICAgICAgfSBjYXRjaCAobCkgewogICAgICAgICAgWShmKTsKICAgICAgICAgIGlmIChsICE9PSBsICsgMCkgdGhyb3cgbDsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGpjKGEsIGIsIGMsIGQpIHsKICAgICAgICB2YXIgZSA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoYiwgYywgZCk7CiAgICAgICAgfSBjYXRjaCAoZikgewogICAgICAgICAgWShlKTsKICAgICAgICAgIGlmIChmICE9PSBmICsgMCkgdGhyb3cgZjsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdjKGEpIHsKICAgICAgICB2YXIgYiA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoKTsKICAgICAgICB9IGNhdGNoIChjKSB7CiAgICAgICAgICBZKGIpOwogICAgICAgICAgaWYgKGMgIT09IGMgKyAwKSB0aHJvdyBjOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbGMoYSwgYiwgYywgZCwgZSwgZikgewogICAgICAgIHZhciBsID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBuYyhhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgICB9IGNhdGNoIChoKSB7CiAgICAgICAgICBZKGwpOwogICAgICAgICAgaWYgKGggIT09IGggKyAwKSB0aHJvdyBoOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIG9jOwogICAgICBIID0gZnVuY3Rpb24gcGMoKSB7CiAgICAgICAgb2MgfHwgcWMoKTsKICAgICAgICBvYyB8fCAoSCA9IHBjKTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gcWMoKSB7CiAgICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICAgIGlmICghb2MgJiYgKG9jID0gdHJ1ZSwgay5jYWxsZWRSdW4gPSB0cnVlLCAhaGEpKSB7CiAgICAgICAgICAgIHlhKG5hKTsKICAgICAgICAgICAgYWEoayk7CiAgICAgICAgICAgIGlmIChrLm9uUnVudGltZUluaXRpYWxpemVkKSBrLm9uUnVudGltZUluaXRpYWxpemVkKCk7CiAgICAgICAgICAgIGlmIChrLnBvc3RSdW4pCiAgICAgICAgICAgICAgZm9yICgiZnVuY3Rpb24iID09IHR5cGVvZiBrLnBvc3RSdW4gJiYgKGsucG9zdFJ1biA9IFtrLnBvc3RSdW5dKTsgay5wb3N0UnVuLmxlbmd0aDsgKSB7CiAgICAgICAgICAgICAgICB2YXIgYiA9IGsucG9zdFJ1bi5zaGlmdCgpOwogICAgICAgICAgICAgICAgb2EudW5zaGlmdChiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHlhKG9hKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCEoMCA8IEcpKSB7CiAgICAgICAgICBpZiAoay5wcmVSdW4pIGZvciAoImZ1bmN0aW9uIiA9PSB0eXBlb2Ygay5wcmVSdW4gJiYgKGsucHJlUnVuID0gW2sucHJlUnVuXSk7IGsucHJlUnVuLmxlbmd0aDsgKSBwYSgpOwogICAgICAgICAgeWEobWEpOwogICAgICAgICAgMCA8IEcgfHwgKGsuc2V0U3RhdHVzID8gKGsuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgay5zZXRTdGF0dXMoIiIpOwogICAgICAgICAgICB9LCAxKTsKICAgICAgICAgICAgYSgpOwogICAgICAgICAgfSwgMSkpIDogYSgpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGsucHJlSW5pdCkKICAgICAgICBmb3IgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGsucHJlSW5pdCAmJiAoay5wcmVJbml0ID0gW2sucHJlSW5pdF0pOyAwIDwgay5wcmVJbml0Lmxlbmd0aDsgKSBrLnByZUluaXQucG9wKCkoKTsKICAgICAgcWMoKTsKICAgICAgcmV0dXJuIHJlYWR5UHJvbWlzZTsKICAgIH07CiAgfSkoKTsKICB2YXIgZG90bG90dGllX3BsYXllcl9kZWZhdWx0ID0gY3JlYXRlRG90TG90dGllUGxheWVyTW9kdWxlOwoKICAvLyBzcmMvY29yZS9kb3Rsb3R0aWUtd2FzbS1sb2FkZXIudHMKICB2YXIgRG90TG90dGllV2FzbUxvYWRlciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlbmRlcmVyTG9hZGVyIGlzIGEgc3RhdGljIGNsYXNzIGFuZCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkLiIpOwogICAgfQogICAgc3RhdGljIGFzeW5jIF90cnlMb2FkKHVybCkgewogICAgICBjb25zdCBtb2R1bGUgPSBhd2FpdCBkb3Rsb3R0aWVfcGxheWVyX2RlZmF1bHQoeyBsb2NhdGVGaWxlOiAoKSA9PiB1cmwgfSk7CiAgICAgIHJldHVybiBtb2R1bGU7CiAgICB9CiAgICAvKioKICAgICAqIFRyaWVzIHRvIGxvYWQgdGhlIFdBU00gbW9kdWxlIGZyb20gdGhlIHByaW1hcnkgVVJMLCBmYWxsaW5nIGJhY2sgdG8gYSBiYWNrdXAgVVJMIGlmIG5lY2Vzc2FyeS4KICAgICAqIFRocm93cyBhbiBlcnJvciBpZiBib3RoIFVSTHMgZmFpbCB0byBsb2FkIHRoZSBtb2R1bGUuCiAgICAgKiBAcmV0dXJucyBQcm9taXNlPE1vZHVsZT4gLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgbG9hZGVkIG1vZHVsZS4KICAgICAqLwogICAgc3RhdGljIGFzeW5jIF9sb2FkV2l0aEJhY2t1cCgpIHsKICAgICAgaWYgKCF0aGlzLl9Nb2R1bGVQcm9taXNlKSB7CiAgICAgICAgdGhpcy5fTW9kdWxlUHJvbWlzZSA9IHRoaXMuX3RyeUxvYWQodGhpcy5fd2FzbVVSTCkuY2F0Y2goYXN5bmMgKGluaXRpYWxFcnJvcikgPT4gewogICAgICAgICAgY29uc3QgYmFja3VwVXJsID0gYGh0dHBzOi8vdW5wa2cuY29tLyR7UEFDS0FHRV9OQU1FfUAke1BBQ0tBR0VfVkVSU0lPTn0vZGlzdC9kb3Rsb3R0aWUtcGxheWVyLndhc21gOwogICAgICAgICAgY29uc29sZS53YXJuKGBQcmltYXJ5IFdBU00gbG9hZCBmYWlsZWQgZnJvbSAke3RoaXMuX3dhc21VUkx9LiBFcnJvcjogJHtpbml0aWFsRXJyb3IubWVzc2FnZX1gKTsKICAgICAgICAgIGNvbnNvbGUud2FybihgQXR0ZW1wdGluZyB0byBsb2FkIFdBU00gZnJvbSBiYWNrdXAgVVJMOiAke2JhY2t1cFVybH1gKTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl90cnlMb2FkKGJhY2t1cFVybCk7CiAgICAgICAgICB9IGNhdGNoIChiYWNrdXBFcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGBQcmltYXJ5IFdBU00gVVJMIGZhaWxlZDogJHtpbml0aWFsRXJyb3IubWVzc2FnZX1gKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQmFja3VwIFdBU00gVVJMIGZhaWxlZDogJHtiYWNrdXBFcnJvci5tZXNzYWdlfWApOwogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIldBU00gbG9hZGluZyBmYWlsZWQgZnJvbSBhbGwgc291cmNlcy4iKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fTW9kdWxlUHJvbWlzZTsKICAgIH0KICAgIC8qKgogICAgICogUHVibGljIG1ldGhvZCB0byBsb2FkIHRoZSBXZWJBc3NlbWJseSBtb2R1bGUuCiAgICAgKiBVdGlsaXplcyBhIHByaW1hcnkgYW5kIGJhY2t1cCBVUkwgZm9yIHJvYnVzdG5lc3MuCiAgICAgKiBAcmV0dXJucyBQcm9taXNlPE1vZHVsZT4gLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgbG9hZGVkIG1vZHVsZS4KICAgICAqLwogICAgc3RhdGljIGFzeW5jIGxvYWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9sb2FkV2l0aEJhY2t1cCgpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGEgbmV3IFVSTCBmb3IgdGhlIFdBU00gZmlsZSBhbmQgaW52YWxpZGF0ZXMgdGhlIGN1cnJlbnQgbW9kdWxlIHByb21pc2UuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAtICBUaGUgbmV3IFVSTCBmb3IgdGhlIFdBU00gZmlsZS4KICAgICAqLwogICAgc3RhdGljIHNldFdhc21VcmwodXJsKSB7CiAgICAgIHRoaXMuX3dhc21VUkwgPSB1cmw7CiAgICAgIHRoaXMuX01vZHVsZVByb21pc2UgPSBudWxsOwogICAgfQogIH07CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbgogIF9fcHVibGljRmllbGQoRG90TG90dGllV2FzbUxvYWRlciwgIl9Nb2R1bGVQcm9taXNlIiwgbnVsbCk7CiAgLy8gVVJMIGZvciB0aGUgV0FTTSBmaWxlLCBjb25zdHJ1Y3RlZCB1c2luZyBwYWNrYWdlIGluZm9ybWF0aW9uCiAgX19wdWJsaWNGaWVsZChEb3RMb3R0aWVXYXNtTG9hZGVyLCAiX3dhc21VUkwiLCBgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS8ke1BBQ0tBR0VfTkFNRX1AJHtQQUNLQUdFX1ZFUlNJT059L2Rpc3QvZG90bG90dGllLXBsYXllci53YXNtYCk7CgogIC8vIHNyYy9ldmVudC1tYW5hZ2VyLnRzCiAgdmFyIEV2ZW50TWFuYWdlciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfZXZlbnRMaXN0ZW5lcnMiLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTsKICAgIH0KICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgbGV0IGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50TGlzdGVuZXJzLmdldCh0eXBlKTsKICAgICAgaWYgKCFsaXN0ZW5lcnMpIHsKICAgICAgICBsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgIHRoaXMuX2V2ZW50TGlzdGVuZXJzLnNldCh0eXBlLCBsaXN0ZW5lcnMpOwogICAgICB9CiAgICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpOwogICAgfQogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudExpc3RlbmVycy5nZXQodHlwZSk7CiAgICAgIGlmICghbGlzdGVuZXJzKSByZXR1cm47CiAgICAgIGlmIChsaXN0ZW5lcikgewogICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpOwogICAgICAgIGlmIChsaXN0ZW5lcnMuc2l6ZSA9PT0gMCkgewogICAgICAgICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnMuZGVsZXRlKHR5cGUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9ldmVudExpc3RlbmVycy5kZWxldGUodHlwZSk7CiAgICAgIH0KICAgIH0KICAgIGRpc3BhdGNoKGV2ZW50KSB7CiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50TGlzdGVuZXJzLmdldChldmVudC50eXBlKTsKICAgICAgbGlzdGVuZXJzPy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZXZlbnQpKTsKICAgIH0KICAgIHJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzKCkgewogICAgICB0aGlzLl9ldmVudExpc3RlbmVycy5jbGVhcigpOwogICAgfQogIH07CgogIC8vIHNyYy91dGlscy50cwogIGZ1bmN0aW9uIGlzSGV4Q29sb3IoY29sb3IpIHsKICAgIHJldHVybiAvXiMoW1xkYS1mXXs2fXxbXGRhLWZdezh9KSQvaXUudGVzdChjb2xvcik7CiAgfQogIGZ1bmN0aW9uIGhleFN0cmluZ1RvUkdCQUludChjb2xvckhleCkgewogICAgaWYgKCFpc0hleENvbG9yKGNvbG9ySGV4KSkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIGxldCBoZXggPSBjb2xvckhleC5yZXBsYWNlKCIjIiwgIiIpOwogICAgaGV4ID0gaGV4Lmxlbmd0aCA9PT0gNiA/IGAke2hleH1mZmAgOiBoZXg7CiAgICByZXR1cm4gcGFyc2VJbnQoaGV4LCAxNik7CiAgfQogIGZ1bmN0aW9uIGlzRG90TG90dGllKGZpbGVEYXRhKSB7CiAgICBpZiAoZmlsZURhdGEuYnl0ZUxlbmd0aCA8IDQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgY29uc3QgZmlsZVNpZ25hdHVyZSA9IG5ldyBVaW50OEFycmF5KGZpbGVEYXRhLnNsaWNlKDAsIFpJUF9TSUdOQVRVUkUuYnl0ZUxlbmd0aCkpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBaSVBfU0lHTkFUVVJFLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGlmIChaSVBfU0lHTkFUVVJFW2ldICE9PSBmaWxlU2lnbmF0dXJlW2ldKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gaXNMb3R0aWVKU09OKGpzb24pIHsKICAgIHJldHVybiBMT1RUSUVfSlNPTl9NQU5EQVRPUllfRklFTERTLmV2ZXJ5KChmaWVsZCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGpzb24sIGZpZWxkKSk7CiAgfQogIGZ1bmN0aW9uIGlzTG90dGllKGZpbGVEYXRhKSB7CiAgICBpZiAodHlwZW9mIGZpbGVEYXRhID09PSAic3RyaW5nIikgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBpc0xvdHRpZUpTT04oSlNPTi5wYXJzZShmaWxlRGF0YSkpOwogICAgICB9IGNhdGNoIChfZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGlzTG90dGllSlNPTihmaWxlRGF0YSk7CiAgICB9CiAgfQoKICAvLyBzcmMvZG90bG90dGllLnRzCiAgdmFyIGNyZWF0ZUNvcmVNb2RlID0gKG1vZGUsIG1vZHVsZSkgPT4gewogICAgaWYgKG1vZGUgPT09ICJyZXZlcnNlIikgewogICAgICByZXR1cm4gbW9kdWxlLk1vZGUuUmV2ZXJzZTsKICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gImJvdW5jZSIpIHsKICAgICAgcmV0dXJuIG1vZHVsZS5Nb2RlLkJvdW5jZTsKICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gInJldmVyc2UtYm91bmNlIikgewogICAgICByZXR1cm4gbW9kdWxlLk1vZGUuUmV2ZXJzZUJvdW5jZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBtb2R1bGUuTW9kZS5Gb3J3YXJkOwogICAgfQogIH07CiAgdmFyIGNyZWF0ZUNvcmVGaXQgPSAoZml0LCBtb2R1bGUpID0+IHsKICAgIGlmIChmaXQgPT09ICJjb250YWluIikgewogICAgICByZXR1cm4gbW9kdWxlLkZpdC5Db250YWluOwogICAgfSBlbHNlIGlmIChmaXQgPT09ICJjb3ZlciIpIHsKICAgICAgcmV0dXJuIG1vZHVsZS5GaXQuQ292ZXI7CiAgICB9IGVsc2UgaWYgKGZpdCA9PT0gImZpbGwiKSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0LkZpbGw7CiAgICB9IGVsc2UgaWYgKGZpdCA9PT0gImZpdC1oZWlnaHQiKSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0LkZpdEhlaWdodDsKICAgIH0gZWxzZSBpZiAoZml0ID09PSAiZml0LXdpZHRoIikgewogICAgICByZXR1cm4gbW9kdWxlLkZpdC5GaXRXaWR0aDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0Lk5vbmU7CiAgICB9CiAgfTsKICB2YXIgY3JlYXRlQ29yZUFsaWduID0gKGFsaWduLCBtb2R1bGUpID0+IHsKICAgIGNvbnN0IGNvcmVBbGlnbiA9IG5ldyBtb2R1bGUuVmVjdG9yRmxvYXQoKTsKICAgIGNvcmVBbGlnbi5wdXNoX2JhY2soYWxpZ25bMF0pOwogICAgY29yZUFsaWduLnB1c2hfYmFjayhhbGlnblsxXSk7CiAgICByZXR1cm4gY29yZUFsaWduOwogIH07CiAgdmFyIGNyZWF0ZUNvcmVTZWdtZW50ID0gKHNlZ21lbnQsIG1vZHVsZSkgPT4gewogICAgY29uc3QgY29yZXNlZ21lbnQgPSBuZXcgbW9kdWxlLlZlY3RvckZsb2F0KCk7CiAgICBpZiAoc2VnbWVudC5sZW5ndGggIT09IDIpIHJldHVybiBjb3Jlc2VnbWVudDsKICAgIGNvcmVzZWdtZW50LnB1c2hfYmFjayhzZWdtZW50WzBdKTsKICAgIGNvcmVzZWdtZW50LnB1c2hfYmFjayhzZWdtZW50WzFdKTsKICAgIHJldHVybiBjb3Jlc2VnbWVudDsKICB9OwogIHZhciBfRG90TG90dGllID0gY2xhc3MgX0RvdExvdHRpZSB7CiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2NhbnZhcyIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfY29udGV4dCIsIG51bGwpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfZXZlbnRNYW5hZ2VyIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9hbmltYXRpb25GcmFtZUlkIiwgbnVsbCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9mcmFtZU1hbmFnZXIiKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2RvdExvdHRpZUNvcmUiLCBudWxsKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX3JlbmRlckNvbmZpZyIsIHt9KTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2lzRnJvemVuIiwgZmFsc2UpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfYmFja2dyb3VuZENvbG9yIiwgbnVsbCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyVXBNZXRob2QiKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX3BvaW50ZXJEb3duTWV0aG9kIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyTW92ZU1ldGhvZCIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfcG9pbnRlckVudGVyTWV0aG9kIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyRXhpdE1ldGhvZCIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfb25Db21wbGV0ZU1ldGhvZCIpOwogICAgICB0aGlzLl9jYW52YXMgPSBjb25maWcuY2FudmFzOwogICAgICB0aGlzLl9jb250ZXh0ID0gdGhpcy5fY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKTsKICAgICAgdGhpcy5fZnJhbWVNYW5hZ2VyID0gbmV3IEFuaW1hdGlvbkZyYW1lTWFuYWdlcigpOwogICAgICB0aGlzLl9yZW5kZXJDb25maWcgPSBjb25maWcucmVuZGVyQ29uZmlnID8/IHt9OwogICAgICBEb3RMb3R0aWVXYXNtTG9hZGVyLmxvYWQoKS50aGVuKChtb2R1bGUpID0+IHsKICAgICAgICBfRG90TG90dGllLl93YXNtTW9kdWxlID0gbW9kdWxlOwogICAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUgPSBuZXcgbW9kdWxlLkRvdExvdHRpZVBsYXllcih7CiAgICAgICAgICBhdXRvcGxheTogY29uZmlnLmF1dG9wbGF5ID8/IGZhbHNlLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAwLAogICAgICAgICAgbG9vcEFuaW1hdGlvbjogY29uZmlnLmxvb3AgPz8gZmFsc2UsCiAgICAgICAgICBtb2RlOiBjcmVhdGVDb3JlTW9kZShjb25maWcubW9kZSA/PyAiZm9yd2FyZCIsIG1vZHVsZSksCiAgICAgICAgICBzZWdtZW50OiBjcmVhdGVDb3JlU2VnbWVudChjb25maWcuc2VnbWVudCA/PyBbXSwgbW9kdWxlKSwKICAgICAgICAgIHNwZWVkOiBjb25maWcuc3BlZWQgPz8gMSwKICAgICAgICAgIHVzZUZyYW1lSW50ZXJwb2xhdGlvbjogY29uZmlnLnVzZUZyYW1lSW50ZXJwb2xhdGlvbiA/PyB0cnVlLAogICAgICAgICAgbWFya2VyOiBjb25maWcubWFya2VyID8/ICIiLAogICAgICAgICAgbGF5b3V0OiBjb25maWcubGF5b3V0ID8gewogICAgICAgICAgICBhbGlnbjogY3JlYXRlQ29yZUFsaWduKGNvbmZpZy5sYXlvdXQuYWxpZ24sIG1vZHVsZSksCiAgICAgICAgICAgIGZpdDogY3JlYXRlQ29yZUZpdChjb25maWcubGF5b3V0LmZpdCwgbW9kdWxlKQogICAgICAgICAgfSA6IG1vZHVsZS5jcmVhdGVEZWZhdWx0TGF5b3V0KCkKICAgICAgICB9KTsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAicmVhZHkiIH0pOwogICAgICAgIGlmIChjb25maWcuZGF0YSkgewogICAgICAgICAgdGhpcy5fbG9hZEZyb21EYXRhKGNvbmZpZy5kYXRhKTsKICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zcmMpIHsKICAgICAgICAgIHRoaXMuX2xvYWRGcm9tU3JjKGNvbmZpZy5zcmMpOwogICAgICAgIH0KICAgICAgICBpZiAoY29uZmlnLmJhY2tncm91bmRDb2xvcikgewogICAgICAgICAgdGhpcy5zZXRCYWNrZ3JvdW5kQ29sb3IoY29uZmlnLmJhY2tncm91bmRDb2xvcik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goewogICAgICAgICAgdHlwZTogImxvYWRFcnJvciIsCiAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCB3YXNtIG1vZHVsZTogJHtlcnJvcn1gKQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5fcG9pbnRlclVwTWV0aG9kID0gdGhpcy5fb25Qb2ludGVyVXAuYmluZCh0aGlzKTsKICAgICAgdGhpcy5fcG9pbnRlckRvd25NZXRob2QgPSB0aGlzLl9vblBvaW50ZXJEb3duLmJpbmQodGhpcyk7CiAgICAgIHRoaXMuX3BvaW50ZXJNb3ZlTWV0aG9kID0gdGhpcy5fb25Qb2ludGVyTW92ZS5iaW5kKHRoaXMpOwogICAgICB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QgPSB0aGlzLl9vblBvaW50ZXJFbnRlci5iaW5kKHRoaXMpOwogICAgICB0aGlzLl9wb2ludGVyRXhpdE1ldGhvZCA9IHRoaXMuX29uUG9pbnRlckxlYXZlLmJpbmQodGhpcyk7CiAgICAgIHRoaXMuX29uQ29tcGxldGVNZXRob2QgPSB0aGlzLl9vbkNvbXBsZXRlLmJpbmQodGhpcyk7CiAgICB9CiAgICBfZGlzcGF0Y2hFcnJvcihtZXNzYWdlKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJsb2FkRXJyb3IiLCBlcnJvcjogbmV3IEVycm9yKG1lc3NhZ2UpIH0pOwogICAgfQogICAgYXN5bmMgX2ZldGNoRGF0YShzcmMpIHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzcmMpOwogICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggYW5pbWF0aW9uIGRhdGEgZnJvbSBVUkw6ICR7c3JjfS4gJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7CiAgICAgIH0KICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7CiAgICAgIGlmIChpc0RvdExvdHRpZShkYXRhKSkgewogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSk7CiAgICB9CiAgICBfbG9hZEZyb21EYXRhKGRhdGEpIHsKICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUgPT09IG51bGwpIHJldHVybjsKICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLl9jYW52YXMud2lkdGg7CiAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuX2NhbnZhcy5oZWlnaHQ7CiAgICAgIGxldCBsb2FkZWQgPSBmYWxzZTsKICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAic3RyaW5nIikgewogICAgICAgIGlmICghaXNMb3R0aWUoZGF0YSkpIHsKICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXJyb3IoCiAgICAgICAgICAgICJJbnZhbGlkIExvdHRpZSBKU09OIHN0cmluZzogVGhlIHByb3ZpZGVkIHN0cmluZyBkb2VzIG5vdCBjb25mb3JtIHRvIHRoZSBMb3R0aWUgSlNPTiBmb3JtYXQuIgogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbG9hZGVkID0gdGhpcy5fZG90TG90dGllQ29yZS5sb2FkQW5pbWF0aW9uRGF0YShkYXRhLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICBpZiAoIWlzRG90TG90dGllKGRhdGEpKSB7CiAgICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKAogICAgICAgICAgICAiSW52YWxpZCBkb3RMb3R0aWUgQXJyYXlCdWZmZXI6IFRoZSBwcm92aWRlZCBBcnJheUJ1ZmZlciBkb2VzIG5vdCBjb25mb3JtIHRvIHRoZSBkb3RMb3R0aWUgZm9ybWF0LiIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxvYWRlZCA9IHRoaXMuX2RvdExvdHRpZUNvcmUubG9hZERvdExvdHRpZURhdGEoZGF0YSwgd2lkdGgsIGhlaWdodCk7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICJvYmplY3QiKSB7CiAgICAgICAgaWYgKCFpc0xvdHRpZShkYXRhKSkgewogICAgICAgICAgdGhpcy5fZGlzcGF0Y2hFcnJvcigKICAgICAgICAgICAgIkludmFsaWQgTG90dGllIEpTT04gb2JqZWN0OiBUaGUgcHJvdmlkZWQgb2JqZWN0IGRvZXMgbm90IGNvbmZvcm0gdG8gdGhlIExvdHRpZSBKU09OIGZvcm1hdC4iCiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRBbmltYXRpb25EYXRhKEpTT04uc3RyaW5naWZ5KGRhdGEpLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKAogICAgICAgICAgYFVuc3VwcG9ydGVkIGRhdGEgdHlwZSBmb3IgYW5pbWF0aW9uIGRhdGEuIEV4cGVjdGVkOiAKICAgICAgICAgIC0gc3RyaW5nIChMb3R0aWUgSlNPTiksCiAgICAgICAgICAtIEFycmF5QnVmZmVyIChkb3RMb3R0aWUpLAogICAgICAgICAgLSBvYmplY3QgKExvdHRpZSBKU09OKS4gCiAgICAgICAgICBSZWNlaXZlZDogJHt0eXBlb2YgZGF0YX1gCiAgICAgICAgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGxvYWRlZCkgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJsb2FkIiB9KTsKICAgICAgICBpZiAoSVNfQlJPV1NFUikgewogICAgICAgICAgdGhpcy5yZXNpemUoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJmcmFtZSIsCiAgICAgICAgICBjdXJyZW50RnJhbWU6IHRoaXMuX2RvdExvdHRpZUNvcmUuY3VycmVudEZyYW1lKCkKICAgICAgICB9KTsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKS5hdXRvcGxheSkgewogICAgICAgICAgdGhpcy5fZG90TG90dGllQ29yZS5wbGF5KCk7CiAgICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5pc1BsYXlpbmcoKSkgewogICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAicGxheSIgfSk7CiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJzb21ldGhpbmcgd2VudCB3cm9uZywgdGhlIGFuaW1hdGlvbiB3YXMgc3VwcG9zZSB0byBhdXRvcGxheSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKCJGYWlsZWQgdG8gbG9hZCBhbmltYXRpb24gZGF0YSIpOwogICAgICB9CiAgICB9CiAgICBfbG9hZEZyb21TcmMoc3JjKSB7CiAgICAgIHRoaXMuX2ZldGNoRGF0YShzcmMpLnRoZW4oKGRhdGEpID0+IHRoaXMuX2xvYWRGcm9tRGF0YShkYXRhKSkuY2F0Y2goKGVycm9yKSA9PiB0aGlzLl9kaXNwYXRjaEVycm9yKGBGYWlsZWQgdG8gbG9hZCBhbmltYXRpb24gZGF0YSBmcm9tIFVSTDogJHtzcmN9LiAke2Vycm9yfWApKTsKICAgIH0KICAgIGdldCBhY3RpdmVBbmltYXRpb25JZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmFjdGl2ZUFuaW1hdGlvbklkKCk7CiAgICB9CiAgICBnZXQgYWN0aXZlVGhlbWVJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmFjdGl2ZVRoZW1lSWQoKTsKICAgIH0KICAgIGdldCBsYXlvdXQoKSB7CiAgICAgIGNvbnN0IGxheW91dCA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmxheW91dDsKICAgICAgaWYgKGxheW91dCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBhbGlnbjogW2xheW91dC5hbGlnbi5nZXQoMCksIGxheW91dC5hbGlnbi5nZXQoMSldLAogICAgICAgICAgZml0OiAoKCkgPT4gewogICAgICAgICAgICBzd2l0Y2ggKGxheW91dC5maXQpIHsKICAgICAgICAgICAgICBjYXNlIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/LkZpdC5Db250YWluOgogICAgICAgICAgICAgICAgcmV0dXJuICJjb250YWluIjsKICAgICAgICAgICAgICBjYXNlIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/LkZpdC5Db3ZlcjoKICAgICAgICAgICAgICAgIHJldHVybiAiY292ZXIiOwogICAgICAgICAgICAgIGNhc2UgX0RvdExvdHRpZS5fd2FzbU1vZHVsZT8uRml0LkZpbGw6CiAgICAgICAgICAgICAgICByZXR1cm4gImZpbGwiOwogICAgICAgICAgICAgIGNhc2UgX0RvdExvdHRpZS5fd2FzbU1vZHVsZT8uRml0LkZpdEhlaWdodDoKICAgICAgICAgICAgICAgIHJldHVybiAiZml0LWhlaWdodCI7CiAgICAgICAgICAgICAgY2FzZSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5GaXQuRml0V2lkdGg6CiAgICAgICAgICAgICAgICByZXR1cm4gImZpdC13aWR0aCI7CiAgICAgICAgICAgICAgY2FzZSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5GaXQuTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiAibm9uZSI7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiAiY29udGFpbiI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKCkKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgICBnZXQgbWFya2VyKCkgewogICAgICBjb25zdCBtYXJrZXIgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5jb25maWcoKS5tYXJrZXI7CiAgICAgIHJldHVybiBtYXJrZXI7CiAgICB9CiAgICBnZXQgbWFuaWZlc3QoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgbWFuaWZlc3QgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5tYW5pZmVzdFN0cmluZygpOwogICAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8ICFtYW5pZmVzdCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgbWFuaWZlc3RKc29uID0gSlNPTi5wYXJzZShtYW5pZmVzdCk7CiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG1hbmlmZXN0SnNvbikubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gbWFuaWZlc3RKc29uOwogICAgICB9IGNhdGNoIChfZXJyKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIGdldCByZW5kZXJDb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJDb25maWc7CiAgICB9CiAgICBnZXQgc2VnbWVudCgpIHsKICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnNlZ21lbnQ7CiAgICAgIGlmIChzZWdtZW50ICYmIHNlZ21lbnQuc2l6ZSgpID09PSAyKSB7CiAgICAgICAgcmV0dXJuIFtzZWdtZW50LmdldCgwKSwgc2VnbWVudC5nZXQoMSldOwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgICBnZXQgbG9vcCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmxvb3BBbmltYXRpb24gPz8gZmFsc2U7CiAgICB9CiAgICBnZXQgbW9kZSgpIHsKICAgICAgY29uc3QgbW9kZSA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLm1vZGU7CiAgICAgIGlmIChtb2RlID09PSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5Nb2RlLlJldmVyc2UpIHsKICAgICAgICByZXR1cm4gInJldmVyc2UiOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/Lk1vZGUuQm91bmNlKSB7CiAgICAgICAgcmV0dXJuICJib3VuY2UiOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/Lk1vZGUuUmV2ZXJzZUJvdW5jZSkgewogICAgICAgIHJldHVybiAicmV2ZXJzZS1ib3VuY2UiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiZm9yd2FyZCI7CiAgICAgIH0KICAgIH0KICAgIGdldCBpc0Zyb3plbigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2lzRnJvemVuOwogICAgfQogICAgZ2V0IGJhY2tncm91bmRDb2xvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRDb2xvciA/PyAiIjsKICAgIH0KICAgIGdldCBhdXRvcGxheSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmF1dG9wbGF5ID8/IGZhbHNlOwogICAgfQogICAgZ2V0IHVzZUZyYW1lSW50ZXJwb2xhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnVzZUZyYW1lSW50ZXJwb2xhdGlvbiA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBzcGVlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnNwZWVkID8/IDA7CiAgICB9CiAgICBnZXQgaXNSZWFkeSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmUgIT09IG51bGw7CiAgICB9CiAgICBnZXQgaXNMb2FkZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5pc0xvYWRlZCgpID8/IGZhbHNlOwogICAgfQogICAgZ2V0IGlzUGxheWluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmlzUGxheWluZygpID8/IGZhbHNlOwogICAgfQogICAgZ2V0IGlzUGF1c2VkKCkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uaXNQYXVzZWQoKSA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBpc1N0b3BwZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5pc1N0b3BwZWQoKSA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBjdXJyZW50RnJhbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5jdXJyZW50RnJhbWUoKSA/PyAwOwogICAgfQogICAgZ2V0IGxvb3BDb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/Lmxvb3BDb3VudCgpID8/IDA7CiAgICB9CiAgICBnZXQgdG90YWxGcmFtZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy50b3RhbEZyYW1lcygpID8/IDA7CiAgICB9CiAgICBnZXQgZHVyYXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5kdXJhdGlvbigpID8/IDA7CiAgICB9CiAgICBnZXQgc2VnbWVudER1cmF0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uc2VnbWVudER1cmF0aW9uKCkgPz8gMDsKICAgIH0KICAgIGdldCBjYW52YXMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jYW52YXM7CiAgICB9CiAgICBsb2FkKGNvbmZpZykgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCB8fCBfRG90TG90dGllLl93YXNtTW9kdWxlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICBhdXRvcGxheTogY29uZmlnLmF1dG9wbGF5ID8/IGZhbHNlLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogMCwKICAgICAgICBsb29wQW5pbWF0aW9uOiBjb25maWcubG9vcCA/PyBmYWxzZSwKICAgICAgICBtb2RlOiBjcmVhdGVDb3JlTW9kZShjb25maWcubW9kZSA/PyAiZm9yd2FyZCIsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpLAogICAgICAgIHNlZ21lbnQ6IGNyZWF0ZUNvcmVTZWdtZW50KGNvbmZpZy5zZWdtZW50ID8/IFtdLCBfRG90TG90dGllLl93YXNtTW9kdWxlKSwKICAgICAgICBzcGVlZDogY29uZmlnLnNwZWVkID8/IDEsCiAgICAgICAgdXNlRnJhbWVJbnRlcnBvbGF0aW9uOiBjb25maWcudXNlRnJhbWVJbnRlcnBvbGF0aW9uID8/IHRydWUsCiAgICAgICAgbWFya2VyOiBjb25maWcubWFya2VyID8/ICIiLAogICAgICAgIGxheW91dDogY29uZmlnLmxheW91dCA/IHsKICAgICAgICAgIGFsaWduOiBjcmVhdGVDb3JlQWxpZ24oY29uZmlnLmxheW91dC5hbGlnbiwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSksCiAgICAgICAgICBmaXQ6IGNyZWF0ZUNvcmVGaXQoY29uZmlnLmxheW91dC5maXQsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpCiAgICAgICAgfSA6IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUuY3JlYXRlRGVmYXVsdExheW91dCgpCiAgICAgIH0pOwogICAgICBpZiAoY29uZmlnLmRhdGEpIHsKICAgICAgICB0aGlzLl9sb2FkRnJvbURhdGEoY29uZmlnLmRhdGEpOwogICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zcmMpIHsKICAgICAgICB0aGlzLl9sb2FkRnJvbVNyYyhjb25maWcuc3JjKTsKICAgICAgfQogICAgICB0aGlzLnNldEJhY2tncm91bmRDb2xvcihjb25maWcuYmFja2dyb3VuZENvbG9yID8/ICIiKTsKICAgIH0KICAgIF9yZW5kZXIoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2NvbnRleHQgPT09IG51bGwpIHJldHVybiBmYWxzZTsKICAgICAgY29uc3QgcmVuZGVyZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnJlbmRlcigpOwogICAgICBpZiAocmVuZGVyZWQpIHsKICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmJ1ZmZlcigpOwogICAgICAgIGNvbnN0IGNsYW1wZWRCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYnVmZmVyLCAwLCB0aGlzLl9jYW52YXMud2lkdGggKiB0aGlzLl9jYW52YXMuaGVpZ2h0ICogNCk7CiAgICAgICAgbGV0IGltYWdlRGF0YSA9IG51bGw7CiAgICAgICAgaWYgKHR5cGVvZiBJbWFnZURhdGEgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICBpbWFnZURhdGEgPSB0aGlzLl9jb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpOwogICAgICAgICAgaW1hZ2VEYXRhLmRhdGEuc2V0KGNsYW1wZWRCdWZmZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbWFnZURhdGEgPSBuZXcgSW1hZ2VEYXRhKGNsYW1wZWRCdWZmZXIsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuX2NvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJyZW5kZXIiLAogICAgICAgICAgY3VycmVudEZyYW1lOiB0aGlzLl9kb3RMb3R0aWVDb3JlLmN1cnJlbnRGcmFtZSgpCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgX2RyYXcoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2NvbnRleHQgPT09IG51bGwgfHwgIXRoaXMuX2RvdExvdHRpZUNvcmUuaXNQbGF5aW5nKCkpIHJldHVybjsKICAgICAgY29uc3QgbmV4dEZyYW1lID0gdGhpcy5fZG90TG90dGllQ29yZS5yZXF1ZXN0RnJhbWUoKTsKICAgICAgY29uc3QgdXBkYXRlZCA9IHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0RnJhbWUobmV4dEZyYW1lKTsKICAgICAgaWYgKHVwZGF0ZWQpIHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goewogICAgICAgICAgdHlwZTogImZyYW1lIiwKICAgICAgICAgIGN1cnJlbnRGcmFtZTogdGhpcy5fZG90TG90dGllQ29yZS5jdXJyZW50RnJhbWUoKQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHJlbmRlcmVkID0gdGhpcy5fcmVuZGVyKCk7CiAgICAgICAgaWYgKHJlbmRlcmVkKSB7CiAgICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5pc0NvbXBsZXRlKCkpIHsKICAgICAgICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCkubG9vcEFuaW1hdGlvbikgewogICAgICAgICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAibG9vcCIsCiAgICAgICAgICAgICAgICBsb29wQ291bnQ6IHRoaXMuX2RvdExvdHRpZUNvcmUubG9vcENvdW50KCkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAiY29tcGxldGUiIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICB9CiAgICBwbGF5KCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICBjb25zdCBvayA9IHRoaXMuX2RvdExvdHRpZUNvcmUucGxheSgpOwogICAgICBpZiAob2sgfHwgdGhpcy5fZG90TG90dGllQ29yZS5pc1BsYXlpbmcoKSkgewogICAgICAgIHRoaXMuX2lzRnJvemVuID0gZmFsc2U7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogInBsYXkiIH0pOwogICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICAgIH0KICAgIH0KICAgIHBhdXNlKCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICBjb25zdCBvayA9IHRoaXMuX2RvdExvdHRpZUNvcmUucGF1c2UoKTsKICAgICAgaWYgKG9rIHx8IHRoaXMuX2RvdExvdHRpZUNvcmUuaXNQYXVzZWQoKSkgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJwYXVzZSIgfSk7CiAgICAgIH0KICAgIH0KICAgIHN0b3AoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGNvbnN0IG9rID0gdGhpcy5fZG90TG90dGllQ29yZS5zdG9wKCk7CiAgICAgIGlmIChvaykgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJmcmFtZSIsIGN1cnJlbnRGcmFtZTogdGhpcy5fZG90TG90dGllQ29yZS5jdXJyZW50RnJhbWUoKSB9KTsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAic3RvcCIgfSk7CiAgICAgIH0KICAgIH0KICAgIHNldEZyYW1lKGZyYW1lKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGlmIChmcmFtZSA8IDAgfHwgZnJhbWUgPiB0aGlzLl9kb3RMb3R0aWVDb3JlLnRvdGFsRnJhbWVzKCkpIHJldHVybjsKICAgICAgY29uc3Qgb2sgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnNlZWsoZnJhbWUpOwogICAgICBpZiAob2spIHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAiZnJhbWUiLCBjdXJyZW50RnJhbWU6IHRoaXMuX2RvdExvdHRpZUNvcmUuY3VycmVudEZyYW1lKCkgfSk7CiAgICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIH0KICAgIH0KICAgIHNldFNwZWVkKHNwZWVkKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIHNwZWVkCiAgICAgIH0pOwogICAgfQogICAgc2V0QmFja2dyb3VuZENvbG9yKGNvbG9yKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGlmIChJU19CUk9XU0VSICYmIHRoaXMuX2NhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7CiAgICAgICAgdGhpcy5fY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAgIC4uLnRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCksCiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGhleFN0cmluZ1RvUkdCQUludChjb2xvcikKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLl9iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjsKICAgIH0KICAgIHNldExvb3AobG9vcCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICBsb29wQW5pbWF0aW9uOiBsb29wCiAgICAgIH0pOwogICAgfQogICAgc2V0VXNlRnJhbWVJbnRlcnBvbGF0aW9uKHVzZUZyYW1lSW50ZXJwb2xhdGlvbikgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICB1c2VGcmFtZUludGVycG9sYXRpb24KICAgICAgfSk7CiAgICB9CiAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTsKICAgIH0KICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpOwogICAgfQogICAgZGVzdHJveSgpIHsKICAgICAgdGhpcy5fZG90TG90dGllQ29yZT8uZGVsZXRlKCk7CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUgPSBudWxsOwogICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICB0eXBlOiAiZGVzdHJveSIKICAgICAgfSk7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5yZW1vdmVBbGxFdmVudExpc3RlbmVycygpOwogICAgICB0aGlzLl9jbGVhbnVwU3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICB9CiAgICBmcmVlemUoKSB7CiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZUlkID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2ZyYW1lTWFuYWdlci5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZUlkKTsKICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWVJZCA9IG51bGw7CiAgICAgIHRoaXMuX2lzRnJvemVuID0gdHJ1ZTsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogImZyZWV6ZSIgfSk7CiAgICB9CiAgICB1bmZyZWV6ZSgpIHsKICAgICAgaWYgKHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgIT09IG51bGwpIHJldHVybjsKICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWVJZCA9IHRoaXMuX2ZyYW1lTWFuYWdlci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fZHJhdy5iaW5kKHRoaXMpKTsKICAgICAgdGhpcy5faXNGcm96ZW4gPSBmYWxzZTsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogInVuZnJlZXplIiB9KTsKICAgIH0KICAgIHJlc2l6ZSgpIHsKICAgICAgaWYgKElTX0JST1dTRVIgJiYgdGhpcy5fY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsKICAgICAgICBjb25zdCBkcHIgPSB0aGlzLl9yZW5kZXJDb25maWcuZGV2aWNlUGl4ZWxSYXRpbyB8fCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxOwogICAgICAgIGNvbnN0IHsgaGVpZ2h0OiBjbGllbnRIZWlnaHQsIHdpZHRoOiBjbGllbnRXaWR0aCB9ID0gdGhpcy5fY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IGNsaWVudFdpZHRoICogZHByOwogICAgICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBjbGllbnRIZWlnaHQgKiBkcHI7CiAgICAgIH0KICAgICAgY29uc3Qgb2sgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5yZXNpemUodGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTsKICAgICAgaWYgKG9rKSB7CiAgICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIH0KICAgIH0KICAgIHNldFNlZ21lbnQoc3RhcnRGcmFtZSwgZW5kRnJhbWUpIHsKICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUgPT09IG51bGwgfHwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICBzZWdtZW50OiBjcmVhdGVDb3JlU2VnbWVudChbc3RhcnRGcmFtZSwgZW5kRnJhbWVdLCBfRG90TG90dGllLl93YXNtTW9kdWxlKQogICAgICB9KTsKICAgIH0KICAgIHNldE1vZGUobW9kZSkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCB8fCBfRG90TG90dGllLl93YXNtTW9kdWxlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIG1vZGU6IGNyZWF0ZUNvcmVNb2RlKG1vZGUsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpCiAgICAgIH0pOwogICAgfQogICAgc2V0UmVuZGVyQ29uZmlnKGNvbmZpZykgewogICAgICB0aGlzLl9yZW5kZXJDb25maWcgPSBjb25maWc7CiAgICB9CiAgICBsb2FkQW5pbWF0aW9uKGFuaW1hdGlvbklkKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2RvdExvdHRpZUNvcmUuYWN0aXZlQW5pbWF0aW9uSWQoKSA9PT0gYW5pbWF0aW9uSWQpIHJldHVybjsKICAgICAgY29uc3QgbG9hZGVkID0gdGhpcy5fZG90TG90dGllQ29yZS5sb2FkQW5pbWF0aW9uKGFuaW1hdGlvbklkLCB0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpOwogICAgICBpZiAobG9hZGVkKSB7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogImxvYWQiIH0pOwogICAgICAgIHRoaXMucmVzaXplKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJsb2FkRXJyb3IiLAogICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFuaW1hdGlvbiA6JHthbmltYXRpb25JZH1gKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICBzZXRNYXJrZXIobWFya2VyKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIG1hcmtlcgogICAgICB9KTsKICAgIH0KICAgIG1hcmtlcnMoKSB7CiAgICAgIGNvbnN0IG1hcmtlcnMgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5tYXJrZXJzKCk7CiAgICAgIGlmIChtYXJrZXJzKSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrZXJzLnNpemUoKTsgaSArPSAxKSB7CiAgICAgICAgICBjb25zdCBtYXJrZXIgPSBtYXJrZXJzLmdldChpKTsKICAgICAgICAgIHJlc3VsdC5wdXNoKHsKICAgICAgICAgICAgbmFtZTogbWFya2VyLm5hbWUsCiAgICAgICAgICAgIHRpbWU6IG1hcmtlci50aW1lLAogICAgICAgICAgICBkdXJhdGlvbjogbWFya2VyLmR1cmF0aW9uCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICByZXR1cm4gW107CiAgICB9CiAgICBsb2FkVGhlbWUodGhlbWVJZCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICBjb25zdCBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRUaGVtZSh0aGVtZUlkKTsKICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIHJldHVybiBsb2FkZWQ7CiAgICB9CiAgICBsb2FkVGhlbWVEYXRhKHRoZW1lRGF0YSkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICBjb25zdCBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRUaGVtZURhdGEodGhlbWVEYXRhKTsKICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIHJldHVybiBsb2FkZWQ7CiAgICB9CiAgICBzZXRMYXlvdXQobGF5b3V0KSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUgPT09IG51bGwpIHJldHVybjsKICAgICAgdGhpcy5fZG90TG90dGllQ29yZS5zZXRDb25maWcoewogICAgICAgIC4uLnRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCksCiAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICBhbGlnbjogY3JlYXRlQ29yZUFsaWduKGxheW91dC5hbGlnbiwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSksCiAgICAgICAgICBmaXQ6IGNyZWF0ZUNvcmVGaXQobGF5b3V0LmZpdCwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgc2V0Vmlld3BvcnQoeCwgeSwgd2lkdGgsIGhlaWdodCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZS5zZXRWaWV3cG9ydCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTsKICAgIH0KICAgIHN0YXRpYyBzZXRXYXNtVXJsKHVybCkgewogICAgICBEb3RMb3R0aWVXYXNtTG9hZGVyLnNldFdhc21VcmwodXJsKTsKICAgIH0KICAgIGxvYWRTdGF0ZU1hY2hpbmUoc3RhdGVNYWNoaW5lSWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmxvYWRTdGF0ZU1hY2hpbmUoc3RhdGVNYWNoaW5lSWQpID8/IGZhbHNlOwogICAgfQogICAgc3RhcnRTdGF0ZU1hY2hpbmUoKSB7CiAgICAgIGNvbnN0IHN0YXJ0ZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5zdGFydFN0YXRlTWFjaGluZSgpID8/IGZhbHNlOwogICAgICBpZiAoc3RhcnRlZCkgewogICAgICAgIHRoaXMuX3NldHVwU3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0YXJ0ZWQ7CiAgICB9CiAgICBzdG9wU3RhdGVNYWNoaW5lKCkgewogICAgICBjb25zdCBzdG9wcGVkID0gdGhpcy5fZG90TG90dGllQ29yZT8uc3RvcFN0YXRlTWFjaGluZSgpID8/IGZhbHNlOwogICAgICBpZiAoc3RvcHBlZCkgewogICAgICAgIHRoaXMuX2NsZWFudXBTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKTsKICAgICAgfQogICAgICByZXR1cm4gc3RvcHBlZDsKICAgIH0KICAgIF9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpIHsKICAgICAgY29uc3QgcmVjdCA9IHRoaXMuX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgY29uc3Qgc2NhbGVYID0gdGhpcy5fY2FudmFzLndpZHRoIC8gcmVjdC53aWR0aDsKICAgICAgY29uc3Qgc2NhbGVZID0gdGhpcy5fY2FudmFzLmhlaWdodCAvIHJlY3QuaGVpZ2h0OwogICAgICBjb25zdCBkZXZpY2VQaXhlbFJhdGlvID0gdGhpcy5fcmVuZGVyQ29uZmlnLmRldmljZVBpeGVsUmF0aW8gfHwgd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTsKICAgICAgY29uc3QgeCA9IChldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0KSAqIHNjYWxlWCAvIGRldmljZVBpeGVsUmF0aW87CiAgICAgIGNvbnN0IHkgPSAoZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAqIHNjYWxlWSAvIGRldmljZVBpeGVsUmF0aW87CiAgICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICAgIH07CiAgICB9CiAgICBfb25Qb2ludGVyVXAoZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyVXA6ICR7eH0gJHt5fWApOwogICAgfQogICAgX29uUG9pbnRlckRvd24oZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyRG93bjogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Qb2ludGVyTW92ZShldmVudCkgewogICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuX2dldFBvaW50ZXJQb3NpdGlvbihldmVudCk7CiAgICAgIHRoaXMucG9zdFN0YXRlTWFjaGluZUV2ZW50KGBPblBvaW50ZXJNb3ZlOiAke3h9ICR7eX1gKTsKICAgIH0KICAgIF9vblBvaW50ZXJFbnRlcihldmVudCkgewogICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuX2dldFBvaW50ZXJQb3NpdGlvbihldmVudCk7CiAgICAgIHRoaXMucG9zdFN0YXRlTWFjaGluZUV2ZW50KGBPblBvaW50ZXJFbnRlcjogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Qb2ludGVyTGVhdmUoZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyRXhpdDogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Db21wbGV0ZSgpIHsKICAgICAgdGhpcy5wb3N0U3RhdGVNYWNoaW5lRXZlbnQoIk9uQ29tcGxldGUiKTsKICAgIH0KICAgIC8qKgogICAgICogQGV4cGVyaW1lbnRhbAogICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIGJlIHBvc3RlZCB0byB0aGUgc3RhdGUgbWFjaGluZQogICAgICogQHJldHVybnMgYm9vbGVhbiAtIHRydWUgaWYgdGhlIGV2ZW50IHdhcyBwb3N0ZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgcG9zdFN0YXRlTWFjaGluZUV2ZW50KGV2ZW50KSB7CiAgICAgIGNvbnN0IHJ0ID0gdGhpcy5fZG90TG90dGllQ29yZT8ucG9zdEV2ZW50UGF5bG9hZChldmVudCkgPz8gMTsKICAgICAgaWYgKHJ0ID09PSAyKSB7CiAgICAgICAgdGhpcy5wbGF5KCk7CiAgICAgIH0gZWxzZSBpZiAocnQgPT09IDMpIHsKICAgICAgICB0aGlzLnBhdXNlKCk7CiAgICAgIH0gZWxzZSBpZiAocnQgPT09IDQpIHsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgfQogICAgICByZXR1cm4gcnQ7CiAgICB9CiAgICBnZXRTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKSB7CiAgICAgIGlmICghdGhpcy5fZG90TG90dGllQ29yZSkgcmV0dXJuIFtdOwogICAgICBjb25zdCBsaXN0ZW5lcnNWZWN0b3IgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnN0YXRlTWFjaGluZUZyYW1ld29ya1NldHVwKCk7CiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IFtdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVyc1ZlY3Rvci5zaXplKCk7IGkgKz0gMSkgewogICAgICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyc1ZlY3Rvci5nZXQoaSkpOwogICAgICB9CiAgICAgIHJldHVybiBsaXN0ZW5lcnM7CiAgICB9CiAgICBfc2V0dXBTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKSB7CiAgICAgIGlmIChJU19CUk9XU0VSICYmIHRoaXMuX2NhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50ICYmIHRoaXMuX2RvdExvdHRpZUNvcmUgIT09IG51bGwgJiYgdGhpcy5pc0xvYWRlZCkgewogICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZ2V0U3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmNsdWRlcygiUG9pbnRlclVwIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLCB0aGlzLl9wb2ludGVyVXBNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJQb2ludGVyRG93biIpKSB7CiAgICAgICAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB0aGlzLl9wb2ludGVyRG93bk1ldGhvZCk7CiAgICAgICAgfQogICAgICAgIGlmIChsaXN0ZW5lcnMuaW5jbHVkZXMoIlBvaW50ZXJNb3ZlIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVybW92ZSIsIHRoaXMuX3BvaW50ZXJNb3ZlTWV0aG9kKTsKICAgICAgICB9CiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmNsdWRlcygiUG9pbnRlckVudGVyIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZW50ZXIiLCB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJQb2ludGVyRXhpdCIpKSB7CiAgICAgICAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmxlYXZlIiwgdGhpcy5fcG9pbnRlckV4aXRNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJDb21wbGV0ZSIpKSB7CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoImNvbXBsZXRlIiwgdGhpcy5fb25Db21wbGV0ZU1ldGhvZCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBfY2xlYW51cFN0YXRlTWFjaGluZUxpc3RlbmVycygpIHsKICAgICAgaWYgKElTX0JST1dTRVIgJiYgdGhpcy5fY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsKICAgICAgICB0aGlzLl9jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIiwgdGhpcy5fcG9pbnRlclVwTWV0aG9kKTsKICAgICAgICB0aGlzLl9jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB0aGlzLl9wb2ludGVyRG93bk1ldGhvZCk7CiAgICAgICAgdGhpcy5fY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJtb3ZlIiwgdGhpcy5fcG9pbnRlck1vdmVNZXRob2QpOwogICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyZW50ZXIiLCB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QpOwogICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVybGVhdmUiLCB0aGlzLl9wb2ludGVyRXhpdE1ldGhvZCk7CiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCJjb21wbGV0ZSIsIHRoaXMuX29uQ29tcGxldGVNZXRob2QpOwogICAgICB9CiAgICB9CiAgICBsb2FkU3RhdGVNYWNoaW5lRGF0YShzdGF0ZU1hY2hpbmVEYXRhKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5sb2FkU3RhdGVNYWNoaW5lRGF0YShzdGF0ZU1hY2hpbmVEYXRhKSA/PyBmYWxzZTsKICAgIH0KICAgIGFuaW1hdGlvblNpemUoKSB7CiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fZG90TG90dGllQ29yZT8uYW5pbWF0aW9uU2l6ZSgpLmdldCgwKSA/PyAwOwogICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5hbmltYXRpb25TaXplKCkuZ2V0KDEpID8/IDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH07CiAgICB9CiAgICBzZXRTdGF0ZU1hY2hpbmVCb29sZWFuQ29udGV4dChuYW1lLCB2YWx1ZSkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uc2V0U3RhdGVNYWNoaW5lQm9vbGVhbkNvbnRleHQobmFtZSwgdmFsdWUpID8/IGZhbHNlOwogICAgfQogICAgc2V0U3RhdGVNYWNoaW5lTnVtZXJpY0NvbnRleHQobmFtZSwgdmFsdWUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LnNldFN0YXRlTWFjaGluZU51bWVyaWNDb250ZXh0KG5hbWUsIHZhbHVlKSA/PyBmYWxzZTsKICAgIH0KICAgIHNldFN0YXRlTWFjaGluZVN0cmluZ0NvbnRleHQobmFtZSwgdmFsdWUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LnNldFN0YXRlTWFjaGluZVN0cmluZ0NvbnRleHQobmFtZSwgdmFsdWUpID8/IGZhbHNlOwogICAgfQogIH07CiAgX19wdWJsaWNGaWVsZChfRG90TG90dGllLCAiX3dhc21Nb2R1bGUiLCBudWxsKTsKICB2YXIgRG90TG90dGllID0gX0RvdExvdHRpZTsKCiAgLy8gc3JjL3dvcmtlci9kb3Rsb3R0aWUud29ya2VyLnRzCiAgdmFyIGluc3RhbmNlc01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgdmFyIGV2ZW50SGFuZGxlck1hcCA9IHsKICAgIHJlYWR5OiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblJlYWR5IiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudAogICAgICAgIH0KICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9LAogICAgY29tcGxldGU6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uQ29tcGxldGUiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBsb2FkOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IGxvYWRFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25Mb2FkIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogbG9hZEV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBsb2FkRXJyb3I6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgbG9hZEVycm9yRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uTG9hZEVycm9yIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogbG9hZEVycm9yRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIGxvb3A6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgbG9vcEV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvbkxvb3AiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBsb29wRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHBsYXk6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgcGxheUV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblBsYXkiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBwbGF5RXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHBhdXNlOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHBhdXNlRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uUGF1c2UiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBwYXVzZUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBzdG9wOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHN0b3BFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25TdG9wIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogc3RvcEV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBmcmFtZTogKGluc3RhbmNlSWQpID0+IChldmVudCkgPT4gewogICAgICBjb25zdCBmcmFtZUV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvbkZyYW1lIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZnJhbWVFdmVudAogICAgICAgIH0KICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9LAogICAgcmVuZGVyOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHJlbmRlckV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblJlbmRlciIsCiAgICAgICAgcmVzdWx0OiB7CiAgICAgICAgICBpbnN0YW5jZUlkLAogICAgICAgICAgZXZlbnQ6IHJlbmRlckV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBmcmVlemU6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgZnJlZXplRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uRnJlZXplIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZnJlZXplRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHVuZnJlZXplOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHVuZnJlZXplRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uVW5mcmVlemUiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiB1bmZyZWV6ZUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBkZXN0cm95OiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IGRlc3Ryb3lFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25EZXN0cm95IiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZGVzdHJveUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0KICB9OwogIHZhciBjb21tYW5kcyA9IHsKICAgIGdldERvdExvdHRpZUluc3RhbmNlU3RhdGUocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgY29uc3Qgc3RhdGUgPSB7CiAgICAgICAgaXNMb2FkZWQ6IGluc3RhbmNlLmlzTG9hZGVkLAogICAgICAgIGlzUGF1c2VkOiBpbnN0YW5jZS5pc1BhdXNlZCwKICAgICAgICBpc1BsYXlpbmc6IGluc3RhbmNlLmlzUGxheWluZywKICAgICAgICBpc1N0b3BwZWQ6IGluc3RhbmNlLmlzU3RvcHBlZCwKICAgICAgICBpc0Zyb3plbjogaW5zdGFuY2UuaXNGcm96ZW4sCiAgICAgICAgbG9vcDogaW5zdGFuY2UubG9vcCwKICAgICAgICBtb2RlOiBpbnN0YW5jZS5tb2RlLAogICAgICAgIHNwZWVkOiBpbnN0YW5jZS5zcGVlZCwKICAgICAgICBjdXJyZW50RnJhbWU6IGluc3RhbmNlLmN1cnJlbnRGcmFtZSwKICAgICAgICB0b3RhbEZyYW1lczogaW5zdGFuY2UudG90YWxGcmFtZXMsCiAgICAgICAgZHVyYXRpb246IGluc3RhbmNlLmR1cmF0aW9uLAogICAgICAgIHVzZUZyYW1lSW50ZXJwb2xhdGlvbjogaW5zdGFuY2UudXNlRnJhbWVJbnRlcnBvbGF0aW9uLAogICAgICAgIHJlbmRlckNvbmZpZzogaW5zdGFuY2UucmVuZGVyQ29uZmlnLAogICAgICAgIG1hcmtlcjogaW5zdGFuY2UubWFya2VyLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogaW5zdGFuY2UuYmFja2dyb3VuZENvbG9yLAogICAgICAgIG1hcmtlcnM6IGluc3RhbmNlLm1hcmtlcnMoKSwKICAgICAgICBhY3RpdmVBbmltYXRpb25JZDogaW5zdGFuY2UuYWN0aXZlQW5pbWF0aW9uSWQsCiAgICAgICAgYWN0aXZlVGhlbWVJZDogaW5zdGFuY2UuYWN0aXZlVGhlbWVJZCwKICAgICAgICBhdXRvcGxheTogaW5zdGFuY2UuYXV0b3BsYXksCiAgICAgICAgc2VnbWVudDogaW5zdGFuY2Uuc2VnbWVudCwKICAgICAgICBsYXlvdXQ6IGluc3RhbmNlLmxheW91dCwKICAgICAgICBzZWdtZW50RHVyYXRpb246IGluc3RhbmNlLnNlZ21lbnREdXJhdGlvbiwKICAgICAgICBpc1JlYWR5OiBpbnN0YW5jZS5pc1JlYWR5LAogICAgICAgIG1hbmlmZXN0OiBpbnN0YW5jZS5tYW5pZmVzdAogICAgICB9OwogICAgICByZXR1cm4gewogICAgICAgIHN0YXRlCiAgICAgIH07CiAgICB9LAogICAgc2V0TGF5b3V0KHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGxheW91dCA9IHJlcXVlc3QucGFyYW1zLmxheW91dDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TGF5b3V0KGxheW91dCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3VjY2VzczogdHJ1ZQogICAgICB9OwogICAgfSwKICAgIGdldFN0YXRlTWFjaGluZUxpc3RlbmVycyhyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICByZXR1cm4gaW5zdGFuY2UuZ2V0U3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICB9LAogICAgcG9zdFN0YXRlTWFjaGluZUV2ZW50KHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGV2ZW50ID0gcmVxdWVzdC5wYXJhbXMuZXZlbnQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5wb3N0U3RhdGVNYWNoaW5lRXZlbnQoZXZlbnQpOwogICAgfSwKICAgIHN0YXJ0U3RhdGVNYWNoaW5lKHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5zdGFydFN0YXRlTWFjaGluZSgpOwogICAgfSwKICAgIHN0b3BTdGF0ZU1hY2hpbmUocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLnN0b3BTdGF0ZU1hY2hpbmUoKTsKICAgIH0sCiAgICBsb2FkU3RhdGVNYWNoaW5lKHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHN0YXRlTWFjaGluZUlkID0gcmVxdWVzdC5wYXJhbXMuc3RhdGVNYWNoaW5lSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5sb2FkU3RhdGVNYWNoaW5lKHN0YXRlTWFjaGluZUlkKTsKICAgIH0sCiAgICBsb2FkU3RhdGVNYWNoaW5lRGF0YShyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBzdGF0ZU1hY2hpbmVEYXRhID0gcmVxdWVzdC5wYXJhbXMuc3RhdGVNYWNoaW5lRGF0YTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLmxvYWRTdGF0ZU1hY2hpbmVEYXRhKHN0YXRlTWFjaGluZURhdGEpOwogICAgfSwKICAgIGNyZWF0ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHJlcXVlc3QucGFyYW1zLmNvbmZpZzsKICAgICAgY29uc3Qgd2lkdGggPSByZXF1ZXN0LnBhcmFtcy53aWR0aDsKICAgICAgY29uc3QgaGVpZ2h0ID0gcmVxdWVzdC5wYXJhbXMuaGVpZ2h0OwogICAgICBpZiAoaW5zdGFuY2VzTWFwLmhhcyhpbnN0YW5jZUlkKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGFscmVhZHkgZXhpc3RzLmApOwogICAgICB9CiAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IERvdExvdHRpZShjb25maWcpOwogICAgICBpbnN0YW5jZS5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICBpbnN0YW5jZS5jYW52YXMud2lkdGggPSB3aWR0aDsKICAgICAgaW5zdGFuY2VzTWFwLnNldChpbnN0YW5jZUlkLCBpbnN0YW5jZSk7CiAgICAgIGNvbnN0IGV2ZW50cyA9IFsKICAgICAgICAiY29tcGxldGUiLAogICAgICAgICJmcmFtZSIsCiAgICAgICAgImxvYWQiLAogICAgICAgICJsb2FkRXJyb3IiLAogICAgICAgICJsb29wIiwKICAgICAgICAicGF1c2UiLAogICAgICAgICJwbGF5IiwKICAgICAgICAic3RvcCIsCiAgICAgICAgImRlc3Ryb3kiLAogICAgICAgICJmcmVlemUiLAogICAgICAgICJ1bmZyZWV6ZSIsCiAgICAgICAgInJlbmRlciIsCiAgICAgICAgInJlYWR5IgogICAgICBdOwogICAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHsKICAgICAgICBpbnN0YW5jZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBldmVudEhhbmRsZXJNYXBbZXZlbnRdKGluc3RhbmNlSWQpKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgaW5zdGFuY2VJZAogICAgICB9OwogICAgfSwKICAgIGRlc3Ryb3k6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHJldHVybjsKICAgICAgaW5zdGFuY2UuZGVzdHJveSgpOwogICAgICBpbnN0YW5jZXNNYXAuZGVsZXRlKGluc3RhbmNlSWQpOwogICAgfSwKICAgIGZyZWV6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLmZyZWV6ZSgpOwogICAgfSwKICAgIGxvYWQ6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBjb25maWcgPSByZXF1ZXN0LnBhcmFtcy5jb25maWc7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLmxvYWQoY29uZmlnKTsKICAgIH0sCiAgICBsb2FkQW5pbWF0aW9uOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgYW5pbWF0aW9uSWQgPSByZXF1ZXN0LnBhcmFtcy5hbmltYXRpb25JZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2UubG9hZEFuaW1hdGlvbihhbmltYXRpb25JZCk7CiAgICB9LAogICAgbG9hZFRoZW1lOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgdGhlbWVJZCA9IHJlcXVlc3QucGFyYW1zLnRoZW1lSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5sb2FkVGhlbWUodGhlbWVJZCk7CiAgICB9LAogICAgbG9hZFRoZW1lRGF0YTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHRoZW1lRGF0YSA9IHJlcXVlc3QucGFyYW1zLnRoZW1lRGF0YTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLmxvYWRUaGVtZURhdGEodGhlbWVEYXRhKTsKICAgIH0sCiAgICBwYXVzZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5wYXVzZSgpOwogICAgfSwKICAgIHBsYXk6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICByZXR1cm4gaW5zdGFuY2UucGxheSgpOwogICAgfSwKICAgIHJlc2l6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHdpZHRoID0gcmVxdWVzdC5wYXJhbXMud2lkdGg7CiAgICAgIGNvbnN0IGhlaWdodCA9IHJlcXVlc3QucGFyYW1zLmhlaWdodDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2UuY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICAgICAgaW5zdGFuY2UuY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgIGluc3RhbmNlLnJlc2l6ZSgpOwogICAgICByZXR1cm4gewogICAgICAgIHN1Y2Nlc3M6IHRydWUKICAgICAgfTsKICAgIH0sCiAgICBzZXRCYWNrZ3JvdW5kQ29sb3I6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSByZXF1ZXN0LnBhcmFtcy5iYWNrZ3JvdW5kQ29sb3I7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldEJhY2tncm91bmRDb2xvcihiYWNrZ3JvdW5kQ29sb3IpOwogICAgfSwKICAgIHNldEZyYW1lOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgZnJhbWUgPSByZXF1ZXN0LnBhcmFtcy5mcmFtZTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0RnJhbWUoZnJhbWUpOwogICAgfSwKICAgIHNldE1vZGU6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBtb2RlID0gcmVxdWVzdC5wYXJhbXMubW9kZTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TW9kZShtb2RlKTsKICAgIH0sCiAgICBzZXRSZW5kZXJDb25maWc6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCByZW5kZXJDb25maWcgPSByZXF1ZXN0LnBhcmFtcy5yZW5kZXJDb25maWc7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFJlbmRlckNvbmZpZyhyZW5kZXJDb25maWcpOwogICAgfSwKICAgIHNldFNlZ21lbnQ6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBzZWdtZW50ID0gcmVxdWVzdC5wYXJhbXMuc2VnbWVudDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0U2VnbWVudChzZWdtZW50WzBdLCBzZWdtZW50WzFdKTsKICAgIH0sCiAgICBzZXRTcGVlZDogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHNwZWVkID0gcmVxdWVzdC5wYXJhbXMuc3BlZWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFNwZWVkKHNwZWVkKTsKICAgIH0sCiAgICBzZXRVc2VGcmFtZUludGVycG9sYXRpb246IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCB1c2VGcmFtZUludGVycG9sYXRpb24gPSByZXF1ZXN0LnBhcmFtcy51c2VGcmFtZUludGVycG9sYXRpb247CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFVzZUZyYW1lSW50ZXJwb2xhdGlvbih1c2VGcmFtZUludGVycG9sYXRpb24pOwogICAgfSwKICAgIHNldFdhc21Vcmw6IChyZXF1ZXN0KSA9PiB7CiAgICAgIERvdExvdHRpZS5zZXRXYXNtVXJsKHJlcXVlc3QucGFyYW1zLnVybCk7CiAgICB9LAogICAgc3RvcDogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnN0b3AoKTsKICAgIH0sCiAgICB1bmZyZWV6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnVuZnJlZXplKCk7CiAgICB9LAogICAgc2V0Vmlld3BvcnQocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgeCA9IHJlcXVlc3QucGFyYW1zLng7CiAgICAgIGNvbnN0IHkgPSByZXF1ZXN0LnBhcmFtcy55OwogICAgICBjb25zdCB3aWR0aCA9IHJlcXVlc3QucGFyYW1zLndpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSByZXF1ZXN0LnBhcmFtcy5oZWlnaHQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5zZXRWaWV3cG9ydCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTsKICAgIH0sCiAgICBzZXRNYXJrZXIocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgbWFya2VyID0gcmVxdWVzdC5wYXJhbXMubWFya2VyOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICBpbnN0YW5jZS5zZXRNYXJrZXIobWFya2VyKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdWNjZXNzOiB0cnVlCiAgICAgIH07CiAgICB9LAogICAgc2V0TG9vcChyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBsb29wID0gcmVxdWVzdC5wYXJhbXMubG9vcDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TG9vcChsb29wKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdWNjZXNzOiB0cnVlCiAgICAgIH07CiAgICB9CiAgfTsKICBmdW5jdGlvbiBleGVjdXRlQ29tbWFuZChycGNSZXF1ZXN0KSB7CiAgICBjb25zdCBtZXRob2QgPSBycGNSZXF1ZXN0Lm1ldGhvZDsKICAgIGlmICh0eXBlb2YgY29tbWFuZHNbbWV0aG9kXSA9PT0gImZ1bmN0aW9uIikgewogICAgICByZXR1cm4gY29tbWFuZHNbbWV0aG9kXShycGNSZXF1ZXN0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgTWV0aG9kICR7bWV0aG9kfSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gY29tbWFuZHMuYCk7CiAgICB9CiAgfQogIHNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7CiAgICB0cnkgewogICAgICBjb25zdCByZXN1bHQgPSBleGVjdXRlQ29tbWFuZChldmVudC5kYXRhKTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6IGV2ZW50LmRhdGEuaWQsCiAgICAgICAgbWV0aG9kOiBldmVudC5kYXRhLm1ldGhvZCwKICAgICAgICByZXN1bHQKICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zdCBlcnJvclJlc3BvbnNlID0gewogICAgICAgIGlkOiBldmVudC5kYXRhLmlkLAogICAgICAgIG1ldGhvZDogZXZlbnQuZGF0YS5tZXRob2QsCiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UKICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShlcnJvclJlc3BvbnNlKTsKICAgIH0KICB9OwogIHZhciBkdW1teSA9ICIiOwogIHZhciBkb3Rsb3R0aWVfd29ya2VyX2RlZmF1bHQgPSBkdW1teTsKfSkoKTsK",{type:"classic"})}return y(i)}(c(Worker)),x=function(){function e(){b(this,e),S(this,"_workers",new Map),S(this,"_animationWorkerMap",new Map)}return y(e,[{key:"getWorker",value:function(e){return this._workers.has(e)||this._workers.set(e,new j),this._workers.get(e)}},{key:"assignAnimationToWorker",value:function(e,t){this._animationWorkerMap.set(e,t)}},{key:"unassignAnimationFromWorker",value:function(e){this._animationWorkerMap.delete(e)}},{key:"sendMessage",value:function(e,t,i){this.getWorker(e).postMessage(t,i||[])}},{key:"terminateWorker",value:function(e){var t=this._workers.get(e);t&&(t.terminate(),this._workers.delete(e))}}]),e}();function U(e){if(e instanceof OffscreenCanvas)return{width:e.width,height:e.height};var t=e.getBoundingClientRect(),i=t.height;return{width:t.width*window.devicePixelRatio,height:i*window.devicePixelRatio}}function z(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}var Q=function(){function e(t){b(this,e),S(this,"_eventManager",new L),S(this,"_id"),S(this,"_worker"),S(this,"_canvas"),S(this,"_dotLottieInstanceState",{markers:[],autoplay:!1,backgroundColor:"",currentFrame:0,duration:0,loop:!1,mode:"forward",segment:[0,0],segmentDuration:0,speed:1,totalFrames:0,isLoaded:!1,isPlaying:!1,isPaused:!1,isStopped:!0,isFrozen:!1,useFrameInterpolation:!1,renderConfig:{devicePixelRatio:window.devicePixelRatio},activeAnimationId:"",activeThemeId:"",layout:void 0,marker:void 0,isReady:!1,manifest:null}),S(this,"_created",!1),S(this,"_pointerUpMethod"),S(this,"_pointerDownMethod"),S(this,"_pointerMoveMethod"),S(this,"_pointerEnterMethod"),S(this,"_pointerExitMethod"),S(this,"_onCompleteMethod"),this._canvas=t.canvas,this._id="dotlottie-".concat(z());var i=t.workerId||"defaultWorker";this._worker=e._workerManager.getWorker(i),e._workerManager.assignAnimationToWorker(this._id,i),e._wasmUrl&&this._sendMessage("setWasmUrl",{url:e._wasmUrl}),this._create(t),this._worker.addEventListener("message",this._handleWorkerEvent.bind(this)),this._pointerUpMethod=this._onPointerUp.bind(this),this._pointerDownMethod=this._onPointerDown.bind(this),this._pointerMoveMethod=this._onPointerMove.bind(this),this._pointerEnterMethod=this._onPointerEnter.bind(this),this._pointerExitMethod=this._onPointerLeave.bind(this),this._onCompleteMethod=this._onComplete.bind(this)}var t,i,g,n,o,C,a,s,A,c,l,u,d,h,m,p,f,v,G,Z,B,w,W,K,V,R,k,X,H,E,N,F,_;return y(e,[{key:"_handleWorkerEvent",value:(_=r(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.data,e.t0=i.id,e.t0){e.next=52;break}if(e.t1="onLoad"===i.method&&i.result.instanceId===this._id,!e.t1){e.next=8;break}return e.next=7,this._updateDotLottieInstanceState();case 7:this._eventManager.dispatch(i.result.event);case 8:if(e.t2="onComplete"===i.method&&i.result.instanceId===this._id,!e.t2){e.next=13;break}return e.next=12,this._updateDotLottieInstanceState();case 12:this._eventManager.dispatch(i.result.event);case 13:if("onDestroy"===i.method&&i.result.instanceId===this._id&&this._eventManager.dispatch(i.result.event),e.t3="onUnfreeze"===i.method&&i.result.instanceId===this._id,!e.t3){e.next=20;break}return e.next=18,this._updateDotLottieInstanceState();case 18:this._dotLottieInstanceState.isFrozen=!1,this._eventManager.dispatch(i.result.event);case 20:if("onFrame"===i.method&&i.result.instanceId===this._id&&(this._dotLottieInstanceState.currentFrame=i.result.event.currentFrame,this._eventManager.dispatch(i.result.event)),"onRender"===i.method&&i.result.instanceId===this._id&&this._eventManager.dispatch(i.result.event),e.t4="onFreeze"===i.method&&i.result.instanceId===this._id,!e.t4){e.next=27;break}return e.next=26,this._updateDotLottieInstanceState();case 26:this._eventManager.dispatch(i.result.event);case 27:if(e.t5="onPause"===i.method&&i.result.instanceId===this._id,!e.t5){e.next=32;break}return e.next=31,this._updateDotLottieInstanceState();case 31:this._eventManager.dispatch(i.result.event);case 32:if(e.t6="onPlay"===i.method&&i.result.instanceId===this._id,!e.t6){e.next=37;break}return e.next=36,this._updateDotLottieInstanceState();case 36:this._eventManager.dispatch(i.result.event);case 37:if(e.t7="onStop"===i.method&&i.result.instanceId===this._id,!e.t7){e.next=42;break}return e.next=41,this._updateDotLottieInstanceState();case 41:this._eventManager.dispatch(i.result.event);case 42:if(e.t8="onLoadError"===i.method&&i.result.instanceId===this._id,!e.t8){e.next=47;break}return e.next=46,this._updateDotLottieInstanceState();case 46:this._eventManager.dispatch(i.result.event);case 47:if(e.t9="onReady"===i.method&&i.result.instanceId===this._id,!e.t9){e.next=52;break}return e.next=51,this._updateDotLottieInstanceState();case 51:this._eventManager.dispatch(i.result.event);case 52:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"_create",value:(F=r(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._canvas instanceof HTMLCanvasElement?this._canvas.transferControlToOffscreen():this._canvas,e.next=3,this._sendMessage("create",I({instanceId:this._id,config:I(I({},t),{},{canvas:i})},U(this._canvas)),[i]);case 3:if(e.sent.instanceId===this._id){e.next=7;break}throw new Error("Instance ID mismatch");case 7:return this._created=!0,e.next=10,this._updateDotLottieInstanceState();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return F.apply(this,arguments)})},{key:"isLoaded",get:function(){return this._dotLottieInstanceState.isLoaded}},{key:"isPlaying",get:function(){return this._dotLottieInstanceState.isPlaying}},{key:"isPaused",get:function(){return this._dotLottieInstanceState.isPaused}},{key:"isStopped",get:function(){return this._dotLottieInstanceState.isStopped}},{key:"currentFrame",get:function(){return this._dotLottieInstanceState.currentFrame}},{key:"isFrozen",get:function(){return this._dotLottieInstanceState.isFrozen}},{key:"segmentDuration",get:function(){return this._dotLottieInstanceState.segmentDuration}},{key:"totalFrames",get:function(){return this._dotLottieInstanceState.totalFrames}},{key:"segment",get:function(){return this._dotLottieInstanceState.segment}},{key:"speed",get:function(){return this._dotLottieInstanceState.speed}},{key:"duration",get:function(){return this._dotLottieInstanceState.duration}},{key:"isReady",get:function(){return this._dotLottieInstanceState.isReady}},{key:"mode",get:function(){return this._dotLottieInstanceState.mode}},{key:"canvas",get:function(){return this._canvas}},{key:"autoplay",get:function(){return this._dotLottieInstanceState.autoplay}},{key:"backgroundColor",get:function(){return this._dotLottieInstanceState.backgroundColor}},{key:"loop",get:function(){return this._dotLottieInstanceState.loop}},{key:"useFrameInterpolation",get:function(){return this._dotLottieInstanceState.useFrameInterpolation}},{key:"renderConfig",get:function(){return this._dotLottieInstanceState.renderConfig}},{key:"manifest",get:function(){return this._dotLottieInstanceState.manifest}},{key:"activeAnimationId",get:function(){return this._dotLottieInstanceState.activeAnimationId}},{key:"marker",get:function(){return this._dotLottieInstanceState.marker}},{key:"activeThemeId",get:function(){return this._dotLottieInstanceState.activeThemeId}},{key:"layout",get:function(){return this._dotLottieInstanceState.layout}},{key:"play",value:(N=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("play",{instanceId:this._id});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)})},{key:"pause",value:(E=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("pause",{instanceId:this._id});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"stop",value:(H=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("stop",{instanceId:this._id});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(){return H.apply(this,arguments)})},{key:"setSpeed",value:(X=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setSpeed",{instanceId:this._id,speed:t});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return X.apply(this,arguments)})},{key:"setMode",value:(k=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setMode",{instanceId:this._id,mode:t});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"setFrame",value:(R=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setFrame",{frame:t,instanceId:this._id});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"setSegment",value:(V=r(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setSegment",{instanceId:this._id,segment:[t,i]});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return V.apply(this,arguments)})},{key:"setRenderConfig",value:(K=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setRenderConfig",{instanceId:this._id,renderConfig:t});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"setUseFrameInterpolation",value:(W=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setUseFrameInterpolation",{instanceId:this._id,useFrameInterpolation:t});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return W.apply(this,arguments)})},{key:"loadTheme",value:(w=r(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._created){e.next=2;break}return e.abrupt("return",!1);case 2:return i=this._sendMessage("loadTheme",{instanceId:this._id,themeId:t}),e.next=5,this._updateDotLottieInstanceState();case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"load",value:(B=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("load",{config:t,instanceId:this._id});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)})},{key:"setLoop",value:(Z=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setLoop",{instanceId:this._id,loop:t});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return Z.apply(this,arguments)})},{key:"resize",value:(G=r(regeneratorRuntime.mark((function e(){var t,i,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._created){e.next=2;break}return e.abrupt("return");case 2:return t=U(this._canvas),i=t.height,g=t.width,this._canvas.width=g,this._canvas.height=i,e.next=7,this._sendMessage("resize",{height:i,instanceId:this._id,width:g});case 7:return e.next=9,this._updateDotLottieInstanceState();case 9:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{key:"destroy",value:(v=r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this._created,!t.t0){t.next=8;break}return this._created=!1,t.next=5,this._sendMessage("destroy",{instanceId:this._id});case 5:this._cleanupStateMachineListeners(),e._workerManager.unassignAnimationFromWorker(this._id),this._eventManager.removeAllEventListeners();case 8:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"freeze",value:(f=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("freeze",{instanceId:this._id});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"unfreeze",value:(p=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("unfreeze",{instanceId:this._id});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"setBackgroundColor",value:(m=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setBackgroundColor",{instanceId:this._id,backgroundColor:t});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"loadAnimation",value:(h=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("loadAnimation",{animationId:t,instanceId:this._id});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"setLayout",value:(d=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setLayout",{instanceId:this._id,layout:t});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"_updateDotLottieInstanceState",value:(u=r(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._created){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._sendMessage("getDotLottieInstanceState",{instanceId:this._id});case 4:t=e.sent,this._dotLottieInstanceState=t.state;case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"markers",value:function(){return this._dotLottieInstanceState.markers}},{key:"setMarker",value:(l=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._created,!e.t0){e.next=6;break}return e.next=4,this._sendMessage("setMarker",{instanceId:this._id,marker:t});case 4:return e.next=6,this._updateDotLottieInstanceState();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"loadThemeData",value:(c=r(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._created){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this._sendMessage("loadThemeData",{instanceId:this._id,themeData:t});case 4:return i=e.sent,e.next=7,this._updateDotLottieInstanceState();case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"setViewport",value:(A=r(regeneratorRuntime.mark((function e(t,i,g,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!this._created&&this._sendMessage("setViewport",{x:t,y:i,width:g,height:n,instanceId:this._id}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,i,g){return A.apply(this,arguments)})},{key:"_sendMessage",value:(s=r(regeneratorRuntime.mark((function e(t,i,g){var n,I=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:"dotlottie-request-".concat(z()),method:t,params:i},e.abrupt("return",(this._worker.postMessage(n,g||[]),new Promise((function(e,i){I._worker.addEventListener("message",(function g(o){var C=o.data;C.id===n.id&&(I._worker.removeEventListener("message",g),C.error?i(new Error("Failed to execute method ".concat(t,": ").concat(C.error))):e(C.result))}))}))));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return s.apply(this,arguments)})},{key:"addEventListener",value:function(e,t){this._eventManager.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this._eventManager.removeEventListener(e,t)}},{key:"loadStateMachine",value:(a=r(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._created){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this._sendMessage("loadStateMachine",{instanceId:this._id,stateMachineId:t});case 4:return i=e.sent,e.next=7,this._updateDotLottieInstanceState();case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"loadStateMachineData",value:(C=r(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._created){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this._sendMessage("loadStateMachineData",{instanceId:this._id,stateMachineData:t});case 4:return i=e.sent,e.next=7,this._updateDotLottieInstanceState();case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"startStateMachine",value:(o=r(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._created){e.next=2;break}return e.abrupt("return",!1);case 2:return this._setupStateMachineListeners(),e.next=5,this._sendMessage("startStateMachine",{instanceId:this._id});case 5:return t=e.sent,e.next=8,this._updateDotLottieInstanceState();case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"stopStateMachine",value:(n=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!this._created&&(this._cleanupStateMachineListeners(),this._sendMessage("stopStateMachine",{instanceId:this._id})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"postStateMachineEvent",value:(g=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._created?this._sendMessage("postStateMachineEvent",{event:t,instanceId:this._id}):1);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"getStateMachineListeners",value:(i=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._created?this._sendMessage("getStateMachineListeners",{instanceId:this._id}):[]);case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_getPointerPosition",value:function(e){var t=this._canvas.getBoundingClientRect(),i=this._canvas.width/t.width,g=this._canvas.height/t.height,n=this._dotLottieInstanceState.renderConfig.devicePixelRatio||window.devicePixelRatio||1;return{x:(e.clientX-t.left)*i/n,y:(e.clientY-t.top)*g/n}}},{key:"_onPointerUp",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerUp: ".concat(i," ").concat(g))}},{key:"_onPointerDown",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerDown: ".concat(i," ").concat(g))}},{key:"_onPointerMove",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerMove: ".concat(i," ").concat(g))}},{key:"_onPointerEnter",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerEnter: ".concat(i," ").concat(g))}},{key:"_onPointerLeave",value:function(e){var t=this._getPointerPosition(e),i=t.x,g=t.y;this.postStateMachineEvent("OnPointerExit: ".concat(i," ").concat(g))}},{key:"_onComplete",value:function(){this.postStateMachineEvent("OnComplete")}},{key:"_setupStateMachineListeners",value:(t=r(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Y&&this._canvas instanceof HTMLCanvasElement&&this.isLoaded)){e.next=5;break}return e.next=3,this._sendMessage("getStateMachineListeners",{instanceId:this._id});case 3:(t=e.sent).includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._pointerUpMethod),t.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._pointerDownMethod),t.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._pointerMoveMethod),t.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._pointerEnterMethod),t.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._pointerExitMethod),t.includes("Complete")&&this.addEventListener("complete",this._onCompleteMethod);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_cleanupStateMachineListeners",value:function(){Y&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._pointerUpMethod),this._canvas.removeEventListener("pointerdown",this._pointerDownMethod),this._canvas.removeEventListener("pointermove",this._pointerMoveMethod),this._canvas.removeEventListener("pointerenter",this._pointerEnterMethod),this._canvas.removeEventListener("pointerleave",this._pointerExitMethod),this.removeEventListener("complete",this._onCompleteMethod))}}],[{key:"setWasmUrl",value:function(t){e._wasmUrl=t}}]),e}();S(Q,"_workerManager",new x),S(Q,"_wasmUrl","")}).call(this,i(20).setImmediate,i(20).clearImmediate)},,,,,,,,,,function(e,t,i){e.exports=i(47)},function(e,t,i){(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){"use strict";var i=Object.prototype,g=i.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},I="function"==typeof Symbol?Symbol:{},o=I.iterator||"@@iterator",C=I.asyncIterator||"@@asyncIterator",r=I.toStringTag||"@@toStringTag";function a(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,i){return e[t]=i}}function s(e,t,i,g){var I=t&&t.prototype instanceof l?t:l,o=Object.create(I.prototype),C=new S(g||[]);return n(o,"_invoke",{value:v(e,i,C)}),o}function A(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c={};function l(){}function u(){}function d(){}var h={};a(h,o,(function(){return this}));var m=Object.getPrototypeOf,p=m&&m(m(w([])));p&&p!==i&&g.call(p,o)&&(h=p);var b=d.prototype=l.prototype=Object.create(h);function f(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,i){var I;n(this,"_invoke",{value:function(n,o){function C(){return new i((function(I,C){!function n(I,o,C,r){var a=A(e[I],e,o);if("throw"!==a.type){var s=a.arg,c=s.value;return c&&"object"===t(c)&&g.call(c,"__await")?i.resolve(c.__await).then((function(e){n("next",e,C,r)}),(function(e){n("throw",e,C,r)})):i.resolve(c).then((function(e){s.value=e,C(s)}),(function(e){return n("throw",e,C,r)}))}r(a.arg)}(n,o,I,C)}))}return I=I?I.then(C,C):C()}})}function v(e,t,i){var g="suspendedStart";return function(n,I){if("executing"===g)throw new Error("Generator is already running");if("completed"===g){if("throw"===n)throw I;return{value:void 0,done:!0}}for(i.method=n,i.arg=I;;){var o=i.delegate;if(o){var C=G(o,i);if(C){if(C===c)continue;return C}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===g)throw g="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);g="executing";var r=A(e,t,i);if("normal"===r.type){if(g=i.done?"completed":"suspendedYield",r.arg===c)continue;return{value:r.arg,done:i.done}}"throw"===r.type&&(g="completed",i.method="throw",i.arg=r.arg)}}}function G(e,t){var i=t.method,g=e.iterator[i];if(void 0===g)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,G(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),c;var n=A(g,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var I=n.arg;return I?I.done?(t[e.resultName]=I.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):I:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function w(e){if(null!=e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,I=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return I.next=I}}throw new TypeError(t(e)+" is not iterable")}return u.prototype=d,n(b,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:u,configurable:!0}),u.displayName=a(d,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,r,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},f(y.prototype),a(y.prototype,C,(function(){return this})),e.AsyncIterator=y,e.async=function(t,i,g,n,I){void 0===I&&(I=Promise);var o=new y(s(t,i,g,n),I);return e.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},f(b),a(b,r,"Generator"),a(b,o,(function(){return this})),a(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var g in t)i.push(g);return i.reverse(),function e(){for(;i.length;){var g=i.pop();if(g in t)return e.value=g,e.done=!1,e}return e.done=!0,e}},e.values=w,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,g){return o.type="throw",o.arg=e,t.next=i,g&&(t.method="next",t.arg=void 0),!!g}for(var n=this.tryEntries.length-1;n>=0;--n){var I=this.tryEntries[n],o=I.completion;if("root"===I.tryLoc)return i("end");if(I.tryLoc<=this.prev){var C=g.call(I,"catchLoc"),r=g.call(I,"finallyLoc");if(C&&r){if(this.prev<I.catchLoc)return i(I.catchLoc,!0);if(this.prev<I.finallyLoc)return i(I.finallyLoc)}else if(C){if(this.prev<I.catchLoc)return i(I.catchLoc,!0)}else{if(!r)throw new Error("try statement without catch or finally");if(this.prev<I.finallyLoc)return i(I.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var I=n;break}}I&&("break"===e||"continue"===e)&&I.tryLoc<=t&&t<=I.finallyLoc&&(I=null);var o=I?I.completion:{};return o.type=e,o.arg=t,I?(this.method="next",this.next=I.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),B(i),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var g=i.completion;if("throw"===g.type){var n=g.arg;B(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:w(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=i}catch(e){"object"===("undefined"==typeof globalThis?"undefined":t(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}).call(this,i(1)(e))},function(e,t,i){(function(e,t){!function(e,i){"use strict";if(!e.setImmediate){var g,n,I,o,C,r=1,a={},s=!1,A=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?g=function(e){t.nextTick((function(){u(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?e.MessageChannel?((I=new MessageChannel).port1.onmessage=function(e){u(e.data)},g=function(e){I.port2.postMessage(e)}):A&&"onreadystatechange"in A.createElement("script")?(n=A.documentElement,g=function(e){var t=A.createElement("script");t.onreadystatechange=function(){u(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):g=function(e){setTimeout(u,0,e)}:(o="setImmediate$"+Math.random()+"$",C=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&u(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",C,!1):e.attachEvent("onmessage",C),g=function(t){e.postMessage(o+t,"*")}),c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return a[r]=n,g(r),r++},c.clearImmediate=l}function l(e){delete a[e]}function u(e){if(s)setTimeout(u,0,e);else{var t=a[e];if(t){s=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(void 0,i)}}(t)}finally{l(e),s=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i(21),i(36))},function(e,t){var i,g,n=e.exports={};function I(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function C(e){if(i===setTimeout)return setTimeout(e,0);if((i===I||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:I}catch(e){i=I}try{g="function"==typeof clearTimeout?clearTimeout:o}catch(e){g=o}}();var r,a=[],s=!1,A=-1;function c(){s&&r&&(s=!1,r.length?a=r.concat(a):A=-1,a.length&&l())}function l(){if(!s){var e=C(c);s=!0;for(var t=a.length;t;){for(r=a,a=[];++A<t;)r&&r[A].run();A=-1,t=a.length}r=null,s=!1,function(e){if(g===clearTimeout)return clearTimeout(e);if((g===o||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(e);try{g(e)}catch(t){try{return g.call(null,e)}catch(t){return g.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function d(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];a.push(new u(e,t)),1!==a.length||s||C(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var g,n,I=[],o=!0,C=!1;try{for(i=i.call(e);!(o=(g=i.next()).done)&&(I.push(g.value),!t||I.length!==t);o=!0);}catch(e){C=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(C)throw n}}return I}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var g=0,I=function(){};return{s:I,n:function(){return g>=e.length?{done:!0}:{done:!1,value:e[g++]}},e:function(e){throw e},f:I}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,C=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return C=e.done,e},e:function(e){r=!0,o=e},f:function(){try{C||null==i.return||i.return()}finally{if(r)throw o}}}}function n(e,t){if(e){if("string"==typeof e)return I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,g=new Array(t);i<t;i++)g[i]=e[i];return g}function o(){var e,t=g(document.querySelectorAll(".js-qdemo"));try{for(t.s();!(e=t.n()).done;){var i=e.value,n=i.querySelector(".js-qdemo-body"),I=i.querySelector(".js-qdemo-panel.is-visible");if(I){var o=I.getBoundingClientRect().height;o<=2&&I.querySelector(".forr-qdemo__vid")&&(o=I.getBoundingClientRect().width/16*9),n.style.height="".concat(o,"px")}}}catch(e){t.e(e)}finally{t.f()}}document.addEventListener("DOMContentLoaded",(function(e){var t,n=g(document.querySelectorAll(".js-qdemo"));try{var I=function(){var e,n=t.value,I=n.querySelectorAll(".js-qdemo-tab"),C=n.querySelectorAll(".js-qdemo-panel"),r=g(I.entries());try{var a=function(){var t=i(e.value,2),g=t[0],I=t[1];I.addEventListener("click",(function(e){var t,i;(e.preventDefault(),"true"!==I.getAttribute("aria-selected"))&&(null===(t=n.querySelector('.js-qdemo-tab[aria-selected="true"]'))||void 0===t||t.setAttribute("aria-selected","false"),null===(i=n.querySelector(".js-qdemo-panel.is-visible"))||void 0===i||i.classList.remove("is-visible"),I.setAttribute("aria-selected","true"),C[g].classList.add("is-visible"),o())}))};for(r.s();!(e=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}o()};for(n.s();!(t=n.n()).done;)I()}catch(e){n.e(e)}finally{n.f()}})),window.addEventListener("resize",o)},function(e,t){document.addEventListener("DOMContentLoaded",(function(e){window.addEventListener("load",(function(){document.querySelector(".forr-tl-audio")&&document.querySelectorAll(".forr-tl-audio").forEach((function(e){e.querySelector(".mejs-playpause-button").addEventListener("click",(function(){e.classList.toggle("playing")}))}))}))}))},,,,,,,,,function(e,t,i){"use strict";i.r(t);i(34),i(3),i(4),i(5),i(6),i(7),i(8),i(13);var g=i(23);function n(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var g=0,n=function(){};return{s:n,n:function(){return g>=e.length?{done:!0}:{done:!1,value:e[g++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,C=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return C=e.done,e},e:function(e){r=!0,o=e},f:function(){try{C||null==i.return||i.return()}finally{if(r)throw o}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,g=new Array(t);i<t;i++)g[i]=e[i];return g}document.addEventListener("DOMContentLoaded",(function(){var e,t=n(document.querySelectorAll(".js-lottie"));try{for(t.s();!(e=t.n()).done;){var i=e.value;new g.a({autoplay:!0,loop:!0,canvas:i,data:i.dataset.file})}}catch(e){t.e(e)}finally{t.f()}}));i(18);var o=i(2);function C(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var g=0,n=function(){};return{s:n,n:function(){return g>=e.length?{done:!0}:{done:!1,value:e[g++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var I,o=!0,C=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){C=!0,I=e},f:function(){try{o||null==i.return||i.return()}finally{if(C)throw I}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,g=new Array(t);i<t;i++)g[i]=e[i];return g}document.addEventListener("DOMContentLoaded",(function(e){window.addEventListener("scroll",(function(e){var t,i=C(document.querySelectorAll(".js-data-point:not(.is-active)"));try{for(i.s();!(t=i.n()).done;){var g=t.value;if(g.getBoundingClientRect().bottom<=window.innerHeight/5*4){g.classList.add("is-active");var n=new o.a(g,g.dataset.value);n.error?console.error(n.error):n.start()}}}catch(e){i.e(e)}finally{i.f()}})),window.dispatchEvent(new CustomEvent("scroll"))}));i(9),i(11),i(10),i(37),i(38);!function(e,t){function i(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}e.init=function(){document.querySelector("body").classList.add("js");var e={reference:i("reference"),utm_source:i("utm_source"),utm_medium:i("utm_medium"),utm_campaign:i("utm_campaign"),utm_term:i("utm_term"),utm_content:i("utm_content"),categoryid:i("categoryid"),discountcode:i("discountcode")},g=Object.entries(e).filter((function(e){return!!e[1]})).map((function(e){return e.join("=")})).join("&");g&&g.length>0&&t("a[href]").each((function(){if(!t(this).data("toggle")&&!t(this).hasClass("js-agenda-nav-tab")){var e=t(this),i=e.attr("href"),n=i,I="";i.indexOf("#")>-1&&(n=i.split("#")[0],I="#"+i.split("#")[1]),e.attr("href",n+(-1!=n.indexOf("?")?"&":"?")+g+I)}}))},t(document).ready((function(){e.init()}))}(window.FORRESTER=window.FORRESTER||{},jQuery)}]);